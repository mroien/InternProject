/*!
Invodo.js 15.1.1f.83
Copyright Invodo, Inc. 2014
*/
var Invodo=function(d){if(window.Invodo){return window.Invodo}var j={},a=d,o="000000",r=null,k=false,n="FFFFFF",e=document.title,g=null,i=null,s=null,c=null,f="8DCC00",b="15.1.1f.83",m="//e.invodo.com/",l="//log.invodo.com/";j.getCanonicalUrl=function(){var t=document.getElementsByTagName("link");var u="";for(var v in t){var w=t[v];if(w.rel=="canonical"){u=w.href}}return u};j.getLogDomain=function(){return l};j.getPageUrl=function(){return window.location.href};j.getSeoUrl=function(){var u=j.getCanonicalUrl();var t="";if(u){if(u.indexOf("http")<0){u=window.location.href+u}t=u}return t};j.getPodDomain=function(){return m};function h(){if(Invodo.Module.has("logger")){var z=Invodo.Env.browser;var t=Invodo.Env.flash;var y=Invodo.Env.html5Video;var w=Invodo.Env.screen;var A={cu:j.getSeoUrl(),pu:j.getPageUrl(),re:document.referrer,ti:document.title,be:z.engine,bv:z.version,pl:z.platform,fl:t.version,hv:y.supported,sw:w.screenWidth(),sh:w.screenHeight(),ww:w.viewportWidth(),wh:w.viewportHeight(),lc:window.navigator.language,ua:window.navigator.userAgent,mb:("onorientationchange" in window)?true:false};var v=Invodo.getPageName();if(v){A.pn=v}var B=Invodo.getPageType();if(B){A.pt=B}var u=Invodo.getParentPage();if(u){A.pp=u}var x=Invodo.getParentPageType();if(x){A.ppt=x}Invodo.Module.get("logger").log("Invodo","pageView",A)}}j.Src={Module:{},Widget:{}};j.Tool={};j.Console={dir:function(t){if(window.console&&window.console.dir){window.console.dir(t)}},log:function(t){if(window.console&&window.console.log){window.console.log(t)}},warn:function(t){if(window.console&&window.console.warn){window.console.warn(t);window.console.warn(new Error().stack)}}};j.getAffiliate=function(){var t="";if(a&&a.affiliate){t=a.affiliate}return t};function q(w,t,v){for(var u in t){if(v&&(u in w)){break}w[u]=t[u]}return w}j.getAffiliateConfig=function(){a.backcolor=a.backcolor?a.backcolor:o;a.frontcolor=a.frontcolor?a.frontcolor:n;a.secondarycolor=a.secondarycolor?a.secondarycolor:f;return a};j.getPageName=function(){return e};j.init=function(t){i=Invodo.Visitor.getPageViewId();if(!t){return j}r=t;if("logDomain" in r){l=r.logDomain}if("podDomain" in r){m=r.podDomain}Invodo.Pod.init();if(r.affiliate){a=q(a,r.affiliate)}if(r.pageType){g=r.pageType}if(r.parentPage){s=r.parentPage}if(r.parentPageType){c=r.parentPageType}if(r.pageName&&r.pageName.length>0){e=r.pageName}if(Invodo.Module.has("logger")===false){Invodo.Module.add(Invodo.Src.Module.Logger,"logger");if(r.affiliate&&r.affiliate.nooplogger&&r.affiliate.nooplogger==="true"){Invodo.Module.get("logger").log=function(u){}}if(r.debugLogger&&(r.debugLogger!="false")){Invodo.Module.get("logger").setDebug(true)}h()}else{Invodo.Console.log("ERROR: logger module already loaded.")}if(r.onload){Invodo.Event.ready(r.onload)}if(r.onpodload){Invodo.onpodload=r.onpodload}return j};j.getPageType=function(){return g};j.getParentPage=function(){return s};j.getParentPageType=function(){return c};j.getPageViewId=function(){return i};j.notify=function(t){if(Invodo.onpodload){Invodo.onpodload(t)}};j.version=function(){return b};j.version.toString=function(){return b};return j}({ "videoPlayerPreference":"Flash", "test":"false", "rtmpBase":"rtmp://aoaef.invodo.com/", "imageBase":"http://e.invodo.com/media/", "httpBase":"http://e.invodo.com/media/", "affiliate":"worldmarket", "name":"", "playbuttoncolor":"black", "backcolor":"000000", "frontcolor":"FFFFFF", "secondarycolor":"1B9990", "aspectratio":"FULLSCREEN", "bufferscreenbranding":"INVODO", "endofcontentbranding":"INVODO", "showcliptitles":"true", "ratingenabled":"true", "autoplaymultipleclips":"true", "share":"true", "og":"true", "seoStructData":"", "playlist":"true", "chromelessmode":"false", "bgcolor":"000000", "loadingviewcolor":"FFFFFF", "loadingview":"true", "watermark":"false" ,"height":"360" ,"width":"640" });(function(b){var d=this.Lang={},h=Object.prototype,e=h.toString,g=h.hasOwnProperty,j=Array.prototype,k=j.slice,c=j.filter,i=j.indexOf,a=j.map,f=String.prototype.trim;d.isEmptyObject=function(l){var m;if(d.type(l)!=="object"){return false}for(m in l){return false}return true};d.hasOwn=function(l,m){return l&&g.call(l,m)};d.isFunction=function(l){return d.type(l)==="function"};d.isArray=function(l){return d.type(l)==="array"};d.isElement=function(l){return l&&l.nodeType!==undefined};d.isPlainObject=function(l){return l&&l.constructor===Object};d.isWindow=function(l){return l&&l==l.window};d.forEach=function(o,n){var m=0,r,q,l;if(d.isArray(o)){l=o.length;for(;m<l;m++){q=o[m];if(n.call(q,m,q)===false){break}}}else{for(r in o){q=o[r];if(n.call(q,r,q)===false){break}}}return o};d.type=function(m){var l;if(m!==m){return"nan"}l=e.call(m);return l.toLowerCase().slice(8,l.length-1)};d.filter=c?function(l,m){return l.filter(m)}:function(m,q){var l=m.length,o=0,n=[],r;for(;o<l;o++){r=m[o];if(q.call(m,r,o,m)){n.push(r)}}return n};d.map=a?function(l,m){return l.map(m)}:function(m,q){var o=0,l=m.length,n=[];for(;o<l;o++){if(o in m){n[o]=q.call(b,m[o],o,m)}}return n};d.indexOf=i?function(l,m){return l.indexOf(m)}:function(m,o){var n=0,l=m.length;for(;n<l;n++){if(n in m&&m[n]===o){return n}}return -1};d.trim=function(l){return l.replace(/^\s+/g,"").replace(/\s+$/g,"")};d.mix=function(t){var m=k.call(arguments,1),r=0,s=m.length,l,n,q,o,u;if(!t||!m.length){return t}for(;r<s;r++){l=m[r];if(!l){continue}for(n in l){q=l[n];o=t[n];if(d.isPlainObject(q)){t[n]=d.mix({},o,q)}else{if(d.isArray(q)){t[n]=d.mix([],o,q)}else{t[n]=q}}}}return t};d.clone=function(n){var l=(n instanceof Array)?[]:{};for(var m in n){if(n[m]&&typeof n[m]=="object"){l[m]=d.clone(n[m])}else{l[m]=n[m]}}return l};d.normalizeUrl=function(l){return l.replace(/([^:]\/)\/+/g,"$1")}}).call(Invodo,this);(function(c,b){var l=this.JSON={};if(c.JSON&&this.Lang.type(c.JSON)==="json"){l.stringify=function(o,f,n){return c.JSON.stringify(o,f,n)};l.parse=function(n,f){return c.JSON.parse(n,f)};return}function g(f){return f<10?"0"+f:f}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,j=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,d,m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;function a(f){j.lastIndex=0;return j.test(f)?'"'+f.replace(j,function(n){var o=m[n];return typeof o==="string"?o:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function h(u,r){var o,n,w,f,s=k,q,t=r[u];if(t&&typeof t==="object"&&typeof t.toJSON==="function"){t=t.toJSON(u)}if(typeof i==="function"){t=i.call(r,u,t)}switch(typeof t){case"string":return a(t);case"number":return isFinite(t)?String(t):"null";case"boolean":case"null":return String(t);case"object":if(!t){return"null"}k+=d;q=[];if(Object.prototype.toString.apply(t)==="[object Array]"){f=t.length;for(o=0;o<f;o+=1){q[o]=h(o,t)||"null"}w=q.length===0?"[]":k?"[\n"+k+q.join(",\n"+k)+"\n"+s+"]":"["+q.join(",")+"]";k=s;return w}if(i&&typeof i==="object"){f=i.length;for(o=0;o<f;o+=1){if(typeof i[o]==="string"){n=i[o];w=h(n,t);if(w){q.push(a(n)+(k?": ":":")+w)}}}}else{for(n in t){if(Object.prototype.hasOwnProperty.call(t,n)){w=h(n,t);if(w){q.push(a(n)+(k?": ":":")+w)}}}}w=q.length===0?"{}":k?"{\n"+k+q.join(",\n"+k)+"\n"+s+"}":"{"+q.join(",")+"}";k=s;return w}}if(typeof l.stringify!=="function"){l.stringify=function(q,n,o){var f;k="";d="";if(typeof o==="number"){for(f=0;f<o;f+=1){d+=" "}}else{if(typeof o==="string"){d=o}}i=n;if(n&&typeof n!=="function"&&(typeof n!=="object"||typeof n.length!=="number")){throw new Error("JSON.stringify")}return h("",{"":q})}}if(typeof l.parse!=="function"){l.parse=function(q,f){var o;function n(u,t){var s,r,w=u[t];if(w&&typeof w==="object"){for(s in w){if(Object.prototype.hasOwnProperty.call(w,s)){r=n(w,s);if(r!==undefined){w[s]=r}else{delete w[s]}}}}return f.call(u,t,w)}q=String(q);e.lastIndex=0;if(e.test(q)){q=q.replace(e,function(r){return"\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(q.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){o=b("("+q+")");return typeof f==="function"?n({"":o},""):o}throw new SyntaxError("JSON.parse")}}}).call(Invodo,this,eval);(function(b){var j=this.Env={},e=this.Lang,o=b.document,d=o.documentElement,i=document.body,q=b.navigator,a=q.userAgent.toLowerCase(),c=q.platform.toLowerCase(),n="Shockwave Flash",k="ShockwaveFlash.ShockwaveFlash",f="application/x-shockwave-flash",h=function(t){return b.parseInt(t,10)},r=function(){var x={platform:c},z=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,A=/(trident)[ \/]([\w.]+)/,B=/(msie)/i,y=/(mozilla)(?:.*? rv:([\w.]+))?/,t=/chrome/,C=/safari/,w=/ipod|ipad|iphone/i,D=/phantom/i,v=D.test(a),u=z.exec(a)||s.exec(a)||A.exec(a)||B.exec(a)||a.indexOf("compatible")<0&&y.exec(a)||["unknown","unknown"];x.userAgent=u[0];u[1]=u[1].toLowerCase();if(u[1]==="trident"){x.engine="msie"}else{x.engine=u[1]}x.version=u[2];x.chrome=t.test(a);x.safari=C.test(a)&&!(x.chrome)&&!v;x.phantom=v;x.ios=x.safari&&(w.test(c));if(x.engine==="msie"){x.ie=true}else{x.ie=false}return x},g=function(){var t=o.createElement("video"),v="canPlayType",s=false,u={supported:s,h262Base:false,h264Extend:false,h264Main:false,h264High:false,oggTheora:false,webM:false};try{s=t.canPlayType("video/mp4");u.supported=s;u.h262Base=s&&t[v]('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')||false;u.h264Extend=s&&t[v]('video/mp4; codecs="avc1.58A01E, mp4a.40.2"')||false;u.h264Main=s&&t[v]('video/mp4; codecs="avc1.4D401E, mp4a.40.2"')||false;u.h264High=s&&t[v]('video/mp4; codecs="avc1.64001E, mp4a.40.2"')||false;u.oggTheora=s&&t[v]('video/ogg; codecs="theora, vorbis"')||false;u.webM=s&&t[v]('video/webm; codecs="vp8, vorbis"')||false}catch(w){}t=null;return u},l=function(){var u={supported:false,ActiveX:false,version:[0,0,0]},v,s;if(q.plugins&&q.plugins[n]){v=q.plugins[n].description;if(v&&q.mimeTypes&&q.mimeTypes[f]&&q.mimeTypes[f].enabledPlugin){u.supported=true;v=v.replace(/^.*\s+(\S+\s+\S+$)/,"$1");u.version=[h(v.replace(/^(.*)\..*$/,"$1")),h(v.replace(/^.*\.(.*)\s.*$/,"$1")),/[a-zA-Z]/.test(v)?h(v.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0]}}else{if(b.ActiveXObject){try{s=new ActiveXObject(k);if(s){v=s.GetVariable("$version");if(v){u.supported=true;v=v.split(" ")[1].split(",");u.version=[h(v[0]),h(v[1]),h(v[2])];u.ActiveX=true}}}catch(t){}}}return u},m=function(){var s={};s.mode="standard";s.screenHeight=function(){return b.screen.height};s.screenWidth=function(){return b.screen.width};s.documentHeight=function(){var t=document.body,u=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight)};if(b.innerWidth&&b.innerHeight){s.viewportWidth=function(){return b.innerWidth};s.viewportHeight=function(){return b.innerHeight}}else{if(o.compatMode==="CSS1Compat"){s.viewportWidth=function(){return d.clientWidth};s.viewportHeight=function(){return d.clientHeight}}else{s.mode="quirks";s.viewportWidth=function(){return d.offsetWidth};s.viewportHeight=function(){return d.offsetHeight}}}return s};e.mix(j,{browser:r(),html5Video:g(),flash:l(),screen:m()})}).call(Invodo,this);(function(c){var k=c.document,d=this.Lang,m=d.mix,j=d.type,e=d.trim,h=c.encodeURIComponent,a=c.decodeURIComponent,f=new Date(0).toUTCString(),i=function(o){var n=null;d.forEach(k.cookie.split(";"),function(s,r){var q=r.split("="),t=a(e(q[0]));if(t===o){n=a(q[1]);return false}});return n},l=function(o,q,n){if(j(n.expires)==="date"){n.expires=n.expires.toUTCString()}if(n.encode){o=h(o);q=h(q)}k.cookie=[o+"="+q,n.expires?"; expires="+n.expires:"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")},g=(function(){var r="__invodotest",q="test_val",n=false;try{l(r,q,{});if(i(r)===q){n=true}l(r,"",{expires:f})}catch(o){}return n}());var b=this.Cookie={enabled:function(){return g},get:function(n){return i(n)},set:function(o,r,n){var q=m({},b.defaults,n);l(o,r,q)},del:function(o,n){var q=m({},b.defaults,n,{expires:f});l(o,"",q)},defaults:{path:"/",secure:false,expires:null,domain:"",encode:false}}}).call(Invodo,this);(function(b){var j=this.Storage={},d=this.Lang,n=this.JSON,c=this.Cookie,a="InvodoJSStorage",m={},h,f=(function(){var s="test",q="invodo_test",o=false;try{localStorage.setItem(s,q);o=localStorage.getItem(s)===q;localStorage.removeItem(s)}catch(r){}return o}()),l=function(){},g=function(){},i=c.enabled();if(f){h=localStorage.getItem(a);if(h){m=n.parse(h)}l=function(){if(d.isEmptyObject(m)){j.clear()}else{localStorage.setItem(a,n.stringify(m))}};g=function(){m={};localStorage.removeItem(a)}}else{if(i){h=c.get(a);if(h){try{m=n.parse(h)}catch(k){m={}}}l=function(){if(d.isEmptyObject(m)){j.clear()}else{c.set(a,n.stringify(m))}};g=function(){m={};c.del(a)}}}d.mix(j,{save:l,clear:g,enabled:function(){return f||i},get:function(o){var e=m[o];if(!f&&typeof e==="string"){e=decodeURIComponent(e)}return e},set:function(e,o){if(!f&&typeof o==="string"){o=encodeURIComponent(o)}m[e]=o},del:function(e){if(e in m){delete m[e]}},contains:function(e){return e in m}})}).call(Invodo,this);(function(c,f){var b=this.Math={},e=this.Lang,g=c.Math,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split("");b.convertSecondsToMilliseconds=function(h){return h*1000};b.getRandomInt=function(i,h){if(arguments.length===1){h=i;i=0}return g.floor(g.random()*(h-i+1))+i};b.isInt=function d(h){return !isNaN(h)&&(function(i){return(i|0)===i})(parseFloat(h))};b.isNumber=function(h){return typeof h==="number"&&isFinite(h)};b.uid=function(){var l=0,h=22,j=a.length-1,k=[];for(;l<h;l++){k[l]=a[b.getRandomInt(j)]}return k.join("")}}).call(Invodo,this);(function(a,g){var c=this.Lang,b=this.Cookie,q=this.Math,d=1800000,k=new Date().getTime(),m="",h="",l="invodoVisitor",f="invodoSession",e=q.uid(),o=(function(){var r=new Date();r.setFullYear(r.getFullYear()+10);return r}()),i=a.location.hostname.split("."),j=i.length===1?false:"."+i.slice(i.length-2).join(".");function n(){var r=q.uid();return r}this.Visitor={getVisitorId:function(){var r=b.get(l);if(r){m=r.substring(0,22)}if(!m){m=q.uid();b.set(l,m,{expires:o,domain:j})}return m},resetVisitorId:function(){b.del(l,{domain:j});return Invodo.Visitor.getVisitorId()},getSessionId:function(){var r=0;var s=new Date().getTime();r=s-k;h=h||b.get(f);if(!h||(r>d)){h=n();b.set(f,h)}k=s;return h},getPageViewId:function(){return e}}}).call(Invodo,this);(function(d,i){var g=i.Data={},e=i.Lang,a={},h="InvodoJSData",b=1,c="InvodoJSDataWindow",f=function(k){var j=k.nodeType;return e.isWindow(k)||e.isElement(k)&&(j!==3)&&(j!==8)};g.get=function(l,k){var j=e.isWindow(l),m;if(!f(l)){return}if(j){m=c}else{m=l[h]}if(m===undefined||!(m in a)){return}return k?a[m][k]:a[m]};g.set=function(l,k,m){var j=e.isWindow(l),n;if(!f(l)){return}if(j){n=c}else{n=l[h];if(n===undefined){n=l[h]=b++}}if(!a[n]){a[n]={}}a[n][k]=m};g.remove=function(l,k){var j=e.isWindow(l),n;if(!f(l)){return}if(j){n=c}else{n=l[h]}if(n===undefined||!(n in a)){return}if(k){a[n][k]=null;delete a[n][k]}else{a[n]=null;delete a[n];if(!j){try{l[h]=null;delete l[h]}catch(m){l.removeAttribute(h)}}}}})(this,Invodo);(function(l,f,d){var o={},v=f.Lang,t=f.Data,b=v.type,u=l.document,c=u.documentElement,g=u.body,j="addEventListener",k="removeEventListener",q="attachEvent",a="detachEvent",r="onunload",n=(j in u)&&(k in u),i=function(x){var w=x.nodeType;return v.isWindow(x)||v.isElement(x)&&(w!==3)&&(w!==8)},e=function(){return false},m=function(){return true},s=function(x){var w;if(x&&x.stopPropagation){return x}w=x;x=v.mix({},w);if(!x.target){x.target=x.srcElement||u}x.relatedTarget=x.fromElement===x.target?x.toElement:x.fromElement;x.preventDefault=function(){w.returnValue=false;x.isDefaultPrevented=m};x.isDefaultPrevented=e;x.stopPropagation=function(){w.cancelBubble=true;x.isPropagationStopped=m};x.isPropagationStopped=e;x.stopImmediatePropagation=function(){x.isImmediatePropagationStopped=m;x.stopPropagation()};x.isImmediatePropagationStopped=e;if(x.clientX){x.pageX=x.clientX+(u&&u.scrollLeft||g&&g.scrollLeft||0)-(u&&u.clientLeft||g&&g.clientLeft||0);x.pageY=x.clientY+(u&&u.scrollTop||g&&g.scrollTop||0)-(u&&u.clientTop||g&&g.clientTop||0)}x.which=x.charCode||x.keyCode;if(!n&&x.button!==d){x.button={1:0,4:1,2:2}[x.button]}return x},h=function(y,x,w){if(!w||!w[x]){return}if(n){y[k](x,w[x].dispatcher,false)}else{y[a]("on"+x,w[x].dispatcher)}w[x]=null;delete w[x]};o.on=function(B,z,y){var x,A,w;if(!i(B)){return}x=t.get(B,"events")||{};if(x[z]){A=x[z];w=A.queue}else{A=x[z]={};w=A.queue=[]}if(!(A.dispatcher)){A.dispatcher=function(F){var D=0,C=(w&&w.length)?w.length:0,E;F=s(F||l.event);E=F.target;for(;D<C;D++){if(w[D]&&w[D].call){w[D].call(E,F)}}E=null}}w.push(y);if(A.queue.length===1){if(n){B[j](z,A.dispatcher,false)}else{B[q]("on"+z,A.dispatcher)}}t.set(B,"events",x);B=null};o.off=function(B,z,y){var w,A,x;if(!i(B)){return}w=t.get(B,"events");if(!w){return}A=w[z];if(y&&A){v.forEach(A.queue.slice(),function(C,D){if(D===y){A.queue.splice(C,1);if(!A.queue.length){h(B,z,w)}return false}})}else{if(z&&A){h(B,z,w)}else{v.forEach(w,function(D,C){h(B,D,w)})}}if(v.isEmptyObject(w)){t.remove(B,"events")}else{t.set(B,"events",w)}B=null};o.fire=function(z,y){var w,x;if(!i(z)){return}if(v.type(y)==="string"){y={type:y,target:z}}x=y.type;w=t.get(z,"events");if(!w||!(w[x])){return}y=s(y);w[x].dispatcher(y);z=null};o.once=function(z,y,x){var w=function(){o.off(this,y,w);x.apply(this,arguments)};o.on(z,y,w);z=null};o.ready=(function(){var F=[],y=false,C=false,x="DOMContentLoaded",z="readyState",w="onreadystatechange",E,D=function(){var G=F.length;if(y){return}y=true;while(G--){(F.shift()).call(u)}};if(n){o.once(u,x,D)}else{E=o.on(u,w,function(){if(u[z]==="complete"){D();o.off(this,w,E)}});try{toplevel=l.frameElement===null;if(c.doScroll&&toplevel){(function A(){try{c.doScroll("left")}catch(G){setTimeout(A,25);return}D()})()}}catch(B){}}o.once(l,"load",function(){D()});if(u[z]==="complete"){D()}return function(G){if(!(v.isFunction(G))){return}if(y){G.call(u)}else{F.push(G)}}}());f.Event=o})(this,Invodo);(function(r,m,j){var D=m.Lang,A=m.Data,v=m.Event,x=m.Env,h=D.type,C=r.document,i=C.documentElement,B="classList",g="className",y="getElementsByClassName",o=Array.prototype.slice,n=D.hasOwn,q=B in i,u=y in i,w=(function(){var E=C.createElement("div"),e="styleFloat" in E.style;E=null;return e})(),b=(function(){var E=C.createElement("div"),e=!("opacity" in E.style);E=null;return e})(),l=function(e){var E=e.firstChild;while(E){t(E);e.removeChild(E);E=e.firstChild}return e},t=function(e){v.off(e);A.remove(e)},k=function(e){return o.call(e)};try{k(i.childNodes)}catch(z){k=function(E){var F=[],G=0,e=E.length;for(;G<e;G++){F[G]=E[G]}return F}}var d={R_TAG:/^(?:[a-z]+|\*)$/,R_CLASS:/^\./,R_ID:/^#/,find:function(e,F){var E=[],G;if(F===j){F=C}if(d.R_ID.test(e)){G=d.byId(e.slice(1),F);if(G){E.push(G)}}else{if(d.R_CLASS.test(e)){E=d.byClass(e.slice(1),F)}else{if(d.R_TAG.test(e)){E=d.byTagName(e,F)}}}return E},byId:function(F,e){var E=null;if(!D.isElement(e)){E=C.getElementById(F)}else{D.forEach(d.byTagName("*",e),function(G,H){if(H.id===F){E=H;return false}})}return E},byTagName:function(G,F){if(!F){F=C}var E=[],e=F.getElementsByTagName(G);if(e.length){E=k(e)}return E},byClass:u?function(F,E){if(!E){E=C}var e=E[y](F);return k(e)}:function(I,H){if(!H){H=C}var F=[],G=0,E=H.getElementsByTagName("*"),e=E.length,J;for(;G<e;G++){J=E[G];if(c.has(J,I)){F.push(J)}}return F}};var c={has:q?function(E,e){return E[B].contains(e)}:function(E,e){return(" "+E[g]+" ").indexOf(" "+e+" ")!==-1},add:q?function(E,e){E[B].add(e);return E}:function(F,e){var E;if(c.has(F,e)){return}E=F[g];if(!E||!E.length){F[g]=e}else{F[g]=E+" "+e}return F},remove:q?function(E,e){E[B].remove(e);return E}:function(F,e){var E;if(c.has(F,e)){E=F[g];F[g]=E.replace(e,"")}return F},toggle:q?function(E,e){E[B].toggle(e);return E}:function(E,e){if(c.has(E,e)){c.remove(E,e)}else{c.add(E,e)}return E}};var s={get:r.getComputedStyle?function(e,E){E=s.dasherize(E);return r.getComputedStyle(e,null).getPropertyValue(E)}:function(e,E){E=s.camelize(E);return e.currentStyle[E]},set:function(E,G,F){var e=E.style,H;if(h(G)==="object"){D.forEach(G,function(I,J){s.set(E,I,J)})}else{switch(G){case"float":G=w?"styleFloat":"cssFloat";break;case"opacity":if(b){G="filter";F="alpha(opacity="+(parseFloat(F)*100)+")"}break}e[s.camelize(G)]=F}return E},camelize:function(e){return(e+"").replace(/-([a-z])/ig,function(E,F){return F.toUpperCase()})},dasherize:function(e){return(e+"").replace(/([A-Z])/g,"-$1").toLowerCase()}};var f={get:function(F){var e="",E=F.nodeType;if(E===1||E===9||E===11){if("textContent" in F){e=F.textContent}else{if("innerText" in F){e=F.innerText.replace(/\r/g,"")}else{D.forEach(k(F.childNodes),function(G,H){e+=f.get(H)})}}}else{if(E===3||E===4){e=F.nodeValue}}return e},set:function(E,e){l(E).appendChild(C.createTextNode(e));return E}};var a=function(e,E){if(e&&e instanceof a){return e}if(!(this instanceof a)){return new a(e,E)}this.init(e,E)};D.mix(a.prototype,{init:function(e,F){var E=[];if(D.isElement(e)||D.isWindow(e)){E.push(e)}if(D.isArray(e)){E=D.filter(e,function(G){return D.isElement(G)})}if(h(e)==="string"){if(F instanceof a){F.each(function(H,I){var G=d.find(e,I);if(G.length){E=E.concat(G)}})}else{if(/^</.test(e)){E=k(a.createFragment(e).childNodes)}else{E=d.find(e,F)}}}this.elements=E},each:function(e){D.forEach(this.elements,e);return this},addClass:function(e){return this.each(function(E,F){c.add(F,e)})},removeClass:function(e){return this.each(function(E,F){c.remove(F,e)})},toggleClass:function(e){return this.each(function(E,F){c.toggle(F,e)})},hasClass:function(E){var e=false;this.each(function(F,G){if(c.has(G,E)){e=true;return false}});return e},html:function(e){var E;if(e===j){E=this.elements[0];return E?E.innerHTML:""}return this.empty().append(e)},text:function(e){var E;if(e===j){E=this.elements[0];return E?f.get(E):""}return this.each(function(F,G){f.set(G,e)})},css:function(E,e){var F;if(e||h(E)==="object"){return this.each(function(G,H){s.set(H,E,e)})}F=this.elements[0];return F?s.get(F,E):""},get:function(e){if(h(e)==="number"){return this.elements[e]}return this.elements.slice()},eq:function(e){if(h(e)==="number"&&this.elements[e]){return new a(this.elements[e])}else{return this}},find:function(e){return new a(e,this)},isDisplayed:function(e){return(this.get(e).clientHeight>0)?true:false},append:function(e){return this.each(function(E,F){if(D.isElement(e)){F.appendChild(e)}else{if(h(e)==="string"){F.appendChild(a.createFragment(e))}else{if(e instanceof a){e.each(function(G,H){F.appendChild(H)})}}}})},appendTo:function(e){new a(e).append(this);return this},prepend:function(e){return this.each(function(E,F){if(D.isElement(e)){F.insertBefore(e,F.firstChild)}else{if(h(e)==="string"){F.insertBefore(a.createFragment(e),F.firstChild)}else{if(e instanceof a){e.each(function(G,H){F.insertBefore(H,F.firstChild)})}}}})},prependTo:function(e){new a(e).prepend(this);return this},filter:function(E){var e=D.filter(this.elements,function(G,F){return E.call(G,F,G)});return new a(e)},add:function(e){if(e instanceof a){e=e.get()}return new a(this.elements.concat(e))},parent:function(){var e=[];this.each(function(E,F){if(F.parentNode){e.push(F.parentNode)}});return new a(e)},empty:function(){return this.each(function(e,E){l(E)})},remove:function(){return this.each(function(){new a(this).find("*").add(this).each(function(){t(this)});if(this.parentNode){try{this.parentNode.removeChild(this)}catch(E){}}})},hide:function(){return this.each(function(E,F){var e=s.get(F,"display");if(e==="none"){return}A.set(F,"olddisplay",e);s.set(F,"display","none")})},show:function(){return this.each(function(e,E){var F=s.get(E,"display");if(F!=="none"){return}s.set(E,"display",A.get(E,"olddisplay")||"")})},visibleInViewPort:function(){var F=this.get(0);if(!F){return -1}var G={overlappingBy:function(P,N){var R=P.left,I=P.top,Q=P.left+P.width,H=P.top+P.height,L=N.left,O=N.top,K=N.left+N.width,M=N.top+N.height;x_overlap=Math.max(0,Math.min(Q,K)-Math.max(R,L));y_overlap=Math.max(0,Math.min(H,M)-Math.max(I,O));var J=(x_overlap*y_overlap)/(P.height*P.width)||0;return parseFloat(J.toFixed(2))}};var e=F.getBoundingClientRect();var E={bottom:Invodo.Env.screen.viewportHeight(),height:Invodo.Env.screen.viewportHeight(),left:0,right:Invodo.Env.screen.viewportWidth(),top:0,width:Invodo.Env.screen.viewportWidth()};return G.overlappingBy(e,E)},toggle:function(){return this.each(function(E,F){var e=new a(F);if(s.get(F,"display")==="none"){e.show()}else{e.hide()}})},children:function(){var e=[];this.each(function(E,F){e=e.concat(D.filter(k(F.childNodes),function(G){return G.nodeType===1}))});return new a(e)},length:function(){return this.elements.length},data:function(e,E){if(arguments.length===1){return A.get(this.elements[0],e)}return this.each(function(F,G){A.set(G,e,E)})},on:function(E,e){return this.each(function(F,G){v.on(G,E,e)})},off:function(E,e){return this.each(function(F,G){v.off(G,E,e)})},fire:function(e){return this.each(function(E,F){v.fire(F,e)})},once:function(E,e){return this.each(function(F,G){v.once(G,E,e)})}});D.forEach({width:"Width",height:"Height"},function(E,e){a.prototype[E]=function(){var G=this.elements[0],F=0;if(G){F=Math.max.apply(Math,[G["client"+e],G["offset"+e]])}return F}});D.mix(a,{createElement:function(e,E){var F=C.createElement(e),H,G;if(E){for(H in E){if(n(E,H)===false){continue}G=E[H];switch(H){case"text":F.appendChild(C.createTextNode(G));break;case"css":s.set(F,G);break;case"innerHTML":F.innerHTML=G;break;case"class":F.className=G;break;case"style":F.style.cssText+=";"+G;break;default:F.setAttribute(H,G)}}}return F},createFragment:function(E){var F=C.createElement("div"),e=C.createDocumentFragment();F.innerHTML=E;D.forEach(k(F.childNodes),function(G,H){e.appendChild(H.cloneNode(true))});F=null;return e},addCSS:function(G,F){var E=[],e;if(F===j){F="screen"}e=a.createElement("style",{type:"text/css",media:F});C.getElementsByTagName("head")[0].appendChild(e);if(x.browser.engine==="msie"&&C.styleSheets){e=C.styleSheets[C.styleSheets.length-1]}if(e.addRule){D.forEach(G,function(H,I){D.forEach(I,function(K,J){e.addRule(H,K+":"+J,0)})})}else{D.forEach(G,function(H,J){var I=[];D.forEach(J,function(L,K){I.push(L+":"+K)});E.push(H+"{"+I.join(";")+"}")});e.appendChild(C.createTextNode(E.join("")))}}});m.Dom=a})(this,Invodo);(function(n,j,g){var t=j.Lang,o=j.Dom,s=n.document,m=s.documentElement,a="xmlns:og",e="//ogp.me/ns#",b="application/x-shockwave-flash",d="meta",k="link",c=t.normalizeUrl(j.getPodDomain()+"/media/"),i="rtmp://aoaef.invodo.com/",l=o.createElement,h=[],f,r="";function q(v,u){return'<meta itemprop="'+v+'" content="'+u+'" />'}j.SEO={config:function(u){var y=Invodo.getAffiliateConfig();var w=u.pods[0].podId;var v=Invodo.Pod.getDescription(w);if(t.indexOf(h,w)>-1){return}var x=t.map(u.pods[0].frames,function(z){var A=z.previewUrl.replace(/.*?:/g,"");return{videoUrl:t.normalizeUrl(j.getPodDomain()+"/4.0/fl/inplayer.swf")+"?RTMP="+z.encodings[0].rtmp.app+"&filename="+z.encodings[0].rtmp.stream+"&poster="+A,duration:z.duration,width:z.encodings[0].width,height:z.encodings[0].height,thumbnailUrl:A}});if(y&&y.og=="true"){j.SEO.addMetaTags(x,v)}h.push(w)},addMetaTags:function(v,u){var w=s.createDocumentFragment();if(!f){f=s.getElementsByTagName("head")[0]}if(!m.getAttribute(a)){m.setAttribute(a,e)}if(u){w.appendChild(l(d,{property:"og:description",content:u}))}t.forEach(v,function(x,y){w.appendChild(l(k,{rel:"image_src",href:"http:"+y.thumbnailUrl}));w.appendChild(l(k,{rel:"video_src",href:"http:"+y.videoUrl}));w.appendChild(l(d,{name:"medium",content:"video"}));w.appendChild(l(d,{name:"video_height",content:y.height}));w.appendChild(l(d,{name:"video_width",content:y.width}));w.appendChild(l(d,{name:"video_type",content:b}));w.appendChild(l(d,{property:"og:video",content:"http:"+y.videoUrl}));w.appendChild(l(d,{property:"og:video:secure_url",content:"https:"+y.videoUrl}));w.appendChild(l(d,{property:"og:video:type",content:b}));w.appendChild(l(d,{property:"og:video:height",content:y.height}));w.appendChild(l(d,{property:"og:video:width",content:y.width}));if("duration" in y){w.appendChild(l(d,{property:"og:video:duration",content:Math.max(parseInt(y.duration),1)}))}if(y.title){w.appendChild(l(d,{property:"og:video:title",content:y.title}))}});f.appendChild(w)},getSeoStructDataTags:function(){return r},setSeoStructMetaTags:function(z){var v=Invodo.Pod.get(z);var u="";if(v){var y=v.config;if(y&&"frames" in y&&"length" in y.frames&&y.frames.length>0){var w=y.frames[0];var x=y.description;try{u+=q("name",y.title);u+=q("description",x);if(w.seoKeywords){u+=q("keywords",w.seoKeywords)}if(w.transcript){u+=q("transcript",w.transcript)}u+=q("bitrate",w.encodings[0].bitrate);u+=q("contentURL",w.encodings[0].http);u+=q("duration",w.duration);u+=q("height",w.encodings[0].height);u+=q("width",w.encodings[0].width);u+=q("thumbnail",w.thumbnailUrl)}catch(A){console.log(A)}r=u}}}}})(this,Invodo);(function(a,d){var e=this.File={},b=this.Lang,f=this.Dom,j=a.document,c="onreadystatechange",h="onload",g="readyState",i;e.CSS=function(k,m){var l;if(m===d){m="screen"}if(!i){i=j.getElementsByTagName("head")[0]}l=j.createElement("link");l.rel="stylesheet";l.type="text/css";l.media=m;l.href=k;i.appendChild(l);return l};e.JS=function(l,m){l=b.normalizeUrl(l);var k;if(!i){i=j.getElementsByTagName("head")[0]}k=j.createElement("script");k.type="text/javascript";k.async=true;k[h]=k[c]=function(o){var n=k[g];o=o||a.event;if(o.type==="load"||n==="loaded"||n==="complete"){k[c]=k[h]=null;if(b.isFunction(m)){m()}}};i.appendChild(k);k.src=l;return k};e.Image=function(l){var k=new Image();k.src=l;return k};e.getFilenameFromUrl=function(k){return b.type(k)==="string"?k.split("/").pop().split(".").shift():""};e.getQueryStringParams=function(l){var m;var r;var q={};var o=l.substring(1).split("&");for(m=0;m<o.length;m++){r=o[m].split("=");var k=e.sanitizeUserInput(r[0]);var n=e.sanitizeUserInput(r[1]);q[k]=n}return q};e.sanitizeUserInput=function(k){return escape(k)}}).call(Invodo,this);(function(c,a){var e=a.Lang,d=Array.prototype.slice;var b=function(g){var f={};g.on=function(i,h){if(!f[i]){f[i]=[]}f[i].push(h);return g};g.registerEventListener=function(i,h){return g.on(i,h)};g.off=function(k,j){var h=f[k],i;if(!h||!(h.length)){return}if(j===undefined){f[k]=[]}else{i=e.indexOf(h,j);if(i>-1){h.splice(i,1)}}return g};g.unregisterEventListener=function(i,h){return g.off(i,h)};g.once=function(j,i){var h=function(){this.off(j,h);return i.apply(this,arguments)};return g.on(j,h)};g.fire=function(j){var h=f[j],i=d.call(arguments,1);if(!h||!(h.length)){return}e.forEach(h,function(k,l){return l.apply(g,i)});return g};g.listeners=function(h){return(f[h]||[]).slice()}};a.EventDispatcher=b})(this,Invodo);Invodo.Conversion=new function(){this.config=function(c,d,f,g){var e=document.getElementById(f);e.addEventListener(d,b);function b(i){var h;if(typeof g=="function"){h=g()}else{h=g}this.post(c,h)}};function a(b,c){Invodo.Module.get("logger").log("Invodo.Conversion",b,c)}this.send=function(c,e){var d=[],b,g,f;if(c==="cartAdd"||c==="cartRemove"||c==="itemPurchase"){b=Invodo.Experiment.getExperimentData();for(g in b){f=b[g];if(f.experiment){d.push(f.experiment+"/"+f.branch)}}if(d.length){e.ex=d.join(",")}}if("bi" in e){e.bi=Invodo.Crypto.MD5(e.bi)}switch(c){case"arcadeClick":case"cartAdd":case"cartRemove":case"itemPurchase":case"demoStart":case"demoView":case"demoStep":case"pageInfo":a(c,e);break;default:if(c.match(/^custom\d{2}$/)){a(c,e)}else{Invodo.Console.warn("Unknown conversion type: "+c)}}}}();(function(){this.Url={removeProtocol:function(a){return a.replace(/^https?:/,"")}}}).call(Invodo,this);(function(){this.PublishSubscribe={signals:{},subscribe:function(b,a){if(!this.signals[b]){this.signals[b]=[]}this.signals[b].push(a)},publish:function(c,d){if(this.signals[c]){var b=this.signals[c];for(var a=0;a<b.length;a++){b[a](d)}}},remove:function(e,c){if(this.signals[e]){var b=[];var d=this.signals[e];for(var a=0;a<d.length;a++){var g=c.toString();var f=d[a].toString();if(f!==g){b.push(d[a])}}this.signals[e]=b}}}}).call(Invodo,this);(function(c,j){var d=j.Lang,h=j.Env,g=j.Dom,e=h.flash,a="InvodoSWF_",b=0,f=j.getAffiliateConfig();var i=function(k){var l=d.mix({},i.defaults,k);if(!l.attrs.id){l.attrs.id=a+(b++)}l.url+="?r="+(+new Date());if(e.ActiveX){l.attrs.classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";l.attrs.codebase="//download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,1,0,0";l.params.movie=l.url}else{l.attrs.type="application/x-shockwave-flash";l.attrs.data=l.url}l.attrs.hasVersionFail="function(){alert('flash version fail')}";if(d.isEmptyObject(l.flashvars)===false){l.params.flashvars=(function(){var m=[];d.forEach(l.flashvars,function(n,o){m.push(n+"="+o)});return m.join("&")})()}l.attrs.width=l.width;l.attrs.height=l.height;l.params.bgcolor=f.bgcolor||l.params.bgcolor;this.settings=l};d.mix(i.prototype,{embed:function(o){var m=this.settings,k=d.isElement(o)?o:document.getElementById(o),q=[],l=[],n;if(!h.flash.supported||!m.url||!k){return}if(i.hasVersion(m.version)===false){return}if(e.ActiveX){d.forEach(m.attrs,function(r,s){l.push(r+"='"+s+"'")});d.forEach(m.params,function(r,s){q.push("<param name='"+r+"' value='"+s+"'/>")});n="<object "+(l.length?(" "+l.join(" ")):"")+">"+q.join("")+"</object>";k.innerHTML+=n}else{n=g.createElement("object",m.attrs);d.forEach(m.params,function(r,s){n.appendChild(g.createElement("param",{name:r,value:s}))});k.appendChild(n)}return k.lastChild},dispose:function(){var k=new g("#"+this.settings.attrs.id);if(!k.length()){return}if(!e.ActiveX){k.remove()}else{k.hide();k=k.get(0);(function l(){if(k.readyState!==4){setTimeout(l,25);return}d.forEach(k,function(n,o){if(d.hasOwn(k,n)&&d.type(o)==="function"){k[n]=null}});try{k.parentNode.removeChild(k)}catch(m){}})()}return this}});d.mix(i,{defaults:{url:null,width:"100%",height:"100%",version:"10",flashvars:{},params:{allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all",wmode:"opaque",bgcolor:"#000000"},attrs:{"class":"invodo-swf"}},hasVersion:function(m){var q=d.type(m);var l=h.flash;var o=l.supported?l.version:false;if(!o){return false}if(q==="number"||q==="string"){m=[m,0,0]}if(q==="array"){while(m.length<3){m.push(0)}}d.forEach(m,function(r,s){m[r]=parseInt(s,10)||0});var n=parseFloat(o[0]+"."+o[1]);var k=parseFloat(m[0]+"."+m[1]);if(n>=k){return(n===k)?(o[2]>=m[2]):true}else{return false}}});j.SWF=i})(this,Invodo);(function(i,e){var v=e.Lang,n=Invodo.getAffiliateConfig(),k=n.backcolor,u=i.document,l=e.Dom,m=e.Env,s=e.EventDispatcher,o=e.File,j=n.frontcolor,t=false,g=n.secondarycolor,d={".invodo-overlay":{position:"fixed","z-index":"5000",top:"0",left:"0",width:"100%",height:"100%"},".invodo-overlay-mask":{height:"100%","background-color":"#fff",opacity:".75",filter:"alpha(opacity=75)"},".invodo-overlay-outerwrap":{position:"absolute",top:"50%",left:"50%","border-radius":"8px","-moz-border-radius":"8px","-webkit-border-radius":"8px","box-shadow":"0 0 9px #000","-moz-box-shadow":"0 0 9px #000","-webkit-box-shadow":"0 0 9px #000"},".invodo-overlay-outerwrap-quirks-mode":{filter:"progid:DXImageTransform.Microsoft.Shadow(color=#CCCCCC,direction=125,strength=3)",position:"absolute",top:((m.screen.viewportHeight()/2)+"px"),left:((m.screen.viewportWidth()/2)+"px")},".invodo-overlay-header":{height:"20px",background:"#000 url(//e.invodo.com/4.0/i/viewer_header_bg.png) repeat-x 0 0","border-color":"#000","-moz-border-radius":"8px 8px 0 0","-webkit-border-radius":"8px 8px 0 0","border-radius":"8px 8px 0 0"},".invodo-overlay-brand":{position:"relative",top:"0",left:"0",height:"100%","background-color":"transparent","background-repeat":"no-repeat","background-position":"8px 0"},".invodo-overlay-content":{overflow:"hidden","background-color":"#000"},".invodo-overlay-close-btn":{position:"absolute",right:"8px",top:"0","font-size":"16px","font-weight":"bold",cursor:"pointer",color:"#"+j,"text-shadow":"#444 1px 1px 2px","line-height":"20px"},".invodo-overlay-close-btn:hover":{color:"#"+g},".invodo-overlay-footer":{height:"20px",background:"#000 url(//e.invodo.com/4.0/i/viewer_footer_bg.png) repeat-x 0 50%","border-color":"#000","-moz-border-radius":"0 0 8px 8px","-webkit-border-radius":"0 0 8px 8px","border-radius":"0 0 8px 8px"}},b={CLOSED:"closed",OPEN:"open"},f={closeOnEscape:true,closeOnClick:true,affiliateColor:null,affiliateLogo:null},a=function(){if(h===false){new l(u).on("keydown",r);h=true}},q=function(){if(h===true){new l(u).off("keydown",r);h=false}},r=function(w){if(w.keyCode===27){c.close()}},h=false;var c={state:b.CLOSED,els:{},settings:f,options:function(w){this.settings=Invodo.Lang.mix({},f,this.settings,w);return this},open:function(B,w,A){var x=this,y=this.els,z=this.settings;if(this.state===b.OPEN){return this}this._render();y.closeButton.on("click",function(C){C.preventDefault();x.close()});if(z.closeOnClick){y.mask.once("click",function(C){C.preventDefault();x.close()})}if(z.closeOnEscape){a()}if(z.affiliateColor){y.header.add(y.footer).add(y.content).css("background-color","#"+z.affiliateColor)}if(z.affiliateLogo){y.header.find(".invodo-overlay-brand").css("background-image","url("+z.affiliateLogo+")")}if(v.isElement(A)){y.content.html(A)}else{if(v.isFunction(A)){A.call(y.content,y.content)}}this.resize(B,w);y.root.show().addClass("invodo-overlay-active");this.fire("open");this.state=b.OPEN;y.closeButton.elements[0].innerHTML="&times;";return this},close:function(){var w=this.els;if(this.state===b.CLOSED){return this}this.fire("beforeclose");w.root.hide().removeClass("invodo-overlay-active");w.content.empty();w.closeButton.off("click");if(this.settings.closeOnClick){w.mask.off("click")}if(this.settings.closeOnEscape){q()}this.fire("close");this.state=b.CLOSED;return this},getContainer:function(){return this.els.content()},resize:function(x,z){var A=30,B=20,H=parseInt(z),y=parseInt(x),C=this.els,w={width:m.screen.viewportWidth(),height:m.screen.viewportHeight(),docHeight:m.screen.documentHeight()},D=B+A,E=0,G=w.height-40-D,F=w.width-40;if(y>F){E=F/y;y=y*E;H=H*E}if(H>G){E=G/H;H=H*E;y=y*E}C.mask.css("height",w.docHeight+"px");C.content.css({height:H+"px",width:y+"px"});C.outerWrap.css({width:y+"px","margin-top":"-"+((H+D)/2)+"px","margin-left":"-"+(y/2)+"px"});this.fire("resize",y,H);return this},_render:function(){var w=this,y=this.els,x=null,A=false,z=this.settings;if(m.screen.mode=="standard"){x=new l(this.template)}else{A=true;x=new l(this.templateQuirksMode)}if(t){return}y.root=x;y.mask=x.find(".invodo-overlay-mask");if(A){y.outerWrap=x.find(".invodo-overlay-outerwrap-quirks-mode")}else{y.outerWrap=x.find(".invodo-overlay-outerwrap")}y.content=x.find(".invodo-overlay-content");y.header=x.find(".invodo-overlay-header");y.closeButton=x.find(".invodo-overlay-close-btn");y.footer=x.find(".invodo-overlay-footer");l.addCSS(d);x.hide().appendTo("body");t=true},destroy:function(){this.els.root.remove();this.fire("destroy")},template:["<div class='invodo-overlay'>","<div class='invodo-overlay-mask'></div>","<div class='invodo-overlay-outerwrap'>","<div class='invodo-overlay-header'>","<div class='invodo-overlay-brand'></div>","<div class='invodo-overlay-close-btn' title='Close'></div>","</div>","<div id='invodo-overlay-content-id' class='invodo-overlay-content'></div>","<div class='invodo-overlay-footer'></div>","</div>","</div>"].join(""),templateQuirksMode:["<div class='invodo-overlay'>","<div class='invodo-overlay-mask'></div>","<div class='invodo-overlay-outerwrap-quirks-mode'>","<div class='invodo-overlay-header'>","<div class='invodo-overlay-brand'></div>","<div class='invodo-overlay-close-btn' title='Close'></div>","</div>","<div id='invodo-overlay-content-id' class='invodo-overlay-content'></div>","<div class='invodo-overlay-footer'></div>","</div>","</div>"].join("")};s(c);e.Overlay=c})(this,Invodo);(function(){var b=this.Lang,a=[];this.Module={add:function(d,e){var c=null;if(!d||!(b.isFunction(d))){Invodo.Console.log("Missing required argument: module");return c}if(!e){Invodo.Console.log("Missing required argument: namespace");return c}c=new d(e);a.push(c);return c},get:function(d){var c=null;b.forEach(a,function(f,e){if(e.getId()===d){c=e;return false}});return c},has:function(d){var c=false;b.forEach(a,function(f,e){if(e.getId()===d){c=true;return false}});return c},remove:function(d){var c=false;b.forEach(a,function(f,e){if(e.getId()===d){a.splice(f,1);c=true;return false}});return c}}}).call(Invodo);(function(v,n){var b=n.getAffiliate();var z="invodoExperiment";var c=(function(){var C=new Date();C.setFullYear(C.getFullYear()+10);return C})();m();function m(){var C=o();if(!n.Lang.isEmptyObject(C)){n.Lang.forEach(C,function(D,E){if(D.split("/").length!==2){C={};n.Cookie.del(z);n.Visitor.resetVisitorId();return false}})}}function j(C,D){var F=D.choice.distributions;var E=n.Lang.filter(F,function(G){return G.value===C});return E[0]}function A(F,E){var D={};var C=false;F=e(F);if(E&&"dist" in E){if("random" in E.dist){D=E.dist.random[F]}if("choice" in E.dist){D=E.dist.choice[F]}C={experiment:D.dist.experimentDurableId,branch:D.dist.constant,viewer:(D.dist.constant!=="novideo")}}return C}function t(){var C=false;var D=Invodo.File.getQueryStringParams(window.location.search);if("invodoBranch" in D){C=D.invodoBranch}return C}function h(C){return{branch:C.constant}}function i(E){var D=E.dist.random;var G=[];for(var F=0;F<D.length;F++){var C=D[F];G.push({weight:C.weight,choice:C.dist.constant})}return G}function y(C){return C?C.dist.experimentDurableId:"none"}function x(C,D,E){return{experiment:C,branch:D,viewer:E}}function f(D){var H;if(!D.choice){H="constant"}else{H="ab";var I=D.choice.distributions;for(var F=0;F<I.length;F++){var C=I[F];var G;for(var E=0;E<C.dist.random.length;E++){G=C.dist.random[E].dist.constant;if(G==="novideo"){H="video/novideo"}}}}return H}function l(C){return{experiment:C,branch:"novideo",viewer:false}}function q(G){var F=u(G);var E=Invodo.Math.getRandomInt(F);var C=G.length;for(var D=0;D<C;D++){if(E<G[D].weight){return G[D]}else{E-=G[D].weight}}}function s(C,D){return w(C)[D]}function w(C){return C.choice.distributions[0].dist.random}function a(C){return n.getAffiliate()+"/"+C}function o(){var C=n.Cookie.get(z);if(C){C=n.JSON.parse(C)}else{C=false}return C}function k(C,E){var D=C.choice.distributions[0].dist.random[0].dist.constant;return{experiment:E,branch:D,viewer:true}}function B(){var C=false}function r(){var E=o();var C;if(E){for(var D in E){switch(E[D].viewer){case true:C=true;break;case false:C=false;break;default:C=undefined}}}else{C=undefined}return C}function u(F){var C=F.length;var E=0;for(var D=0;D<C;D++){E+=parseInt(F[D].weight,10)}return E}function e(D){var C;switch(D){case"a":case"A":C=0;break;case"b":case"B":C=1;break;default:C=0}return C}function g(E,D){var C;if(E){switch(E){case"a":C=A("a",D);break;case"b":C=A("b",D);break;default:break}}return C}function d(C,J){var D=J;var I;var H;var G=t();var F;var E=q(i(C)).choice;result=x(J,E,(E!=="novideo"));return result}n.Experiment={getExperimentData:function(C){var D=o();if(!C){return D}return D[n.getAffiliate()+"/"+C]||{experiment:null,branch:C,viewer:true}},run:function(M){var H=M.cpd;if(!H.choice&&H.constant){return H.constant}var O=f(H);var G=r();var D=j(b,H);var J;var S;var L=y(D);var N;var I=H.choice["default"].constant;var F=o();var P=n.getAffiliate()+"/"+I;var R=F[P];var Q;if(D){var C=t();if(C){N=A(C,D)}else{switch(G){case undefined:switch(O){case"constant":N=h(H);break;case"ab":N=d(D,L);break;case"video/novideo":N=d(D,L);break;default:break}break;case true:switch(O){case"constant":N=h(H);break;case"ab":if(R){F=o();for(var E in F){if(E===P){N=F[P]}}}else{N=d(D,L)}break;case"video/novideo":N=k(H,L);break;default:Invodo.Console.log("Warning: Invodo.Experiment.run found no match");break}break;case false:switch(O){case"constant":N=h(H);break;case"ab":N=l(L);break;case"video/novideo":N=l(L);break;default:Invodo.Console.log("Warning: Invodo.Experiment.run found no match");break}break;default:Invodo.Console.log("Warning: Invodo.Experiment.run found no match");break}}var K={};K[a(I)]=N;n.Cookie.set(z,n.JSON.stringify(K),{expires:c});Invodo.Module.get("logger").log("Invodo.Experiment","experimentChosen",{ex:N.experiment+"/"+N.branch})}else{N={branch:I,experiment:"none",viewer:true}}return N}}})(this,Invodo);(function(d){var e=this.Lang,c=[],b="InvodoWidget_",a=0;this.Src.WidgetInterface={data:function(f){},hide:function(){},getId:function(){},getType:function(){},listensTo:function(f){},receiveUpdate:function(f){},sendUpdate:function(f){},setParent:function(f){},setStyle:function(g,f){},show:function(){}};this.Src.WidgetConfig={data:"",listensTo:"",parentDomId:"",type:"",widgetId:""};this.Tool.WidgetHelper={test:function(){Invodo.Console.log("WidgetHelper.test")}};this.Widget={add:function(f){var h=false,g=null;if(!f.widgetId){f.widgetId=b+(a++)}e.forEach(c,function(k,l){if(l.getId()===f.widgetId){h=true;return false}});if(h){return false}try{var j=f.type;if(typeof j=="string"){j=j.toLowerCase()}if(f.sku){f.mpd=f.sku}if(f.refId){f.mpd=f.refId}if(f.refid){f.mpd=f.refid}try{switch(j){case"html5videoplayer":g=new Invodo.Src.Widget.Html5Video(f.parentDomId,f.widgetId,f.video,f.poster,f.config||{});break;case"inplayer":g=new Invodo.Src.Widget.InPlayer(f.parentDomId,f.widgetId,f.podId||"",f.mpd||"",f.mode,f.listensTo,f.swfPath||"",f.autoplay,f.logoUrl||"",f.chromelessmode||"");break;case"caption":g=new Invodo.Src.Widget.Caption(f.parentDomId,f.widgetId,f.data,f.listensTo);break;case"videoplayer":g=new Invodo.Src.Widget.VideoPlayer(f.parentDomId,f.widgetId,f.mpd,f.mode,f.listensTo);break;case"cta":g=new Invodo.Src.Widget.Cta(f);break;case"interactiveplayer":case"spin":g=new Invodo.Src.Widget.InteractivePlayer(f.parentDomId,f.widgetId,f.podId,f.mpd,f.httpBase,f.friction,f.introSpin,f.showControls,f.homeAddress,f.preloadAll,f.matrix_direction);break;case"arcade":g=new Invodo.Src.Widget.Arcade(f.parentDomId,f.widgetId,f.podId,f.mpd,f.httpBase);break;default:g=new j(f)}}catch(i){Invodo.Console.log("Widget type not found: "+f.type);return false}if(f.onpodload){g.onpodload=f.onpodload}}catch(i){Invodo.Console.warn(i.constructor+": "+i.message)}if(g){c.push(g)}return g||false},call:function(h,j,g){var i=this.get(h),f=null;if(i){f=i[j](g)}return f},get:function(g){var f=false;e.forEach(c,function(h,j){if(j.getId()===g){f=j;return false}});return f},getAll:function(){return c.slice()},update:function(f){e.forEach(c,function(g,h){h.receiveUpdate(f)})},remove:function(g){var f=false;e.forEach(c,function(h,j){if(j.getId()===g){f=true;j.remove();c.splice(h,1);return false}});return f},validate:function(g,f){e.forEach(Invodo.Src.WidgetInterface,function(h){if(!g||!(e.isFunction(g[h]))){Invodo.Console.log(f+" failed to implement method: "+h)}})}}}).call(Invodo,this);Invodo.Src.Widget.Mixin=function(a){this.getId=function(){return a.widgetId};this.getListensTo=function(){return a.listensTo};this.getParentDomId=function(){return a.parentDomId};this.getType=function(){return a.type};this.hide=function(){getDom().style.display="none";return this};this.receiveUpdate=function(d){for(var c in a.listensTo){var b=a.listensTo[c];if(d.widgetId==b&&d.data=="show"){this.show()}}};this.registerEventListener=function(b,c){callbacks.push({eventName:b,callback:c});return this};this.setParent=function(b){a.parentDomId=b;getParentDom().appendChild(getDom())};this.setStyle=function(c,b){getDom().style[c]=b;return};this.show=function(){getDom().style.display="block";return this};this.unregisterEventListener=function(b,d){for(var c=0;c<callbacks.length;c++){if(callbacks[c].eventName===b&&callbacks[c].callback===d){callbacks.splice(c,1)}}return this}};(function(c,e){var d=this.Lang,f=this.File,k=c.encodeURIComponent,h=null,j=[],b=[],i=function(r){var n=131,q=0,o=0,m=r.length;for(;o<m;o++){q=(((q*n)%65535)+r.charCodeAt(o))%65535}return Math.abs(q%8)},g=function(n){var q;for(var m=0;m<j.length;m++){q=j[m];if(d.isFunction(q.notify)){q.notify(n)}}},a=function(m){setTimeout(function(){new f.JS(m)},20)};this.Pod={init:function(){h=Invodo.getPodDomain()+"/4.0/pl/"},addByPodId:function(o){var n=i(o)+"/"+o.charAt(o.length-1)+"/"+o,m=h+n+".js";if(!this.isRegistered(o)){b.push({config:null,loaded:false,pod:o,podPath:m,mpd:"",mpdPath:""})}a(m)},isRegistered:function(n){var o=false;for(var m=0;m<b.length;m++){if(b[m].pod==n){o=true;break}}return o},register:function(o,n,m){b.push({config:null,loaded:false,pod:o,podPath:"localhost",mpd:n,mpdPath:m})},addByMpd:function(o){var s=k(Invodo.getAffiliate());var r=k(o);var n=i(s+"/"+r+".js");var q=k(s)+"/"+k(r)+".js";var m=h+n+"/"+q;b.push({config:null,loaded:false,pod:"",podPath:"",mpd:o,mpdPath:m});a(m)},addByRefId:function(m){return this.addByMpd(m)},registerObserver:function(m){if(d.indexOf(j,m)===-1){j.push(m)}},getDescription:function(o){var n="";var m;if(o){m=this.get(o);if(m&&m.config&&m.config.description){n=m.config.description}}return n},getExperimentData:function(m){return Invodo.Experiment.getExperimentData(m)},config:function(u){Invodo.Pod.getPresentation(u);Invodo.Pod.migrate(u,Invodo.getAffiliateConfig());var q=u.sku||u.customId;var x=u.pods;var z=u.carousel;var C=u.cpd;var n=false;var m=false;var E=u.interactive||null;var t=u.arcade||null;var D;var v;var w;var s;var r;var o;var A;s=Invodo.Experiment.run(u);r=s.branch;if(r==="novideo"){return}o=d.filter(x,function(F){return F.podId===r})[0];for(var B=0;B<b.length;B++){D=b[B];if(D.loaded===true){continue}for(var y=0;y<x.length;y++){v=x[y];w=v.podId;n=D.pod&&D.pod===w;m=D.mpd&&D.mpd===q;if(n||m){D.config=o||v;D.config.carousel=z;D.config.interactive=E;D.config.arcade=t;D.loaded=true;D.pod=w;g(w);break}}if(B===0){Invodo.SEO.config(u)}if(D.loaded){break}}},get:function(o){var q=null;for(var m=0;m<b.length;m++){var n=b[m];if(n.pod===o){q=n;break}}return q},getCustomData:function(m,u){var v={};if(m){var o=this.get(m);if(o&&"config" in o&&o.config&&"customData" in o.config){v=o.config.customData}if(u){for(var r=0;r<v.length;r++){try{var q=v[r];var s=q[0];var n=q[1];if(s==u){v=n}}catch(t){console.log(t.stack)}}}}return v},getCustomDataByMpd:function(n,u){var v={};if(n){var o=this.getByMpd(n);if(o&&"config" in o&&o.config&&"customData" in o.config){v=o.config.customData}if(u){for(var r=0;r<v.length;r++){try{var q=v[r];var s=q[0];var m=q[1];if(s==u){v=m}}catch(t){console.log(t.stack)}}}}return v},getCustomDataByRefId:function(m,u){var v={};if(m){var o=this.getByRefId(m);if(o&&"config" in o&&o.config&&"customData" in o.config){v=o.config.customData}if(u){for(var r=0;r<v.length;r++){try{var q=v[r];var s=q[0];var n=q[1];if(s==u){v=n}}catch(t){console.log(t.stack)}}}}return v},getCustomDataKeys:function(q){var s={};var o=[];if(q){var m=this.get(q);if(m&&"config" in m&&m.config&&"customData" in m.config){s=m.config.customData}for(var n=0;n<s.length;n++){var r=s[n];o.push(r[0])}}return o},getCustomDataKeysByMpd:function(q){var s={};var o=[];if(q){var m=this.getByMpd(q);if(m&&"config" in m&&m.config&&"customData" in m.config){s=m.config.customData}for(var n=0;n<s.length;n++){var r=s[n];o.push(r[0])}}return o},getCustomDataKeysByRefId:function(r){var s={};var o=[];if(r){var m=this.getByRefId(r);if(m&&"config" in m&&m.config&&"customData" in m.config){s=m.config.customData}for(var n=0;n<s.length;n++){var q=s[n];o.push(q[0])}}return o},getByMpd:function(o){var q=null;for(var m=0;m<b.length;m++){var n=b[m];if(n.mpd===o){q=n;break}}return q},getByRefId:function(m){return this.getByMpd(m)},getAll:function(){return b.slice()},getPoster:function(m,n){var o;if(n===e){n=0}o=this.get(m).config.frames[n];if(!o){return false}return o.previewUrl.replace(/.*?:/g,"")},getPosterByMpd:function(n,o){var m,q;if(o===e){o=0}m=this.getByMpd(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return q.previewUrl.replace(/.*?:/g,"")},getPosterByRefId:function(m,n){return this.getPosterByMpd(m,n)},getVideo:function(o,q,m){var n,r;n=this.get(o);if(n&&n.config){r=n.config.frames[q||0];if(!r){return false}}else{return false}return r.encodings[m||0].http.replace(/.*?:/g,"")},getVideoByMpd:function(o,q,m){var n,r;n=this.getByMpd(o);if(n&&n.config){r=n.config.frames[q||0];if(!r){return false}}else{return false}return r.encodings[m||0].http.replace(/.*?:/g,"")},getVideoByRefId:function(n,o,m){return this.getVideoByMpd(n,o,m)},getTitle:function(q,r){var o,s;var m="";var n=parseInt(r);o=this.get(q);if(o&&o.config){if(n>=0){s=o.config.frames[n];if(s&&s.title){m=s.title}}else{if(o.config.title){m=o.config.title}}}return m},getTitleByMpd:function(q,r){var n,o;var m="";n=Invodo.Pod.getByMpd(q);if(n&&n.pod){o=n.pod;m=Invodo.Pod.getTitle(o,r)}return m},getTitleByRefId:function(m,n){return this.getTitleByMpd(m,n)},getTranscript:function(o,q){var n,r;var m="";n=this.get(o);if(n&&n.config){r=n.config.frames[q||0];if(r&&r.transcript){m=r.transcript}}return m},getTranscriptByMpd:function(q,r){var n,o;var m="";n=this.getByMpd(q);if(n&&n.config){o=n.pod;m=this.getTranscript(o,r||0)}return m},getTranscriptByRefId:function(m,n){return this.getTranscriptByMpd(m,n||0)},getWidth:function(o,q,m){var n,r;if(q===e){q=0}m=m||0;n=this.get(o);if(n&&n.config){r=n.config.frames[q];if(!r){return false}}else{return false}return parseInt(r.encodings[m].width)},getWidthByMpd:function(o,q,m){var n,r;if(q===e){q=0}m=m||0;n=this.getByMpd(o);if(n&&n.config){r=n.config.frames[q];if(!r){return false}}else{return false}return parseInt(r.encodings[m].width)},getWidthByRefId:function(n,o,m){return this.getWidthByMpd(n,o,m)},getHeight:function(o,q,m){var n,r;if(q===e){q=0}m=m||0;n=this.get(o);if(n&&n.config){r=n.config.frames[q];if(!r){return false}}else{return false}return parseInt(r.encodings[m].height)},getHeightByMpd:function(o,q,m){var n,r;if(q===e){q=0}m=m||0;n=this.getByMpd(o);if(n&&n.config){r=n.config.frames[q];if(!r){return false}}else{return false}return parseInt(r.encodings[m].height)},getHeightByRefId:function(n,o,m){return this.getHeightByMpd(n,o,m)},getDuration:function(n,o){var m,q;if(o===e){o=0}m=this.get(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return parseInt(q.duration)},getDurationByMpd:function(n,o){var m,q;if(o===e){o=0}m=this.getByMpd(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return parseInt(q.duration)},getDurationByRefId:function(m,n){return this.getDurationByMpd(m,n)},getDurableId:function(n,o){var m,q;if(o===e){o=0}m=this.get(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return q.durableId},getDurableIdByMpd:function(n,o){var m,q;if(o===e){o=0}m=this.getByMpd(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return q.durableId},getDurableIdByRefId:function(m,n){return this.getDurableIdByMpd(m,n)},getThumbnail:function(n,o){var m,q;if(o===e){o=0}m=this.get(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return q.thumbnailUrl.replace(/.*?:/g,"")},getThumbnailByMpd:function(n,o){var m,q;if(o===e){o=0}m=this.getByMpd(n);if(m&&m.config){q=m.config.frames[o];if(!q){return false}}else{return false}return q.thumbnailUrl.replace(/.*?:/g,"")},getThumbnailByRefId:function(m,n){return this.getThumbnailByMpd(m,n)},load:function(n,q,o){var m;if(n.pod){m=Invodo.Pod.get(n.pod)}else{if(n.mpd){m=Invodo.Pod.getByMpd(n.mpd)}}if(m&&m.loaded){q(m)}else{if(o){q(o())}else{new l(n,q,!!m)}}}};var l=function(n,t,s){var m=this,q=false;r(n);function o(u){q=true;m.notify=function(){};t(u)}function r(u){if(u.pod){Invodo.Module.get("logger").log(u.widgetId,"podRequest",{podId:u.pod})}else{if(u.mpd){Invodo.Module.get("logger").log(u.widgetId,"podRequest",{mpd:u.mpd})}}}this.notify=function(v){var u;if(q){return}if(n.pod&&n.pod===v){u=Invodo.Pod.get(v);if(u){o(u)}}else{if(n.mpd){u=Invodo.Pod.getByMpd(n.mpd);if(u&&u.pod===v){o(u)}}}};Invodo.Pod.registerObserver(this);if(s===false){if(n.pod){Invodo.Pod.addByPodId(n.pod)}else{if(n.mpd){Invodo.Pod.addByMpd(n.mpd)}}}};this.Pod.registerObserver(Invodo)}).call(Invodo,this);(function(d){var b=d.Pod;b.version="13.1.2";b.migrate=function(j,h){var f=[];if(j.hasOwnProperty("version")){f=[c,a]}else{f=[e,c]}for(var g=0;g<f.length;g++){j=f[g](j,h)}return j};var e=function(r,k){for(var f=0;f<r.pods.length;f++){var o=r.pods[f].frames;for(var m=0;m<o.length;m++){if(!r.pods[f].frames[m].hasOwnProperty("encodings")||!(r.pods[f].frames[m].encodings instanceof Array)){r.pods[f].frames[m].encodings=[]}var q=o[m].encodings;for(var l=0;l<q.length;l++){q[l].http=k.httpBase+q[l].HTTP+"/"+q[l].filename;q[l].rtmp={app:k.rtmpBase+q[l].RTMP,stream:q[l].filename};switch(Number(q[l].type)){case 360:q[l].width=640;q[l].height=360;break;case 540:q[l].width=960;q[l].height=540;break;case 720:q[l].width=1280;q[l].height=720;break;case 1080:q[l].width=1920;q[l].height=1080;break;default:if(q[l].type==="mobile"||q[l].type==="other"){q[l].width=1920;q[l].height=1080}else{q[l].width=480;q[l].height=270}break}delete q[l].type;delete q[l].RTMP;delete q[l].HTTP;delete q[l].filename;q[l].bitrate=0;q[l].id=String(Number(l)+1)}var g=Number(r.pods[f].frames[m].width);var s=Number(r.pods[f].frames[m].height);var t=String(r.pods[f].frames[m].HTTP);var h=String(r.pods[f].frames[m].RTMP);var n=String(r.pods[f].frames[m].filename);r.pods[f].frames[m].duration=Number(r.pods[f].frames[m].duration);r.pods[f].frames[m].original_filename="";r.pods[f].frames[m].previewUrl=k.imageBase+String(r.pods[f].frames[m].previewUrl);r.pods[f].frames[m].thumbnailUrl=k.imageBase+String(r.pods[f].frames[m].thumbnailUrl);r.pods[f].frames[m].defaultEncoding="0";r.pods[f].frames[m].encodings.unshift({bitrate:0,id:"0",width:g,height:s,label:"270p",http:String(k.httpBase)+t+"/"+r.pods[f].frames[m].filename,rtmp:{app:k.rtmpBase+h,stream:n}});delete o[m].width;delete o[m].height;delete o[m].RTMP;delete o[m].HTTP;delete o[m].filename}}r.version=b.version;return r};var a=function(f){return f};var c=function(l){for(var k=0;k<l.pods.length;k++){var m=l.pods[k].frames;for(var g=0;g<m.length;g++){m[g].duration=parseInt(m[g].duration);var h=m[g].encodings;for(var f=0;f<h.length;f++){h[f].width=parseInt(h[f].width);h[f].height=parseInt(h[f].height);h[f].bitrate=parseInt(h[f].bitrate);h[f].width=(h[f].width<=0)?480:h[f].width;h[f].height=(h[f].height<=0)?270:h[f].height}h.sort(function(j,i){if(j.height<i.height){return -1}else{if(j.height>i.height){return 1}else{return 0}}})}}return l};return b}).call(this,Invodo);(function(b){var a=b.Pod;a.getPresentation=function(k){if(!("presentations" in k)){return k}var e=[];if("cpd" in k){var l=k.defaultPresentation;e=k.presentations;var g;for(var j=0;d<e.length;j++){g=e[j];if(g.presentationId==l){g.cpd=k.cpd}else{g.cpd={constant:g.presentationId}}}}var f=k.defaultPresentation&&k.defaultPresentation;var h;for(var c=0;c<e.length;c++){if(e[c].presentationId&&e[c].presentationId===f){h=e[c]}}if(!h){h=e[0]}delete k.presentations;if("defaultPresentation" in k){delete k.defaultPresentation}for(var d in h){k[d]=h[d]}return k};return a}).call(this,Invodo);(function(c,k){var e=k.Lang,a=2000,b=false,g=k.Dom,i=k.Visitor,h=k.Storage,j="eventBuffer",d=new Date().getTime(),f=0;var l=function(u,o,r,t,q){var n=new Date().getTime();this.c=f++;this.sid=u;this.et=o;this.ts=n;this.tss=n-d;for(var s in r){this[s]=encodeURIComponent(r[s])}var m=t+q(this);if(m.length>a){if("re" in this){this.re=""}}m=t+q(this);if(m.length>a){if("ua" in this){this.ua=""}}if(o==="timePlayed"){this.tm=Math.round(parseFloat(r.tm))}};k.Src.Module.Logger=function(n){var y=this;var o=null;var m=Invodo.getLogDomain()+"/log2";var z=[];var r=false;Invodo.EventDispatcher(y);if(document.readyState==="complete"){x()}else{Invodo.Event.once(c,"load",x)}Invodo.Event.once(c,"unload",t);function x(){r=true;u();q();o=setInterval(q,5000)}function s(){var B=Invodo.getAffiliate();var E=Invodo.getPageViewId();var H=Invodo.Visitor.getSessionId();var G=Invodo.Visitor.getVisitorId();var A="1.0";var D=new Date().getTimezoneOffset()/60;var C=Invodo.Cookie.enabled()?1:0;var F="ak="+B+"&pid="+E+"&bid="+H+"&fv="+A+"&vid="+G+"&tz="+D+"&ck="+C;return F}function u(){var C=h.get(j);if(C){if(!e.isArray(C)){C=[C]}for(var B=0,A=C.length;B<A;B++){v(C[B])}h.del(j);h.save()}}function t(){var B=s();var E=B;var A="";var C=[];clearInterval(o);if(!z.length){return}if(!h.enabled()){return}while(z.length){var D=z[0];var F=w(D);A=E+F;if(A.Length>=a){C.push(A);E=B}else{E=A}z.shift()}if(E!=B){C.push(E)}h.set(j,C);h.save()}function q(){if(!r||z.length===0){return}var E=new Array;var C=s();var G=C;var B="";for(var D=0;D<z.length;D++){var F=z[D];var H=w(F);B=G+H;if(B.length>=a){E.push(B);G=C}else{G=B}z.splice(D,1);D--}if(G!=C){E.push(G)}while(E.length){var A=E[0];v(A);E.shift()}if(z.length>0){q()}}function w(C){var A="";var B=C.c;for(var D in C){if(D==="c"){continue}A+="&e"+B+"["+D+"]="+C[D]}return A}function v(B){var A=new Image();A.src=m+"?"+B}y.getDebug=function(){return b};y.setDebug=function(A){b=A};y.getId=function(){return n};y.isEmpty=function(){return z.length===0};y.log=function(F,A,B){var E=new l(F,A,B,s(),w);z.push(E);y.fire(A,E);switch(A){case"pageInfo":case"pageView":case"itemPurchase":case"cartAdd":case"cartRemove":q();break;default:break}if(b){var D=A;for(var C in B){D+="\n "+C+":"+B[C]}Invodo.Console.log(D)}return E};y.setUrl=function(A){m=A}}})(this,Invodo);(function(){var a=a||function(z,d){var f={},h=f.lib={},e=function(){},b=h.Base={extend:function(g){e.prototype=this;var k=new e;g&&k.mixIn(g);k.hasOwnProperty("init")||(k.init=function(){k.$super.init.apply(this,arguments)});k.init.prototype=k;k.$super=this;return k},create:function(){var g=this.extend();g.init.apply(g,arguments);return g},init:function(){},mixIn:function(g){for(var k in g){g.hasOwnProperty(k)&&(this[k]=g[k])}g.hasOwnProperty("toString")&&(this.toString=g.toString)},clone:function(){return this.init.prototype.extend(this)}},c=h.WordArray=b.extend({init:function(g,k){g=this.words=g||[];this.sigBytes=k!=d?k:4*g.length},toString:function(g){return(g||y).stringify(this)},concat:function(k){var n=this.words,l=k.words,m=this.sigBytes;k=k.sigBytes;this.clamp();if(m%4){for(var q=0;q<k;q++){n[m+q>>>2]|=(l[q>>>2]>>>24-8*(q%4)&255)<<24-8*((m+q)%4)}}else{if(65535<l.length){for(q=0;q<k;q+=4){n[m+q>>>2]=l[q>>>2]}}else{n.push.apply(n,l)}}this.sigBytes+=k;return this},clamp:function(){var g=this.words,k=this.sigBytes;g[k>>>2]&=4294967295<<32-8*(k%4);g.length=z.ceil(k/4)},clone:function(){var g=b.clone.call(this);g.words=this.words.slice(0);return g},random:function(g){for(var l=[],k=0;k<g;k+=4){l.push(4294967296*z.random()|0)}return new c.init(l,g)}}),w=f.enc={},y=w.Hex={stringify:function(l){var m=l.words;l=l.sigBytes;for(var r=[],q=0;q<l;q++){var n=m[q>>>2]>>>24-8*(q%4)&255;r.push((n>>>4).toString(16));r.push((n&15).toString(16))}return r.join("")},parse:function(k){for(var l=k.length,n=[],m=0;m<l;m+=2){n[m>>>3]|=parseInt(k.substr(m,2),16)<<24-4*(m%8)}return new c.init(n,l/2)}},o=w.Latin1={stringify:function(k){var l=k.words;k=k.sigBytes;for(var n=[],m=0;m<k;m++){n.push(String.fromCharCode(l[m>>>2]>>>24-8*(m%4)&255))}return n.join("")},parse:function(k){for(var l=k.length,n=[],m=0;m<l;m++){n[m>>>2]|=(k.charCodeAt(m)&255)<<24-8*(m%4)}return new c.init(n,l)}},x=w.Utf8={stringify:function(k){try{return decodeURIComponent(escape(o.stringify(k)))}catch(l){throw Error("Malformed UTF-8 data")}},parse:function(g){return o.parse(unescape(encodeURIComponent(g)))}},j=h.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new c.init;this._nDataBytes=0},_append:function(g){"string"==typeof g&&(g=x.parse(g));this._data.concat(g);this._nDataBytes+=g.sigBytes},_process:function(q){var s=this._data,v=s.words,u=s.sigBytes,t=this.blockSize,n=u/(4*t),n=q?z.ceil(n):z.max((n|0)-this._minBufferSize,0);q=n*t;u=z.min(4*q,u);if(q){for(var r=0;r<q;r+=t){this._doProcessBlock(v,r)}r=v.splice(0,q);s.sigBytes-=u}return new c.init(r,u)},clone:function(){var g=b.clone.call(this);g._data=this._data.clone();return g},_minBufferSize:0});h.Hasher=j.extend({cfg:b.extend(),init:function(g){this.cfg=this.cfg.extend(g);this.reset()},reset:function(){j.reset.call(this);this._doReset()},update:function(g){this._append(g);this._process();return this},finalize:function(g){g&&this._append(g);return this._doFinalize()},blockSize:16,_createHelper:function(g){return function(k,l){return(new g.init(l)).finalize(k)}},_createHmacHelper:function(g){return function(k,l){return(new i.HMAC.init(g,l)).finalize(k)}}});var i=f.algo={};return f}(Math);(function(o){function d(s,t,q,v,r,u,n){s=s+(t&q|~t&v)+r+n;return(s<<u|s>>>32-u)+t}function f(s,t,q,v,r,u,n){s=s+(t&v|q&~v)+r+n;return(s<<u|s>>>32-u)+t}function g(s,t,q,v,r,u,n){s=s+(t^q^v)+r+n;return(s<<u|s>>>32-u)+t}function e(s,t,q,v,r,u,n){s=s+(q^(t|~v))+r+n;return(s<<u|s>>>32-u)+t}for(var b=a,c=b.lib,i=c.WordArray,k=c.Hasher,c=b.algo,h=[],j=0;64>j;j++){h[j]=4294967296*o.abs(o.sin(j+1))|0}c=c.MD5=k.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(S,P){for(var X=0;16>X;X++){var R=P+X,E=S[R];S[R]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360}var X=this._hash.words,R=S[P+0],E=S[P+1],Q=S[P+2],N=S[P+3],L=S[P+4],J=S[P+5],H=S[P+6],G=S[P+7],F=S[P+8],n=S[P+9],m=S[P+10],l=S[P+11],O=S[P+12],M=S[P+13],K=S[P+14],I=S[P+15],W=X[0],V=X[1],U=X[2],T=X[3],W=d(W,V,U,T,R,7,h[0]),T=d(T,W,V,U,E,12,h[1]),U=d(U,T,W,V,Q,17,h[2]),V=d(V,U,T,W,N,22,h[3]),W=d(W,V,U,T,L,7,h[4]),T=d(T,W,V,U,J,12,h[5]),U=d(U,T,W,V,H,17,h[6]),V=d(V,U,T,W,G,22,h[7]),W=d(W,V,U,T,F,7,h[8]),T=d(T,W,V,U,n,12,h[9]),U=d(U,T,W,V,m,17,h[10]),V=d(V,U,T,W,l,22,h[11]),W=d(W,V,U,T,O,7,h[12]),T=d(T,W,V,U,M,12,h[13]),U=d(U,T,W,V,K,17,h[14]),V=d(V,U,T,W,I,22,h[15]),W=f(W,V,U,T,E,5,h[16]),T=f(T,W,V,U,H,9,h[17]),U=f(U,T,W,V,l,14,h[18]),V=f(V,U,T,W,R,20,h[19]),W=f(W,V,U,T,J,5,h[20]),T=f(T,W,V,U,m,9,h[21]),U=f(U,T,W,V,I,14,h[22]),V=f(V,U,T,W,L,20,h[23]),W=f(W,V,U,T,n,5,h[24]),T=f(T,W,V,U,K,9,h[25]),U=f(U,T,W,V,N,14,h[26]),V=f(V,U,T,W,F,20,h[27]),W=f(W,V,U,T,M,5,h[28]),T=f(T,W,V,U,Q,9,h[29]),U=f(U,T,W,V,G,14,h[30]),V=f(V,U,T,W,O,20,h[31]),W=g(W,V,U,T,J,4,h[32]),T=g(T,W,V,U,F,11,h[33]),U=g(U,T,W,V,l,16,h[34]),V=g(V,U,T,W,K,23,h[35]),W=g(W,V,U,T,E,4,h[36]),T=g(T,W,V,U,L,11,h[37]),U=g(U,T,W,V,G,16,h[38]),V=g(V,U,T,W,m,23,h[39]),W=g(W,V,U,T,M,4,h[40]),T=g(T,W,V,U,R,11,h[41]),U=g(U,T,W,V,N,16,h[42]),V=g(V,U,T,W,H,23,h[43]),W=g(W,V,U,T,n,4,h[44]),T=g(T,W,V,U,O,11,h[45]),U=g(U,T,W,V,I,16,h[46]),V=g(V,U,T,W,Q,23,h[47]),W=e(W,V,U,T,R,6,h[48]),T=e(T,W,V,U,G,10,h[49]),U=e(U,T,W,V,K,15,h[50]),V=e(V,U,T,W,J,21,h[51]),W=e(W,V,U,T,O,6,h[52]),T=e(T,W,V,U,N,10,h[53]),U=e(U,T,W,V,m,15,h[54]),V=e(V,U,T,W,E,21,h[55]),W=e(W,V,U,T,F,6,h[56]),T=e(T,W,V,U,I,10,h[57]),U=e(U,T,W,V,H,15,h[58]),V=e(V,U,T,W,M,21,h[59]),W=e(W,V,U,T,L,6,h[60]),T=e(T,W,V,U,l,10,h[61]),U=e(U,T,W,V,Q,15,h[62]),V=e(V,U,T,W,n,21,h[63]);X[0]=X[0]+W|0;X[1]=X[1]+V|0;X[2]=X[2]+U|0;X[3]=X[3]+T|0},_doFinalize:function(){var q=this._data,r=q.words,m=8*this._nDataBytes,s=8*q.sigBytes;r[s>>>5]|=128<<24-s%32;var n=o.floor(m/4294967296);r[(s+64>>>9<<4)+15]=(n<<8|n>>>24)&16711935|(n<<24|n>>>8)&4278255360;r[(s+64>>>9<<4)+14]=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360;q.sigBytes=4*(r.length+1);this._process();q=this._hash;r=q.words;for(m=0;4>m;m++){s=r[m],r[m]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360}return q},clone:function(){var l=k.clone.call(this);l._hash=this._hash.clone();return l}});b.MD5=k._createHelper(c);b.HmacMD5=k._createHmacHelper(c)})(Math);this.Crypto={MD5:function(b){return String(a.MD5(b))}}}).call(Invodo);Invodo.Video={};Invodo.Video.Interface=function(){this.fullscreen=function(){console.log("You cannot call the fullscreen function until you implement it in your widget");return false};this.getTime=function(){console.log("You cannot call the getTime function until you implement it in your widget");return false};this.getDuration=function(){console.log("You cannot call the getDuration function until you implement it in your widget");return false};this.isPaused=function(){console.log("You cannot call the isPaused function until you implement it in your widget");return false};this.isPlaying=function(){console.log("You cannot call the isPlaying function until you implement it in your widget");return false};this.isStopped=function(){console.log("You cannot call the isStopped function until you implement it in your widget");return false};this.mute=function(){console.log("You cannot call the mute function until you implement it in your widget");return false};this.muteToggle=function(){console.log("You cannot call the muteToggle function until you implement it in your widget");return false};this.pause=function(){console.log("You cannot call the pause function until you implement it in your widget");return false};this.pauseVideo=function(){console.log("You cannot call the pauseVideo function until you implement it in your widget");return false};this.play=function(){console.log("You cannot call the play function until you implement it in your widget");return false};this.setTime=function(){console.log("You cannot call the setTime function until you implement it in your widget");return false};this.stop=function(){console.log("You cannot call the stop function until you implement it in your widget");return false};this.volume=function(){console.log("You cannot call the volume function until you implement it in your widget");return false}};(function(b){var d=this.Dom,c=this.Lang,a=this.EventDispatcher;this.Src.Widget.Cta=function(l){var r=null;var g="";var o;var n="";var e="";var m="";var v=this;var s="cta";var q;var k;var t;var j;function i(){if(v.getParentDomId()){var w=document.getElementById(v.getParentDomId());if(w&&w.innerHTML){w.innerHTML=""}}}function u(w){try{if(w){if("data" in w){r=w.data}if("widgetId" in w){g="InvodoCta_"+w.widgetId;q=w.widgetId;k="InvodoCta"+q}else{Invodo.Console.log("no widget id")}if("mpd" in w){n=w.mpd}if("parentDomId" in w){e=w.parentDomId}if("podId" in w){m=w.podId}}else{Invodo.Console.log("No config object passed to Cta widget")}}catch(x){Invodo.Console.log("Configuration error while initializing the Cta Widget")}a(v);if(m||n){Invodo.Pod.load({pod:m,mpd:n,widgetId:q},function(y){f();if(c.isFunction(v.onpodload)){v.onpodload(y.pod)}})}else{f()}}function f(){if(Invodo.Lang.isElement(r)){o=new d(r);j=0;t=setInterval(function(){j++;if((r.clientHeight!==0)||(j>20)){h("ctaView");v.fire("ctaView");clearInterval(t)}},100)}else{var w=document.getElementById(e);if(!w){return}o=new d(d.createElement("img",{id:k,style:"cursor:pointer;cursor:hand",title:"Click to view video"}));o.appendTo(w).once("load",function(){h("ctaView");v.fire("ctaView")});o.get(0).src=r}o.on("click",function(){h("ctaClick");v.sendUpdate({data:"show"});v.fire("ctaClick")})}function h(E){var D={pn:Invodo.getPageName()},z,C;if(m){z=Invodo.Pod.get(m)}else{if(n){z=Invodo.Pod.getByMpd(n)}else{var F=Invodo.Widget.getAll();for(var A=0;A<F.length;A++){var B=F[A];if("getListensTo" in B){var w=B.getListensTo();for(var y=0;y<w.length;y++){var x=w[A];if(x===q){m=B.getPodId();D.pod=m}}}}}}if(z){D.pod=z.pod;C=Invodo.Pod.getExperimentData(z.pod);if(C){if("experiment" in C){D.ex=C.experiment+"/"+C.branch}if("branch" in C){D.pod=C.branch}}}if(E==="ctaView"){D.vis=o.visibleInViewPort()}if(Invodo.Module.get("logger")){Invodo.Module.get("logger").log(q,E,D)}}v.getData=function(){return r||null};v.getId=function(){return q||null};v.getMpd=function(){return n||null};v.getParentDomId=function(){return e||null};v.getPodId=function(){return m||null};v.getSku=function(){return sku||null};v.getType=function(){return s};v.hide=function(){o.hide();return v};v.receiveUpdate=function(w){};v.remove=function(){i()};v.sendUpdate=function(w){w.widgetId=q;Invodo.Widget.update(w)};v.setParent=function(y){e=y;var w=document.getElementById(k);var x=document.getElementById(v.getParentDomId());if(x&&("appendChild" in x)){x.appendChild(w)}};v.show=function(){o.show();return v};u(l);return v}}).call(Invodo,this);Invodo.Src.Widget.Html5Video=function(b,B,y,n,o){var s=this;var w="Html5Video_"+b;var D=o||{};var x=Invodo.Dom;var a;var q;var l=document.getElementById(b);var m=null;var C=false;var h=false;var f=true;var c=false;var e="Html5VideoPlayer";Invodo.EventDispatcher(s);if(l){k()}function k(){q=new x(x.createElement("div",{id:w}));q.css({width:"100%",height:"100%"});q.appendTo(l);var G=false;if("chromelessmode" in D){G=(D.chromelessmode=="true")?true:false}var F={id:"InvodoVideo_"+w,poster:n,src:y+"?cacheBuster="+Date.now(),unselectable:"on",style:"-webkit-user-select:none;-moz-user-select:moz-none;-ms-user-select:none;user-select:none;"};if(!G){F.controls="controls"}a=new x(x.createElement("video",F));a.css({height:"100%",width:"100%"});a.on("volumechange",d).on("webkitfullscreenchange",j).on("timeupdate",v).on("ended",A).on("play",r).on("pause",z).on("loadedmetadata",t);a.appendTo(q);c=a.muted}function E(F){return parseFloat(F.toFixed(3))}s.getContainer=function(){return q};s.getDuration=function(){var F=a.get(0);return E(F.duration)};s.getId=function(){return B};s.getPosition=function(){var F=a.get(0);return F&&"currentTime" in F?E(F.currentTime):0};s.getInfo=function(){var F={};F.config={};F.config.config=D;return F};s.getInfo=function(){var F={};F.config={};F.config.config=D;return F};s.getTime=function(){var F=a.get(0);return F&&"currentTime" in F?Math.round(F.currentTime):0};s.getType=function(){return e};s.hide=function(){if(s.isPlaying()){s.pause()}q.hide()};s.isMuted=function(){var F=a.get(0);c=F.muted;return c};s.isPaused=function(){return C};s.isPlaying=function(){return h};s.isStopped=function(){return f};function g(){var F=s.getTime();s.fire("timePlayed",{tm:F});s.sendUpdate({data:F})}s.mute=function(){var F=a.get(0);F.muted=!c;return s};s.muteToggle=function(){s.mute()};function t(F){s.fire("loadedmetadata",F)}function A(F){u();h=false;C=false;f=true;s.fire("videoComplete");s.fire("podComplete")}function d(G){var F=a.get(0);c=F.muted}function j(G){var F=G.target.webkitDisplayingFullscreen;s.fire("webkitfullscreenchange",{fullscreen:F});if(F===false){s.fire("webkitendfullscreen")}if(F===true){s.fire("webkitbeginfullscreen")}}function r(F){if(!h){h=true;s.fire("ctaClick")}if(C){C=false;s.fire("videoUnpause")}f=false;s.fire("videoStart");if(!m){i()}}function z(F){u();C=true;g();s.fire("videoPause")}function v(G){var F=s.getTime();s.sendUpdate({data:F});if(!m&&h){i()}s.fire("timeUpdate")}s.pause=function(){var F=a.get(0);a.get(0).pause();C=true;return s};s.play=function(H){if(!a.isDisplayed(0)){return}var G=Date.now();H+=("?cacheBuster="+G);y+=("?cacheBuster="+G);var F=a.get(0);if(F.getAttribute("src")===""||null||undefined){F.setAttribute("src",H||y)}F.play();h=true;C=false;return s};s.reset=function(){a.get(0).load();h=false;C=false;f=false};s.size=function(F,G){a.get(0).style.height=parseInt(F)+"px";a.get(0).style.width=parseInt(G)+"px"};function i(){m=window.setInterval(g,5000)}s.stop=function(){var F=a.get(0);F.load();h=false};function u(){clearInterval(m);m=undefined}s.sendUpdate=function(F){F.widgetId=B;Invodo.Widget.update(F)};s.receiveUpdate=function(){};s.show=function(){q.show();return s};s.setTime=function(G){var F=a.get(0);if(F&&F.currentTime){F.currentTime=G}}};(function(a){var c=this.Lang,b=this.Dom;this.Src.Widget.Caption=function(k,j,f,g){var d=null;var i=document.getElementById(k);var e=this;var h="Caption";if(i){d=new b(b.createElement("div",{id:j}));d.appendTo(i)}e.data=function(l){f=l;return e};e.hide=function(){d.hide();return e};e.getId=function(){return j};e.getType=function(){return h};e.receiveUpdate=function(n){for(var m=0;m<f.length;m++){var l=f[m];if(Math.round(n.data)==l.time&&n.widgetId===g){e.text(l.text)}}};e.sendUpdate=function(l){l.widgetId=j;Widget.update(l);return e};e.show=function(){d.show();return e};e.setStyle=function(m,l){d.css(m,l);return e};e.text=function(l){d.html(l);return e}}}).call(Invodo,this);Invodo.Src.Widget.Carousel=function(a,f,b,h,c){var d=null;var e=null;var g=null;var i=this;i.getControl=function(){return d};i.getModel=function(){return e};i.getView=function(){return g};i.render=function(){if(g&&g.render){g.render()}};i.resize=function(k,j){if(g&&g.resize){g.resize(k,j)}};e=new Invodo.Src.Widget.Carousel.Model(f,b,h,c);g=new Invodo.Src.Widget.Carousel.View(a,e,d);e.addObserver(g)};Invodo.Src.Widget.Carousel.Model=function(g,b,e,d){var j=b.frontcolor||"FFFFFF";var i=b.backcolor||"000000";var f=[];var a=b.secondarycolor||"8DCC00";var k=this;var h=e;k.addObserver=function(l){f.push(l)};k.getBackColor=function(){return j};k.getFrontColor=function(){return i};k.getItems=function(){return g};k.getSecondColor=function(){return a};k.getTitle=function(){return h};k.getPodId=function(){return d};function c(){for(var l in f){f[l].notify()}}};Invodo.Src.Widget.Carousel.View=function(b,h,g){var m="E5E5E5";var e=100;var f=100;var k;var d;var c=b+"_InvodoCarousel";var j=Invodo.Env;var a;var n=100;var l=100;var o=this;var i;o.notify=function(){};o.render=function(){var r;var t=document.getElementById(b);Invodo.Module.get("logger").log("Invodo.Carousel","ivsView",{pod:h.getPodId()});if(d){return}d=new Invodo.Dom(Invodo.Dom.createElement("div",{id:c}));d.css({"font-family":"Arial","background-color":"#"+h.getBackColor(),width:f+"%",height:e+"%",overflowX:"hidden",overflowY:"scroll",position:"relative"});d.appendTo(t);i=new Invodo.Dom(Invodo.Dom.createElement("div",{id:b+"_InvodoCarouselTitle"}));i.html("<div style='border-bottom: 1px solid #"+m+";height:20px;background-color:#"+h.getBackColor()+";position:relative;'><span style='color:#"+h.getFrontColor()+";font-size:14px;font-weight:bold;opacity:0.7;position:absolute;left:3px;top:2px;'>"+h.getTitle()+"</span></div>");i.appendTo(d);a=Invodo.Dom(Invodo.Dom.createElement("div",{id:c+"_Panel"}));var w=d.height();if(w>20){w=w+"px"}else{w="92%"}a.css({"scrollbar-base-color":"#"+h.getBackColor(),width:l+"%",position:"relative",top:"0",left:"0"});var v=function(B,G,x){var y;var z;var A;var D=90;var H=this;var E;z=new Invodo.Dom(Invodo.Dom.createElement("p",{innerHTML:G.headline,"class":"invodo-carousel-item-headline"}));z.css({color:"#"+x.back,cursor:"pointer","font-size":"12px","font-weight":"bold",left:"8px",position:"relative",margin:"8px 20px 16px 0",padding:"0","line-height":"1"});z.on("mouseover",function(){y.get(0).style.borderColor="#"+x.hilite});z.on("mouseout",function(){z.get(0).style.color="#"+x.front;this.style.borderColor="#"+x.front});E=new Invodo.Dom(Invodo.Dom.createElement("p",{innerHTML:G.subtext,"class":"invodo-carousel-item-subtext"}));E.css({color:"#"+x.back,"font-size":"10px",left:"8px",opacity:"0.7",position:"relative",margin:"0",padding:"0 6px 0 0","line-height":"1"});E.on("mouseover",function(){y.get(0).style.borderColor="#"+x.hilite});var C=(G&&G.openInNewWindow&&G.openInNewWindow=="true")?"_blank":"_self";y=new Invodo.Dom(Invodo.Dom.createElement("a",{target:C,href:G.action}));y.css({border:"1px solid #"+m,display:"block",clear:"both",cursor:"pointer","min-height":D+"px","text-decoration":"none"});y.on("mouseover",function(){z.get(0).style.color="#"+x.hilite;A.get(0).style.borderColor="#"+x.hilite;this.style.borderColor="#"+x.hilite});y.on("mouseout",function(){z.get(0).style.color="#"+x.back;A.get(0).style.borderColor="#"+x.front;for(var I=0;I<r.length;I++){H.getDom().style.borderColor="#"+m}});A=new Invodo.Dom(Invodo.Dom.createElement("img"));A.css({msInterpolationMode:"bicubic",border:"none",cursor:"pointer","float":"left",height:"auto",margin:"3px",width:"125px"});A.once("load",function(){A.on("mouseover",function(){y.get(0).style.borderColor="#"+x.hilite});A.on("mouseout",function(){z.get(0).style.color="#"+x.front});y.prepend(A.get(0))});A.get(0).src=G.thumbnail;y.append(z.get(0));y.append(E.get(0));var F=new Invodo.Dom(Invodo.Dom.createElement("br",{style:"clear:both"}));y.append(F.get(0));H.getDom=function(){return y.get(0)}};k=Invodo.Dom(Invodo.Dom.createElement("div",{id:c+"_Content"}));r=h.getItems();var q={front:h.getBackColor(),back:h.getFrontColor(),hilite:h.getSecondColor()};for(var s=0;s<r.length;s++){var u=new v(s,r[s],q);k.append(u.getDom());(function(x){var y=r[x];new Invodo.Dom(u.getDom()).on("click",function(){Invodo.Module.get("logger").log("Invodo.CarouselItem","ivsClick",{item:y.durableId,index:x,action:y.action,pod:h.getPodId()})})})(s)}a.append(k.get(0));d.append(a.get(0))};o.resize=function(r,q){if(a){if(r){a.get(0).style.width=r+"px"}}}};Invodo.Src.Widget.InPlayer=function(v,g,A,z,S,h,B,V,X,ae){var ak=Invodo.getAffiliateConfig();var O=!Invodo.Env.browser.ie;if(ak&&"videoPlayerPreference" in ak&&ak.videoPlayerPreference.toLowerCase()=="html5"&&O){var c={};c.parentDomId=v;c.widgetId=g;c.podId=A;c.mpd=z;c.mode=S;c.listensTo=h;c.autoplay=V;c.logoUrl=X;return new Invodo.Src.Widget.Astro(c)}var Q=g;var aj=v;var an=z||"";var o=A||"";var l=[];var j;var au=null;var R={};var i=true;var G=270;var d=480;var r=Invodo.Env.html5Video.supported;var al;var U;var af=true;var ag=null;var ah="InvodoFlashPlayer_"+Q;var P=Invodo.SWF.hasVersion([10,1]);var s;var n;var y="InvodoInPlayer_"+Q;var u="//e.invodo.com/4.0/fl/inplayer.swf";var a;var k=[];var Y=Invodo.Overlay;var D=0;var aq;var Z=this;var ax="";var K=null;var J="inplayer";var at=false;var E=null;var ac=0;var e;if(h){if(typeof h=="string"){k=h.split(",")}else{k=h}}if(S===undefined){S="embedded"}else{if(typeof S==="string"){if((S!=="overlay")&&(S!=="embedded")){return false}}else{if(typeof S==="object"){if(S.hasOwnProperty("name")&&S.name==="overlay"){U=(S.hasOwnProperty("overlayWidth"))?S.overlayWidth:undefined;al=(S.hasOwnProperty("overlayHeight"))?S.overlayHeight:undefined}S="overlay"}}}if(typeof V!=="boolean"){V=(S==="overlay")}if(B){u=B}if(o||an){Invodo.Pod.load({pod:o,mpd:an,widgetId:Q},function(ay){w(ay)})}function ad(){if(ab("inPlayerIsDomReady")){clearInterval(au);F("playerReady")}}function W(aG){var az=Invodo.getAffiliateConfig();var aA=parseInt(az.height);var ay=parseInt(az.width);var aF=aG.config.carousel.items;var aE=new Invodo.Dom(document.getElementById(aj));var aJ=document.getElementById(y);var aO=G;var aH=d;var aB="";if(S==="overlay"){Y.options({affiliateColor:R.config.backcolor||"000000",affiliateLogo:X});aB="relative"}else{aO=parseInt(aE.css("height"),10);aH=parseInt(aE.css("width"),10);aB="static"}var aD="100%";var aC="100%";if(aO===0||isNaN(aO)||aO===(null||"")){aO=al||aA||G;aD=aO+"px";aH=U||ay||d;aC=aH+"px"}n=new Invodo.Dom(Invodo.Dom.createElement("div",{id:y,style:"position:"+aB+";height:"+aD+";width:"+aC}));if(S==="embedded"){n.appendTo(aE)}else{n.appendTo(document.body)}var aL=Invodo.getAffiliateConfig();if("seoStructData" in aL){if(aL.seoStructData=="schema.org/microdata"){n.get(0).setAttribute("itemprop","video");n.get(0).setAttribute("itemscope","itemscope");n.get(0).setAttribute("itemtype","http://schema.org/VideoObject");seoStructDataTags=Invodo.SEO.getSeoStructDataTags(o);n.get(0).innerHTML=seoStructDataTags}}var aM=(aF&&aF.length&&aF.length>0)?260:0;var aK=S==="embedded"?aH-aM:aH;if(S=="overlay"){n.get(0).style.display="none"}var aI=y+"_LeftContainer";a=new Invodo.Dom(Invodo.Dom.createElement("div",{id:aI,style:"float:left;position:relative;height:100%;width:100%"}));a.appendTo(n);N(a);if(aF&&aF.length>0){var aN=y+"_RightContainer";aq=new Invodo.Dom(Invodo.Dom.createElement("div",{id:aN,style:"float:left;position:relative;height:100%;width:260px;"}));aq.appendTo(n);var aP=aG.config.carousel.title||"";j=new Invodo.Src.Widget.Carousel(aN,aF,R.config,aP,o||Invodo.Pod.getByMpd(an).pod);if(S=="embedded"){if(j&&j.render){j.render()}}}if(S=="embedded"){a.get(0).style.width=am().left+"%";if(aq){aq.get(0).style.width=am().right+"%"}}if(Invodo.Env.browser.engine==="mozilla"){styles={"object, embed, video":{outline:"none !important"}};Invodo.Dom.addCSS(styles)}}function N(ay){ag=t();if(ag&&S==="embedded"){return}if(P){K=new Invodo.SWF({url:u,attrs:{id:ah},flashvars:{widgetId:Q,autoPlay:V}})}if(S==="embedded"){if(P){ag=K.embed(ay.get(0))}else{if(r){av();if(V&&I()){s.play()}}else{T(ay)}}if(j&&j.render){j.render()}L()}}function T(aA){var ay=aA.get(0);var az=R.frames[0].encodings[0].width||"480";ay.style.width=az+"px";message=new Invodo.Dom(Invodo.Dom.createElement("div",{id:y+"_Message",style:"float:left;position:relative;height:100%;width:"+az+"px;background:#000;color:#FFF"}));message.get(0).innerHTML="<br /><br /><p style='text-align:center;'>The Adobe Flash Player is required for video playback.<br /><a target='_blank' style='color:#FFF' href='http://get.adobe.com/flashplayer/'>Get the latest Flash Player</a></p>";message.appendTo(ay)}function av(){if(s){return}var aD=R.frames[0].encodings[0].http.replace(/.*?:/g,"");var aC=R.frames[0].previewUrl.replace(/.*?:/g,"");var aF=R.frames[0].durableId;var aE=o||Invodo.Pod.getByMpd(an).pod,aB=Invodo.Pod.getExperimentData(aE).branch;if(S=="overlay"){var aA=R.frames[0].encodings[0];var az=a.get(0).style;az.height=aA.height+"px";az.width=aA.width+"px";Y.on("resize",function(aG,aH){setTimeout(function(){if(j){aG-=260}a.css({height:aH+"px",width:aG+"px"})},5)})}var ay=Invodo.Lang.mix({},R,{});if(ae){ay.config.chromelessmode=ae}s=new Invodo.Src.Widget.Html5Video(y+"_LeftContainer",Q+"_HTML5",aD,aC,ay.config);F("playerReady");Invodo.Lang.forEach(["webkitendfullscreen","webkitbeginfullscreen","webkitfullscreenchange","videoStart","videoComplete","podStart","podComplete","ctaClick","timePlayed","videoPause","videoUnpause","timeUpdate"],function(aH,aG){s.on(aG,function(aI){aI=aI||{};aI.pod=aB;aI.fr=aF;if(!("tm" in aI)){aI.tm=s.getTime();aI.position=s.getPosition();aI.duration=s.getDuration()}if(aG==="videoStart"){aI.vc="http";aa()}F(aG,aI);if(aG!="timeUpdate"){f(aG,aI)}})})}function H(){if(Z.getParentDomId()){var ay=document.getElementById(Z.getParentDomId());if(ay&&ay.innerHTML){ay.innerHTML=""}}}function ar(ay){var az=[].slice.call(arguments,1);function aA(aB){return aB}setTimeout(function(){var aC=false;try{ag=t();if(ag){aC=ag[ay].apply(ag,az)}}catch(aB){}finally{aA(aC)}},10)}function ab(ay){var az=[].slice.call(arguments,1);var aB=false;try{ag=t();if(ag){if(az.length){aB=ag[ay].apply(ag,az)}else{aB=ag[ay].apply(ag,[])}}else{if(ay==="inPlayerIsStopped"){aB=true}}}catch(aA){}finally{return aB}}function t(){var ay=null;try{if(ah){ay=document.getElementById(ah)}}catch(az){}return ay}function w(ay){var az=Invodo.getAffiliateConfig();o=ay.pod;Invodo.SEO.setSeoStructMetaTags(o);ay=Invodo.Lang.mix({},ay);R.frames=ay.config.frames;R.config=az;R.config.mode=S;W(ay);if(Z.onpodload){Z.onpodload(ay.pod)}}function ap(aG){if(Y){var aB=260;var aD;var aC;var aA;var ay=R.frames;var aH;var az;var aF;var aI=aG.fr;for(var aE=0;aE<ay.length;aE++){aA=ay[aE];aH=aA.durableId;if(aH==aI){az=al||parseInt(aG.h);aF=U||parseInt(aG.w);if(j){aF+=aB}Y.resize(aF,az)}}}}function am(){var ay=document.getElementById(y);var aB=new Invodo.Dom(ay).width()||d;var az=0;var aA=0;if(aq){aA=(260/aB).toFixed(2)*100;az=100-aA}else{az=100;aA=0}return{left:az,right:aA}}function q(aD){var aC=Invodo.getAffiliateConfig();var aA=parseInt(aC.height);var aB=parseInt(aC.width);var az=0;var aE=0;var aH=document.getElementById(y);var aG;var ay;if(Invodo.Env.screen.mode=="standard"){aG=Invodo.Dom(aH).height()||G;ay=Invodo.Dom(aH).width()||d}else{aG=G;ay=d;if(j){ay+=260}}function aF(){if(aq){aq.get(0).style.width=am().right+"%";a.get(0).style.width=am().left+"%"}}if(S==="overlay"){aF();Y.on("resize",function(aI,aJ){if(j){aI-=260}a.css({height:aJ+"px",width:aI+"px"});aF()});Y.resize(ay,aG)}else{if(aq){a.get(0).style.width=am().left+"%";aq.get(0).style.width=am().right+"%"}else{a.get(0).style.width=am().left+"%"}if(j&&j.resize){j.resize(null,aG-20)}}ax="playing"}function aa(){if(at===false){at=true;m()}}function M(){var aA=o||Invodo.Pod.getByMpd(an).pod,az=Invodo.Pod.getExperimentData(aA).branch;var ay=Invodo.Lang.mix({},R,{podId:az});b(ay)}function aw(ay){if(ay===true){Y.options({closeOnEscape:false})}else{Y.options({closeOnEscape:true});try{t().blur()}catch(az){}}}Z.flashJsTest=function(ay){ax="initializing";return ay};Z.flashObject=function(az,ay){switch(az){case"videoStart":aa();break;case"playerReady":M();break;case"playerRunning":q();break;case"playerResize":ap(ay);break;case"bitrateSelected":ap(ay);break;case"fullScreenToggle":aw(ay.st);break;case"timeUpdate":break;default:break}if(az!=="playerResize"&&az!=="timeUpdate"){f(az,ay)}if(az=="playerReady"){au=setInterval(ad,10)}else{F(az,ay)}};Z.getAutoplay=function(){return V};Z.getId=function(){return Q};Z.getInfo=function(){var ay;if(P){ay=ab("inPlayerGetInfo")}else{if(s){ay=s.getInfo()}else{ay={}}}return ay};Z.getListensTo=function(){return k};Z.getMode=function(){return S};Z.getMpd=function(){return an};Z.getParentDomId=function(){return aj};Z.getPodId=function(){return o};Z.getTime=function(){var ay=null;if(s){ay=s.getTime()}else{ay=ab("inPlayerGetTime")}return ay};Z.getDuration=function(){var ay=null;if(s){ay=s.getDuration()}else{ay=ab("inPlayerGetDuration")}return ay};Z.getType=function(){return J};function ao(ay){switch(ay){case"videoComplete":playing=false;break;default:break}}Z.hide=function(){if(S=="overlay"){if(Y&&Y.close){Y.close()}}else{n.css("display","none")}if(Z.isPlaying()){Z.pause()}return Z};Z.isMuted=function(){var ay=false;if(P){ay=ab("inPlayerIsMuted")}else{if(r){ay=s.isMuted()}else{}}return ay};function I(){return Invodo.Env.browser.platform.indexOf("android")<0}Z.isPlaying=function(){var ay=false;if(P){ay=ab("inPlayerIsPlaying")}if(s){ay=s.isPlaying()}return ay};Z.isPaused=function(){var ay=false;if(P){ay=ab("inPlayerIsPaused")}if(s){ay=s.isPaused()}return ay};Z.isPlaylistDisplayed=function(){return ab("inPlayerIsPlaylistDisplayed")};Z.isRatingDisplayed=function(){return ab("inPlayerIsRatingDisplayed")};Z.isSharingDisplayed=function(){return ab("inPlayerIsSharingDisplayed")};Z.isStopped=function(){var ay=true;if(P){return ab("inPlayerIsStopped")}if(r){return s.isStopped()}};Z.loadVideo=function(ay){ar("inPlayerLoadVideo",ay)};function f(aB,aA){var az=Invodo.Pod.getExperimentData(o||Invodo.Pod.getByMpd(an).pod),ay=az.branch;if(!aA){aA={}}if(aA.mark){aA.tm=aA.mark;delete aA.mark}if(aA.method){aA.vc=aA.method;delete aA.method}if(aB==="ctaClick"&&az){aA.ex=az.experiment+"/"+az.branch}if(az){if("branch" in az){aA.pod=az.branch}}if(Invodo.Module.get("logger")){Invodo.Module.get("logger").log(Q,aB,aA)}}function L(){var ay=o||Invodo.Pod.getByMpd(an).pod,aB={pn:Invodo.getPageName(),pod:ay},az=Invodo.Pod.getExperimentData(ay);if(az.experiment){aB.ex=az.experiment+"/"+az.branch}if(S==="embedded"){var aA=new Invodo.Dom(t());ac=0;e=setInterval(function(){ac++;if((aA.clientHeight!==0)||(ac>20)){aB.vis=aA.visibleInViewPort();f("ctaView",aB);clearInterval(e)}},100)}}Z.playButtonClick=function(){ar("inPlayerPlayButtonClick")};Z.ratingButtonClick=function(){ar("inPlayerRatingButtonClick")};Z.pause=function(){if(Z&&Z.pauseVideo){Z.pauseVideo()}};Z.pauseVideo=function(){if(P){ar("inPlayerPauseVideo")}else{if(s){s.pause()}else{Invodo.Console.log("No HTML5 or Flash support")}}};Z.play=function(){if(P){ar("inPlayerPlayVideo")}else{if(s){s.play()}else{Invodo.Console.log("No HTML5 or Flash support")}}};function ai(ay){ar("inPlayerLoadVideo",ay)}function m(){var aB=Invodo.Pod.getExperimentData(o||Invodo.Pod.getByMpd(an).pod),aA=aB.branch;F("podStart");var az=Invodo.Module.get("logger");var ay=az.log(Q,"podStart",{pod:aA})}Z.remove=function(){if(S=="overlay"){if(Y&&Y.close){Y.close()}}H()};function F(ay,aA){ao(ay);for(var az=0;az<l.length;az++){if(l[az].eventName===ay){(function(aB,aD){var aC=aD||{};setTimeout(function(){aC.widgetId=Q;aC.eventName=ay;try{l[aB].callback(aC)}catch(aE){}},5)})(az,aA)}}}function b(ay){if(ae){ay.config.chromelessmode=ae}ar("inPlayerSetConfig",ay)}function C(){E=setInterval(logTime,1000)}function x(){clearInterval(E);E=null}Z.receiveUpdate=function(aA){for(var az in k){var ay=k[az];if(aA.widgetId==ay&&aA.data=="show"){Z.show()}}};Z.registerEventListener=function(ay,az){l.push({eventName:ay,callback:az});return Z};Z.unregisterEventListener=function(ay,aA){for(var az=0;az<l.length;az++){if(l[az].eventName===ay&&l[az].callback===aA){l.splice(az,1)}}return Z};Z.replay=function(){ar("inPlayerReset");ar("inPlayerLoadVideo",R)};Z.reset=function(){if(P){ar("inPlayerReset")}else{if(r){s.reset()}else{}}};Z.setConfig=function(ay){ar("inPlayerSetConfig",ay)};Z.setParent=function(aA){aj=aA;var ay=document.getElementById(y);var az=document.getElementById(Z.getParentDomId());az.appendChild(ay)};Z.setParentDomId=function(ay){aj=ay};Z.setMode=function(ay){ay=ay};Z.setStyle=function(az,ay){ag=t();ag.style[az]=ay};Z.setTime=function(ay){if(ay===undefined||ay===null){ay=0}if(s){s.setTime(ay)}else{ar("inPlayerSetTime",ay)}};Z.show=function(){var az;var aC;if(R&&R.frames&&R.frames.length>0){var aB=R.frames[0].defaultEncoding||undefined;if(aB){Invodo.Lang.forEach(R.frames[0].encodings,function(aD){if(R.frames[0].encodings[aD].id===aB){az=R.frames[0].encodings[aD].height;aC=R.frames[0].encodings[aD].width}})}az=az||parseInt(R.frames[0].encodings[0].height);aC=aC||parseInt(R.frames[0].encodings[0].width)}else{az=G;aC=d}if(S==="embedded"){n.css("display","block")}else{var ay=al?al:az;var aA=U?U:aC;Y.open(aA+(j?260:0),ay,function(aD){n.appendTo(aD);n.get(0).style.display="block";Y.once("close",function(){F("close")});if(P){try{K.embed(a.get(0));Y.once("beforeclose",function(){Z.stop();K.dispose()})}catch(aE){}}else{if(r){av()}else{T(a)}if(s&&V&&I()){s.play()}Y.once("beforeclose",function(){if(s){s.getContainer().remove();s=null}})}try{if(j&&j.render){j.render();j.resize(null,height)}}catch(aE){}})}};Z.stop=function(){if(P){ar("inPlayerStop")}else{if(s){s.stop()}else{Invodo.Console.log("No HTML5 or Flash support")}}};Z.muteToggle=Z.mute=function(){if(P){ar("inPlayerMuteToggle")}else{if(s){s.mute()}else{Invodo.Console.log("No HTML5 or Flash support")}}};Z.resizeOverlay=function(az,ay){if((S==="overlay")&&(Y)){al=ay;U=az;Y.resize(az,ay)}}};Invodo.Src.Widget.InteractivePlayer=function(s,ai,I,aI,M,o,av,r,ap,m,ab){if(M){M=(M[M.length-1]=="/")?M:M+"/"}if(r==undefined){r=true}var aG=600;var A=[];var aC=this;Invodo.EventDispatcher(aC);var E="Invodo_InteractivePlayer_View_"+ai;aC.firstRun=true;var ax=M?M+"media/":Invodo.getAffiliateConfig().imageBase;var F=M?M:"//e.invodo.com/";var f=M?M:"http://e.invodo.com/";var y=new Array();var at;var T="Invodo_InteractivePlayer_View_Layout_"+ai;var H=null;var g="InvodoInteractivePlayerControls_"+ai;var h="InvodoInteractiveSpinInstructions";var au=g+"_background";var C=g+"_autoSpin";var aq=g+"_zoomIn";var aw=g+"_zoomOut";var ay=new Array();var aj;var aH=s||null;var a;var n;var aE=1;var ae="InteractivePlayer";var v;var S=[];var aK=[];var q=false;var i=false;var ag=false;var e=true;var Y=null;var w=false;var d={wait:{height:30,src:F+"4.0/i/wait30.gif",width:30},cursor_hand_closed:{height:21,src:F+"4.0/i/cursor_hand_closed.png",width:20},cursor_hand_open:{height:25,src:F+"4.0/i/cursor_hand_open.png",width:19},cursor_hand_point:{height:26,src:F+"4.0/i/cursor_hand_point.png",width:20},cursor_pan:{height:36,src:F+"4.0/i/cursor_pan.png",width:36},cursor_zoom_in:{height:34,src:F+"4.0/i/cursor_zoom_in.png",width:33},cursor_zoom_out:{height:34,src:F+"4.0/i/cursor_zoom_out.png",width:33},icn_pan_instructions:{height:115,src:F+"4.0/i/icn_pan_instructions.png",width:130},icn_reset:{height:25,src:F+"4.0/i/icn_reset.png",width:35},icn_spin:{height:25,src:F+"4.0/i/icn_spin.png",width:29},icn_spin_instructions:{height:60,src:F+"4.0/i/icn_spin_instructions.png",width:175},icn_zoom_in:{height:25,src:F+"4.0/i/icn_zoom_in.png",width:24},icn_zoom_out:{height:25,src:F+"4.0/i/icn_zoom_out.png",width:24}};if(I||aI){Invodo.Pod.load({pod:I,mpd:aI},function(aS){N(aS)})}Invodo.PublishSubscribe.subscribe("spinning",function(aS){Q.apply(aC,aS)});Invodo.PublishSubscribe.subscribe("panning",function(aS){c.apply(aC,aS)});Invodo.PublishSubscribe.subscribe("doneSpinning",function(aS){b.apply(aC,aS)});Invodo.PublishSubscribe.subscribe("donePanning",function(aS){R.apply(aC,aS)});aC.data=function(){};aC.e=function(){n.e()};function c(){ag=true;B()}function Q(){i=true;B()}function R(){ag=false;if(!e){P()}}function b(){i=false;if(!e){P()}}function K(){e=true;if(r){B()}}function aN(){e=false;if(r&&!i&&!ag){P()}}function U(){Invodo.PublishSubscribe.subscribe("modelIsHome",function(aS){G.apply(aC,aS)});aC.home();aC.stop()}function G(){ar();V()}function ar(){Invodo.PublishSubscribe.remove("zoomOutDone",function(aS){U.apply(aC,aS)})}function V(){Invodo.PublishSubscribe.remove("modelIsHome",function(aS){G.apply(aC,aS)})}function k(){setTimeout(function(){for(var aS=0;aS<y.length;aS++){y[aS].flash()}},500)}aC.getHotspot=function(aS){return y[aS]};aC.getId=function(){return ai};aC.getNumHotspots=function(){return y.length};aC.getPhoto3d=function(){return n};aC.getType=function(){return ae};function N(aS){an(aS);if(aC.onpodload){aC.onpodload(aS.pod)}}aC.hide=function(){aC.setStyle("display","none")};function D(){for(var aS=0;aS<y.length;aS++){var aT=y[aS];aT.hide()}}function j(){v.hide()}aC.home=function(){n.home()};function ah(){var aT=parseInt(a.style.height);var aS=a.clientHeight?a.clientHeight:(a.offsetHeight||0);return aT?aT:aS}function aR(){var aS=parseInt(a.style.width);var aT=a.clientWidth?a.clientWidth:(a.offsetWidth||0);return aS?aS:aT}function O(aS){aa("cursor_hand_point",aS.target.id)}function x(aS){if(aS.target.id===au){aa("default",aS.target.id)}}function aF(aS){if(aS.target.id===g){aa("cursor_zoom_in",aS.target.id)}}function z(aS){if(aS.target.id===g){aa("cursor_zoom_out",aS.target.id)}}function an(aY){I=aY.pod;if(aY.config.interactive[0].bigImages){if(aY.config.interactive[0].bigImages.length>0){w=true}}a=document.getElementById(aH)||null;if(a){var a4=ah();var a8=aR();var aW=(a8>a4)?a4:a8;aE=aW/aG;Y=document.createElement("div");Y.id=E;Y.style.position="relative";Y.style.height="100%";Y.style.width="100%";W("mouseenter",aN,a);W("mouseleave",K,a);W("touchstart",aM,a);a.appendChild(Y);var aX=document.createElement("div");aX.id=T;aX.style.position="relative";Y.appendChild(aX);aY=L(aY);at=aY.config.interactive[0];aj=at.hotspots.length;n=new Invodo.Src.Widget.InteractivePlayer.Photo3d();n.init(T,aH,aY.pod,d,at,aE,ai,o,av,ap,m,a4,a8,ab);n.registerObserver(aC);for(var a0=0;a0<aj;a0++){var a7=at.hotspots[a0];var aT=new Invodo.Src.Widget.InteractivePlayer.Hotspot();aT.init(ai,a0,a7,I,T,aE,n);aT.registerEventListener("click",af);aT.hide();y.push(aT)}H=document.createElement("div");H.id=g;H.style.textAlign="center";H.style.width="100%";H.style.bottom="3%";H.style.position="absolute";var aV="ontouchstart" in document.documentElement;if(aV&&r){H.style.display="block";H.style.opacity=1;H.style.overflow="auto";H.style.filter="alpha(opacity=100)";setTimeout(function(){B()},4000)}else{H.style.display="none";H.style.opacity=0;H.style.overflow="auto";H.style.filter="alpha(opacity=0)"}Invodo.PublishSubscribe.subscribe("modelIsHome",function(a9){aD.apply(aC,a9)});Invodo.PublishSubscribe.subscribe("findingHome",function(a9){u.apply(aC,a9)});W("mouseover",aF,H);aX.appendChild(H);var aU=document.createElement("div");aU.id=au;aU.style.borderRadius="5px";aU.style.MozBorderRadius="5px";aU.style.WebkitBorderRadius="5px";aU.style.background="rgb(255, 255, 255)";var aS=document.createElement("div");aS.style.cssText="background-color:rgba(150,255,150,.5)";if(!!~(""+aS.style.backgroundColor).indexOf("rgba")){aU.style.background="rgba(255, 255, 255, 0.6)"}aU.style.width="auto";aU.style.display="inline-block";W("mouseover",x,aU);H.appendChild(aU);var a6=new Image();a6.id=g+"_autoSpin";W("click",ak,a6);W("mouseover",O,a6);a6.src=d.icn_spin.src;a6.style.width="auto";a6.style.margin="20px";aU.appendChild(a6);if(w){var a3=new Image();a3.id=g+"_zoomIn";W("mouseover",O,a3);W("click",aC.zoomIn,a3);a3.src=d.icn_zoom_in.src;a3.style.width="auto";a3.style.margin="20px";aU.appendChild(a3);var a2=new Image();a2.id=g+"_zoomOut";W("mouseover",O,a2);a2.src=d.icn_zoom_out.src;a2.style.width="auto";a2.style.margin="20px";a2.style.opacity="0.6";a2.style.overflow="auto";aU.appendChild(a2)}var a1=new Image();a1.id=g+"_reset";W("mouseover",O,a1);W("click",aB,a1);a1.src=d.icn_reset.src;a1.style.width="auto";a1.style.margin="20px";aU.appendChild(a1);D();v=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer();v.init(ai,at.video,at.videoPlayer,aY.pod,aE,f);v.registerObserver(aC);v.registerParent(T);v.position(at.videoPlayer.x,at.videoPlayer.y);try{var aZ={pod:I,pn:Invodo.getPageName(),sid:ai,playertype:"Spin"};Invodo.Module.get("logger").log(ai,"playerView",aZ);aC.fire("playerView",aZ)}catch(a5){}Z("playerReady")}}function aD(){W("click",X,H)}function u(){l("click",X,H)}function X(aS){if(aS.target.id===g){if(n.getZoom()>0){aC.zoomOut()}else{aC.zoomIn()}}}function ak(){if(n.isSpinning()){aC.stop()}else{aC.spin("e");var aS={pod:I,clip:null,playertype:"Spin",clktype:"Spin",clktgt:"Spin"};Invodo.Module.get("logger").log(ai,"userClick",aS);aC.fire("userClick",aS)}}function aB(){var aS={pod:I,clip:null,playertype:"Spin",clktype:"Reset",clktgt:"0,0"};Invodo.Module.get("logger").log(ai,"userClick",aS);aC.fire("userClick",aS);if(n.getZoom()>0){Invodo.PublishSubscribe.subscribe("zoomOutDone",function(aT){U.apply(aC,aT)});aC.zoomOut()}else{U()}}function W(aS,aU,aT){if("addEventListener" in aT){aT.addEventListener(aS,aU,false)}else{if("attachEvent" in aT){aT.attachEvent("on"+aS,aU)}else{}}}function aQ(){var aS=document.getElementById(g);if(aS.style.display==="none"){return false}return true}function aM(){aA()}function aA(){if(!aQ()){P()}for(var aT=0;aT<S.length;aT++){clearTimeout(S[aT])}var aS=setTimeout(function(){B()},4000);S.push(aS)}function l(aS,aU,aT){if("removeEventListener" in aT){aT.removeEventListener(aS,aU)}else{if("attachEvent" in aT){aT.detachEvent("on"+aS,aU)}else{}}}function aa(aS,aT){n.callSetCursorIcon(aS,aT)}function J(aS){n.callMouseDown(aS)}aC.isHome=function(){return n.isHome()};aC.listensTo=function(aS){return ai};aC.n=function(){n.n()};aC.ne=function(){n.ne()};aC.notify=function(aT,aS){switch(aT){case"STOPPED":j();break;case"PLAYING":af();break;default:}switch(aS){case"ready":if(n.isHome()){am()}else{D()}j();break;case"goinghome":case"spinning":D();j();break;case"home":aC.firstRun=false;am();break;case"zoomIn":t();Invodo.PublishSubscribe.subscribe("zoomInDone",function(aU){ac.apply(aC,aU)});break;case"zoomOut":aP();Invodo.PublishSubscribe.subscribe("zoomOutDone",function(aU){aL.apply(aC,aU)});break;default:}};aC.remove=function(){ad()};aC.getParentDomId=function(){return aH};function ad(){if(aC.getParentDomId()){var aS=document.getElementById(aC.getParentDomId());if(aS&&aS.innerHTML){aS.innerHTML=""}}}function az(aS,aU){for(var aT=0;aT<ay.length;aT++){var aW=ay[aT];var aV=aW[0];var aX=aW[1];if(aS==aV){}}}aC.nw=function(){n.nw()};function L(aX){var aU=aX.config;var a1=(aU&&aU.interactive&&aU.interactive[0])?aU.interactive[0]:null;if(a1){var a0=a1.images;for(var aY=0;aY<a0.length;aY++){var aZ=a0[aY];a0[aY]=ax+aZ}if(a1.bigImages){if(a1.bigImages.length>0){var aV=a1.bigImages;for(var aY=0;aY<aV.length;aY++){var aZ=aV[aY];aV[aY]=ax+aZ}}}if(a1.videos&&!a1.video){a1.video=a1.videos}var aW=a1.video;for(var aY=0;aY<aW.length;aY++){var aT=aW[aY];var aS=aT.http;aS=(aS[0]=="/")?aS.substring(1):aS;aW[aY].http=ax+aS}}return aX}aC.receiveUpdate=function(aS){};aC.registerEventListener=function(aS,aT){A.push({eventName:aS,callback:aT});return aC};aC.registerObserver=function(aS){n.registerObserver(aS)};function Z(aS){for(var aT=0;aT<A.length;aT++){if(A[aT].eventName===aS){(function(aU){setTimeout(function(){A[aU].callback({widgetId:ai,eventName:aS})},5)})(aT)}}}aC.s=function(){n.s()};function aO(aS){return Math.round(parseInt(aS)*aE)}aC.sendUpdate=function(aS){};aC.setParent=function(aT){aH=aT;var aS=document.getElementById(aH);try{aS.appendChild(Y)}catch(aU){Invodo.Console.log("Could not move InteractivePlayer: new parent node not found or appendChild not supported.")}};aC.setStyle=function(aT,aS){a.style[aT]=aS};aC.show=function(){aC.setStyle("display","block")};function am(){for(var aS=0;aS<y.length;aS++){var aT=y[aS];aT.show()}}function af(aS){v.play(aS)}aC.se=function(){n.se()};aC.stop=function(){n.stop();v.stop();return true};aC.sw=function(){n.sw()};aC.spin=function(aS){n.spin(aS)};aC.w=function(){n.w()};function B(){if(r){var aS=document.getElementById(g);ao(aS)}}function P(){if(r){var aS=document.getElementById(g);al(aS);aS.style.display="block"}}function aJ(){for(var aS=0;aS<aK.length;aS++){clearInterval(aK[aS])}}function ao(aT){if(!q){if(aT.style.opacity>0){q=true;var aS=1;var aU=setInterval(function(){if(aS<=0.1){aS=0;clearInterval(aU);aT.style.display="none";q=false;aJ()}aT.style.opacity=aS;aT.style.filter="alpha(opacity="+aS*100+")";aS-=aS*0.1},10);aK.push(aU)}}}function al(aT){if(aT.style.opacity<1){q=false;var aS=0;aJ();var aU=setInterval(function(){if(aS>=1){aS=1;clearInterval(aU)}aT.style.opacity=aS;aT.style.filter="alpha(opacity="+aS*100+")";aS+=0.1},20);aK.push(aU)}}aC.disableDashboardButton=function(aT,aU){var aS=document.getElementById(aU);l("click",aT,aS);aS.style.opacity="0.6";aS.style.overflow="auto"};aC.enableDashboardButton=function(aT,aU){var aS=document.getElementById(aU);W("click",aT,aS);aS.style.opacity="1";aS.style.overflow="auto"};function t(){aC.disableDashboardButton(ak,C);aC.disableDashboardButton(aC.zoomIn,aq);aC.enableDashboardButton(aC.zoomOut,aw)}function aP(){aC.enableDashboardButton(ak,C);aC.disableDashboardButton(aC.zoomOut,aw);aC.enableDashboardButton(aC.zoomIn,aq)}function ac(){aa("cursor_zoom_out",g);W("mouseover",z,H);l("mouseover",aF,H);Invodo.PublishSubscribe.remove("zoomInDone",function(aS){ac.apply(aC,aS)})}function aL(){aa("cursor_zoom_in",g);W("mouseover",aF,H);l("mouseover",z,H);Invodo.PublishSubscribe.remove("zoomOutDone",function(aS){aL.apply(aC,aS)})}aC.zoomIn=function(){if(n.getZoom()>0){return}n.stop();n.zoomIn();t();Invodo.PublishSubscribe.subscribe("zoomInDone",function(aT){ac.apply(aC,aT)});var aS={pod:I,clip:null,playertype:"Spin",clktype:"Zoom",clktgt:"1"};Invodo.Module.get("logger").log(ai,"userClick",aS);aC.fire("userClick",aS)};aC.zoomOut=function(aU){var aT=false;if(aU===undefined){aT=true}if(n.getZoom()<1){return}n.zoomOut();aP();Invodo.PublishSubscribe.subscribe("zoomOutDone",function(aV){aL.apply(aC,aV)});if(!aT){var aS={pod:I,clip:null,playertype:"Spin",clktype:"Zoom",clktgt:"0"};Invodo.Module.get("logger").log(ai,"userClick",aS);aC.fire("userClick",aS)}}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer=function(){var f;var d;var c;var b=this;var e;b.hide=function(){c.hide()};b.init=function(j,h,g,i,l,k){e=document.createElement("video");f=null;if(e&&e.canPlayType){f=e.canPlayType("video/mp4")}if(f){c=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video(j,h,g,i,l,k)}else{c=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo(j,h,g,i,l,k)}d=new Array();c.registerObserver(b)};b.notify=function(g){a(g)};function a(j){for(var h=0;h<d.length;h++){var g=d[h];if(g&&"notify" in g){g.notify(j)}}}b.play=function(g){c.play(g)};b.position=function(g,h){c.position(g,h)};b.registerObserver=function(g){d.push(g)};b.registerParent=function(g){c.registerParent(g)};b.stop=function(){c.stop()}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo=function(f,d,l,c,b,i){var h=new Array();var g=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Model(f,d,l,c,b,i);var e=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Control(g);var j=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.View(g,e);var k=this;g.registerObserver(k);k.hide=function(){j.hide();g.stop()};k.notify=function(m){a(m)};function a(o){for(var n=0;n<h.length;n++){var m=h[n];if(m){m.notify(o)}}}k.play=function(m){g.play(m)};k.registerObserver=function(m){h.push(m)};k.registerParent=function(m){j.registerParent(m)};k.show=function(){j.show()};k.stop=function(){g.stop()};k.unregisterParent=function(){j.unregisterParent()};k.position=function(m,n){g.position(m,n)}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Model=function(n,e,a,l,t,r){var h=null;var d="STARTING";var m="STOPPED";var c="PLAYING";var o=new Array();var j=this;var b=m;var s="4.0/fl/invodointeractive.swf";var g=parseInt(a.x)||0;var f=parseInt(a.y)||0;var k=parseInt(a.width)||167;var i=parseInt(a.height)||248;j.getDurableId=function(){return h.durableId||""};j.getId=function(){return n};j.getHeight=function(){return i*t};j.getPodId=function(){return l||""};j.getState=function(){return b};j.getSwfUrl=function(){return r+s};j.getVideo=function(){return h.http};j.getWidth=function(){return k*t};j.getX=function(){return g*t};j.getY=function(){return f*t};j.isPlaying=function(){if(b==c){return true}else{return false}};function q(){for(var u=0;u<o.length;u++){o[u].notify(b)}}j.play=function(v){for(var u=0;u<e.length;u++){if(e[u].durableId==v){h=e[u];b=c;q(b)}}if(b!=d){b=d;q(b)}};j.position=function(u,v){g=parseInt(u);f=parseInt(v);q()};j.registerObserver=function(u){o.push(u)};j.stop=function(){if(b!=m){b=m;q(b)}}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.Control=function(a){var c=a;var b=this;this.click=function(){var d=c.getState();switch(d){case"PLAYING":c.stop();break;default:c.stop()}}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.FlashVideo.View=function(g,i){var e=i;var d=null;var a="Invodo_FlashVideo_View_"+g.getId();var f=g;var c=null;var k=this;var b="STOPPED";var l="Invodo_FlashVideo_Object_"+g.getId();k.click=function(){e.click()};function j(){if(c){var m=document.getElementById(a);if(m){return}d=document.createElement("div");if(d){d.id=a;d.style.display="none";if(d.attachEvent){d.attachEvent("onmouseup",h)}else{if(d.addEventListener){d.addEventListener("click",h)}}var o='<object style="background:#000000;cursor:hand;cursor:pointer;" id="'+l+'" height="100%" width="100%" data="'+f.getSwfUrl()+'" type="application/x-shockwave-flash"><param name="wmode" value="opaque" /><param name="bgcolor" value="#000000" /><param name="allowscriptaccess" value="always" /><param name="movie" value="'+f.getSwfUrl()+'" /></object>';d.innerHTML=o;c.appendChild(d)}var n=document.getElementById(l);n.style.left="0px";n.style.top="0px";n.onclick=h}}k.hide=function(){d=document.getElementById(a);if(d){d.style.display="none";domVideo=document.getElementById(l);if(domVideo){domVideo.style.display="none"}domVideo=null}};k.logTime=function(m){Invodo.Module.get("logger").log("InteractivePlayer","timePlayed",{tm:m,fr:f.getDurableId(),pod:f.getPodId()})};function h(){var m=document.getElementById(a);if(m&&m.style){m.style.display="none"}e.click()}k.notify=function(m){switch(m){case"STARTING":var t=document.getElementById(a);if(t==null){j();t=document.getElementById(a)}var o=document.getElementById(l);if(o){t.style.position="absolute";t.style.height=Math.ceil(f.getHeight())+"px";t.style.width=Math.ceil(f.getWidth())+"px";t.style.left=f.getX()+"px";t.style.top=f.getY()+"px";o.style.display="block";t.style.display="block";try{var u=5;var n=0;var s=100;var q=setInterval(function(){n++;if(n>=u){clearInterval(q);return}o=document.getElementById(l);if(o&&o.playVideo){clearInterval(q);try{o.playVideo(f.getVideo())}catch(v){}}},s)}catch(r){}}break;case"STOPPED":t=document.getElementById(a);o=document.getElementById(l);if(t&&o){t.removeChild(o)}if(t){t.parentNode.removeChild(t)}b="STOPPED";break;default:}};k.registerParent=function(m){c=document.getElementById(m)};GlobalInvodoFlashVideoView=k;f.registerObserver(k)};Invodo.Src.Widget.InteractivePlayer.Hotspot=function(){var c;var g;var b;var i;var h;var a;var f;var e;var k=this;var j;k.flash=function(){j.flash()};k.getAction=function(){return h.getAction()};k.hide=function(){j.hide()};k.init=function(q,o,m,n,r,s,l){i=new Array();h=new Invodo.Src.Widget.InteractivePlayer.Hotspot.Model(q,o,m.action,m.color,m.coords,n,s);h.registerObserver(k);g=new Invodo.Src.Widget.InteractivePlayer.Hotspot.Control(h);j=new Invodo.Src.Widget.InteractivePlayer.Hotspot.View(h,g,l);j.registerParent(r)};k.onMouseOver=function(l){j.onMouseOver(l)};k.notify=function(){var l=arguments[0]||null;d(b)};function d(){for(var l=0;l<observers.length;l++){observers[l].notify(b)}}k.position=function(l,m){h.position(l,m)};k.registerEventListener=function(l,m){i.push([l,m]);j.registerEventListener(l,m)};k.registerParent=function(l){};k.scale=function(l){j.scale(l)};k.show=function(){j.show()};k.unregisterParent=function(){j.unregisterParent()}};Invodo.Src.Widget.InteractivePlayer.Hotspot.Model=function(h,j,f,g,k,e,d){this.action=f;var a=g||"";var l=parseInt(k[3])-parseInt(k[1]);this.id="InvodoHotspot_"+new Date().getMilliseconds()+"_"+j;var i=new Array();var m=this;var b=parseInt(k[2])-parseInt(k[0]);this.x=k[0];this.y=k[1];m.click=function(){c()};m.getAction=function(){return this.action};m.getColor=function(){return a};m.getHeight=function(){return l*d};m.getPodId=function(){return e};m.getId=function(){return h};m.getInstanceId=function(){return j};m.getWidth=function(){return b*d};m.getX=function(){return m.x*d};m.getY=function(){return m.y*d};function c(){for(var n=0;n<i.length;n++){i[n].notify(f)}}m.position=function(n,o){m.x=n;m.y=o;c()};m.registerObserver=function(n){i.push(n)};m.setScale=function(n){n=parseInt(n)}};Invodo.Src.Widget.InteractivePlayer.Hotspot.Control=function(a){this.click=function(b){a.click()}};Invodo.Src.Widget.InteractivePlayer.Hotspot.View=function(d,q,z){var A=navigator.userAgent.toLowerCase().indexOf("fennec")>-1;var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;var l="InvodoHotspotOff";var b="InvodoHotspotOn";var v=q;var a;var c=null;var w="Invodo_Hotspot_"+d.getInstanceId()+"_"+d.getId();var C=new Array();var j=false;var F=0;var K=null;var n=true;var h=this;var f=false;d.registerObserver(h);function r(){if(e){if(A){c.ontouchstart=G;c.ontouchend=D;c.ontouchmove=H}else{c.onclick=u}}else{if("ontouchend" in c){c.ontouchstart=G;c.ontouchend=D;c.ontouchmove=H}else{c.onclick=u}}c.onmouseover=J;c.onmouseout=k;c.onmousedown=s;c.onmousemove=y}function E(){if(K){c=document.createElement("div");c.id=w;c.style.left=d.getX()+"px";c.style.top=d.getY()+"px";c.style.height=Math.ceil(d.getHeight())+"px";c.style.width=Math.ceil(d.getWidth())+"px";if(d.getColor()!=""){c.style.backgroundColor="#"+d.getColor()}c.style.cursor="hand";c.style.cursor="pointer";c.style.opacity="0.0";c.style.filter="alpha(opacity=0.0)";c.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";c.style.position="absolute";c.style.display="none";K.appendChild(c);Invodo.Module.get("logger").log(d.getId(),"hotspotView",{pn:Invodo.getPageName(),fr:d.getAction(),pod:d.getPodId()})}}function t(L){for(var M=0;M<C.length;M++){C[0](L)}}h.flash=function(){var M=document.getElementById(d.getId());var L=0;var N=setInterval(function(){L=F+0.01;if(L>=0.1){B(0.1);clearInterval(N);var O=setInterval(function(){L=L-0.01;if(L<=0){B(0);clearInterval(O)}},50)}},10)};function s(L){j=true;if(z&&"callMouseDown" in z){z.callMouseDown(L)}}function y(L){j=false;if(z&&"callMouseMove" in z){z.callMouseMove(L)}}function J(L){if(a){a()}i()}function k(L){x()}h.hide=function(){c.style.display="none";m()};function i(L){c.className=b;if(d.getColor()!=""){c.style.backgroundColor="#"+d.getColor()}c.style.cursor="hand";c.style.cursor="pointer";c.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=10)";c.style.filter="alpha(opacity=10)";c.style.opacity="0.1";c.style.position="absolute"}h.onMouseOver=function(L){a=L};h.notify=function(L){o()};function g(L,N){for(var M=0;M<C.length;M++){var P=C[M];var O=P[0];var Q=P[1];if(L==O){Q(N)}}}function u(M){if(j){g("click",d.getAction());try{var L={pn:Invodo.getPageName(),fr:d.getAction(),pod:d.getPodId()};Invodo.Module.get("logger").log(d.getId(),"hotspotClick",L)}catch(M){}}j=false}function D(M){x();if(f){g("click",d.getAction());try{var L={pn:Invodo.getPageName(),fr:d.getAction(),pod:d.getPodId()};Invodo.Module.get("logger").log(d.getId(),"hotspotClick",L)}catch(M){}}f=false}function H(L){f=false;h.hide();z.callTouchMove(L)}function G(L){i();f=true;if(z&&"callTouchStart" in z){z.callTouchStart(L)}}h.registerEventListener=function(L,M){C.push([L,M])};h.registerParent=function(L){K=document.getElementById(L);E()};function I(){if(K&&c){K.removeChild(c)}}function m(){if("ontouchend" in c){c.ontouchstart=null;c.ontouchend=null}else{c.onclick=null}c.onmouseover=null;c.onmouseout=null}function B(M){F=M+"";var L=document.getElementById(d.getId());L.style.opacity=M+"";L.style.filter="alpha(opacity="+M+")";L.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+M+")"}h.show=function(){c.style.display="block";r()};h.unregisterParent=function(){I();K=null};function x(L){c.className=l;c.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";c.style.filter="alpha(opacity=0)";c.style.opacity="0.0"}function o(){var L=document.getElementById(d.getId());if(L){L.style.cssText="left:"+d.getX()+"px;top:"+d.getY()+"px;"}}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video=function(f,d,k,c,b){var h=new Array();var g=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Model(f,d,k,b);var e=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Control(g);var i=new Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.View(g,e,c);var j=this;g.registerObserver(j);j.hide=function(){var l=g.getState();if(l=="PLAYING"){g.stop()}i.hide()};j.notify=function(l){if(l=="PLAYING"||"STOPPED"){a(l)}};function a(n){for(var m=0;m<h.length;m++){var l=h[m];if(l){l.notify(n)}}}j.play=function(l){g.play(l)};j.position=function(l,m){g.position(l,m)};j.registerObserver=function(l){h.push(l)};j.registerParent=function(l){i.registerParent(l)};j.show=function(){i.show()};j.stop=function(){g.stop()};j.unregisterParent=function(){i.unregisterParent()}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Model=function(h,k,q,g){var r=this;var b="";var i="STOPPED";var l="PLAYING";var d=null;var o=q.height||0;var j=new Array();var a=i;var f=k;var c=q.width||0;var n=parseInt(q.x)||0;var m=parseInt(q.y)||0;r.getDurableId=function(){return d.durableId||""};r.getHeight=function(){return o*g};r.getId=function(){return h};r.getState=function(){return a};r.getVideo=function(){return b+d.http};r.getWidth=function(){return c*g};r.getX=function(){return n*g};r.getY=function(){return m*g};function e(){for(var s=0;s<j.length;s++){j[s].notify(a)}}r.play=function(t){for(var s=0;s<f.length;s++){if(f[s].durableId==t){d=f[s];a=l;e(a)}}};r.position=function(s,t){s=s;t=t;e()};r.registerObserver=function(s){j.push(s)};r.stop=function(){a=i;e(a)}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.Control=function(c){var b=c;var a=this;a.click=function(){var d=b.getState();switch(d){case"PLAYING":b.stop();break;default:}}};Invodo.Src.Widget.InteractivePlayer.VideoPlayer.Html5Video.View=function(c,a,q){var n="hotspot_off";var g="hotspot_on";var i=a;var o=null;var r="Invodo_Html5Video_Video_"+c.getId();var t=null;var j="Invodo_Html5Video_View_"+c.getId();var v="Invodo_Html5Video_Loading_View_"+c.getId();var b=null;var f="Loading";var l=null;var m=this;var h;c.registerObserver(m);function k(){if(l){t=document.getElementById(j);if(t){return}t=document.createElement("div");t.id=j;t.style.display="none";l.appendChild(t);o=document.createElement("video");o.id=r;o.type="video/mp4";o.autoplay="true";o.addEventListener("ended",function(){m.hide()},false);o.addEventListener("loadstart",function(){m.showLoading()},false);o.addEventListener("canplay",function(){m.hideLoading()},false);o.addEventListener("pause",function(){if(!o.webkitDisplayingFullscreen){m.hide()}},false);if("ontouchend" in t){t.ontouchend=u}else{t.onclick=e}t.appendChild(o);b=document.createElement("div");b.id=v;b.innerHTML=f;b.style.display="none";t.appendChild(b)}}m.hide=function(){t.style.display="none";o.style.display="none"};m.hideLoading=function(){document.getElementById(v).style.display="none"};m.notify=function(w){t=document.getElementById(j);t.style.backgroundColor="#000000";t.style.position="absolute";t.style.left=c.getX()+"px";t.style.top=c.getY()+"px";t.style.height=Math.ceil(c.getHeight())+"px";t.style.width=Math.ceil(c.getWidth())+"px";t.style.display="block";o=document.getElementById(r);switch(w){case"PLAYING":if(o){o.style.display="block";o.style.height="100%";o.style.width="100%";if(o.play){o.type="video/mp4";o.src=c.getVideo();o.load();o.play();o.addEventListener("pause",function(){clearInterval(h)});d();h=setInterval(function(){d()},5000)}}break;case"STOPPED":if(o&&o.pause){o.pause();clearInterval(h)}break}};function d(){Invodo.Module.get("logger").log("InteractivePlayer","timePlayed",{tm:Math.round(o.currentTime),fr:c.getDurableId(),pod:q})}function e(){i.click()}function u(){i.click()}m.registerParent=function(w){l=document.getElementById(w);k()};function s(){if(l&&t){l.removeChild(t)}}m.show=function(){t.style.display="block"};m.showLoading=function(){document.getElementById(v).style.display="block"};m.unregisterParent=function(){s();l=null}};Invodo.Src.Widget.InteractivePlayer.Photo3d=function(){var e=600;var c=600;var d;var f;var g;var h;var b;var l=this;var k;var i;var j=0;l.callMouseDown=function(m){i.callMouseDown(m)};l.callSetCursorIcon=function(m,n){i.callSetCursorIcon(m,n)};l.callMouseOver=function(m){i.callMouseOver(m)};l.callMouseMove=function(m){i.callMouseMove(m)};l.callTouchMove=function(m){i.callTouchMove(m)};l.callTouchStart=function(m){i.callTouchStart(m)};l.e=function(){d.e()};l.getZoom=function(){return g.getZoom()};l.home=function(){g.home()};l.init=function(u,n,q,A,t,o,v,s,r,z,m,w,y,x){g=new Invodo.Src.Widget.InteractivePlayer.Photo3d.Model(q,t,o,v,c,e,j,s,r,z,m,w,y,x);g.init(t);d=new Invodo.Src.Widget.InteractivePlayer.Photo3d.Control(g);h=new Array();i=new Invodo.Src.Widget.InteractivePlayer.Photo3d.View(g,d,u,A,n);i.init()};l.isDragging=function(){return g.isDragging()};l.isHome=function(){return g.isHome()};l.isSpinning=function(){return g.isSpinning()};l.momentum=function(m){g.momentum(m)};l.n=function(){d.n()};l.ne=function(){d.ne()};function a(){for(var m=0;m<h.length;m++){h[m].notify()}}l.nw=function(){d.nw()};l.play=function(){var n=[];var m=arguments.length;for(var o=0;o<m;o++){n.push(arguments[o])}g.play.apply(this,n)};l.registerObserver=function(m){g.registerObserver(m)};l.s=function(){d.s()};l.se=function(){d.se()};l.stop=function(){g.stop()};l.sw=function(){d.sw()};l.spin=function(m){d.spin(m)};l.w=function(){d.w()};l.zoomIn=function(){g.zoomIn()};l.zoomOut=function(){g.zoomOut()}};Invodo.Src.Widget.InteractivePlayer.Photo3d.Model=function(F,ab,U,i,M,G,ak,E,ac,O,an,ai,D,L){var L=L||"LU";L=L.toUpperCase();if(L=="NEW"){L="LU"}if(L=="OLD"){L="UR"}var U;var o=this;Invodo.EventDispatcher(o);o.animation=[];o.animationInterval;var ad=0;var y=0;var H="";var l="";var b=new Array();var ap=new Array();var h=new Array();var A=false;var g=false;var ao=0;var aj=[];var Q=[];var W=0;var q="left";var ah=0;var d=false;var t="none";var v="none";var z="none";var x="none";var f=0;var V=0;switch(E){case 1:W=5;break;case 2:W=4;break;case 3:W=3;break;case 4:W=2;break;case 5:W=1;break;default:W=2}o.findhome_interval=null;var T=O?O:ab.homeAddress;var r=T;var u=[0,0];var c=0;var a=0;var K=new Array();var at;var ar={};var e=10;var Y=0.97;var af=200;var ag="";var aq=null;if(ac==undefined){ac=true}function am(){setInterval(function(){var au;if(o.animation.length>0){au=o.animation.shift();r=[au.x,au.y];X()}else{clearInterval(o.animationInterval)}},o.spin_speed)}function I(av,au){return av/(au*au)}o.isZoomAvailable=function(){return d};o.initializeMomentum=function(){clearInterval(ao)};o.e=function(){o.move("e")};o.findHome=function(ay){Invodo.PublishSubscribe.publish("findingHome",[]);if(o.isHome()){clearInterval(o.findhome_interval);o.state="home";Invodo.PublishSubscribe.publish("modelIsHome",[])}else{o.state="goinghome";if(ay){if(ay==="counterClockWise"){o.w()}else{if(ay==="clockWise"){o.e()}}}else{var aw=T[0];var ax=Math.abs(r[0]);var az=b.length;var av=Math.abs(aw-ax);var au=Math.round(az/2);if(av<au){if(ax>aw){o.w()}else{o.e()}}else{if(ax>aw){o.e()}else{o.w()}}if(r[1]<T[1]){o.n()}if(r[1]>T[1]){o.s()}}}X()};o.getCurrentView=function(){return r};o.getHeight=function(){return c};o.getId=function(){return i};function aa(){var au=b[u[0]][u[1]];if(au&&("src" in au)){return au.src}}function ae(){var au=ap[u[0]][u[1]];if(au&&("src" in au)){return au.src}}o.getIndex=function(){return r};o.getIntroSpin=function(){return ac};o.getMatrixDirection=function(){return L};o.getMatrixHeight=function(){return b[0].length};o.getMatrixWidth=function(){return b.length};o.getParentHeight=function(){return ai};o.getParentWidth=function(){return D};o.getPodId=function(){return F};o.getSrc=function(){return aa()};o.getSrcBigImage=function(){return ae()};o.getState=function(){return o.state};o.getView=function(){return b[r[0]][r[1]]};o.getWidth=function(){return a};o.getZoom=function(){return ak};o.grab=function(au){g=au;X()};o.home=function(au){o.initializeMomentum();if(o.isSpinning()){o.stop()}if(o.state!="goinghome"){o.state="goinghome";clearInterval(o.findhome_interval);o.findhome_interval=setInterval(function(){o.findHome(au)},o.spin_speed)}X()};o.init=function(aw){if(aw.bigImages){if(aw.bigImages.length>0){d=true}}at=ar;cols=aw.matrix_dimensions.cols;rows=aw.matrix_dimensions.rows;if((T[0]+1)>cols){T[0]=0}if((T[1]+1)>rows){T[1]=0}image_urls=aw.images;if(d){bigImage_urls=aw.bigImages}switch(L){case"UR":case"OLD":for(var ay=0;ay<cols;ay++){var aB="";var au=new Array();for(var ax=0;ax<rows;ax++){var aD=ay;var aC=ax;var av=((aD*rows)+(aC));aB=H+image_urls[av];au.push({height:o.getHeight(),src:aB,width:o.getWidth(),x:0,y:0})}b.push(au)}break;case"LU":case"NEW":for(var ay=0;ay<cols;ay++){var aB="";var aA="";var au=new Array();var az=new Array();for(var ax=0;ax<rows;ax++){var aD=ay;var aC=ax;var av=(ax*cols)+ay;aB=H+image_urls[av];au.push({height:o.getHeight(),src:aB,width:o.getWidth(),x:0,y:0});if(d){aA=H+bigImage_urls[av];az.push({height:o.getHeight(),src:aA,width:o.getWidth(),x:0,y:0})}}b.push(au);if(d){ap.push(az)}}break;default:}Z()};o.isDragging=function(){return g};o.isForward=function(){var av=Math.round(cols*0.25);var ax=Math.round(cols*0.75);var aw=r[0];var ay=r[1];var au=null;if((aw>av)&&(aw<ax)){au=false}else{au=true}return au};o.isHome=function(){if(r[0]==T[0]&&r[1]==T[1]){return true}else{return false}};o.isReady=function(){if(o.state=="ready"){return true}else{return false}};o.isSpinning=function(){return A};function C(av){var au=false;if(av>=0){au=true}return au}function J(){var aw=aw;for(var av=1;av<cols;av++){var au=b[av][T[1]].src;if(au&&au!="undefined"){var ax=B(b[av][T[1]].src);ax.onload=function(){ad++;if(ad==cols){setTimeout(function(){if(o.getIntroSpin()){o.twirl("counterClockWise")}else{o.home()}o.state="ready"},1000)}}}}if(an===undefined){al()}else{if(an){al()}}}function Z(){var au=B(b[T[0]][T[1]].src);ad++;au.onload=function(){c=this.height;a=this.width;o.state="dataready";X();J()}}function B(au){var av=new Image();if(av){av.src=Invodo.Url.removeProtocol(au)}av.onload=function(){};h.push(av);return av}function al(){for(var aw=0;aw<b.length;aw++){var av=b[aw];for(var au=0;au<av.length;au++){if(au==T[1]){continue}var ax=av[au];B(ax.src)}}}o.momentum=function(au){ag=au;aq=setTimeout(function(){o[ag]();if(e<af){e=I(e,Y);o.momentum(ag)}else{e=10}},e)};o.move=function(ay){var az=r[0];var ax=r[1];var aB=b[az];var aw=b.length;var aA=aw-1;var aD;var aC;var av;switch(ay){case"n":var au=aB.length-1;av=ax+1;aC=az;if(!o.isForward()){av=ax-1}var aD;if(av>au){av=au}if(av<0){av=0}break;case"s":aC=ColIndex;break;case"e":aC=az+1;if(aC>=aA){aC-=aw}av=ax;break;case"w":aC=az-1;if(aC<0){aC+=aw}av=ax;break}aD=[aC,av];s(aD)};o.n=function(){o.move("n")};o.ne=function(){o.n();o.e()};function X(){if(K&&K.length&&K.length>0){for(var au=0;au<K.length;au++){try{var aw=K[au];if(aw&&aw.notify){aw.notify("model",o.getState())}}catch(av){}}}}o.nw=function(){o.n();o.w()};o.play=function(){if(arguments.length>0){var au=arguments.length;for(var av=0;av<au;av++){var aw=arguments[av];if(aw&&C(aw.x)&&C(aw.y)){o.animation.push(aw)}}}am()};o.registerObserver=function(au){K.push(au)};o.s=function(){var ax=r[0];var az=r[1];var ay=b[ax];var av=b.length-1;var aw=az-1;var au=ay.length-1;if(!o.isForward()){aw=az+1}if(aw<0){aw=0}if(aw>au){aw=au}if(ax>av){ax=av}if(ax<0){ax=0}newAddress=[ax,aw];s(newAddress)};o.se=function(){o.s();o.e()};o.addToXIndexHistory=function(au){aj.push(au)};o.addToYIndexHistory=function(au){Q.push(au)};o.getYIndexHistory=function(){return Q};o.setIndex=function(av,au,aw){Invodo.PublishSubscribe.publish("spinIndex",[{xIndex:av},{yIndex:au}]);s([av,au],aw)};o.calculateSpinDirection=function(au){if(au.x_percent>0){q="right"}else{q="left"}return q};o.setSpinDirection=function(au){q=au};o.spinWithMomentum=function(){var aw=Q[Q.length-1];var av=w();var ax=0;var au=50;ao=setInterval(function(){ax++;if(ax>=av.length){clearInterval(ao);Invodo.PublishSubscribe.publish("doneSpinning",[]);var ay=P()+","+N();var aD=S()+","+R();var az=V-f;var aB={pod:F,eltime:az,relxy:ay,stopxy:aD};Invodo.Module.get("logger").log(i,"spinData",aB);o.fire("spinData",aB);ah=0;n("none");m("none");return}try{var aA=true;o.setIndex(av[ax],aw,aA)}catch(aC){}},au)};function j(au){t=au}function N(){return t}function m(au){x=au}function R(){return x}function k(au){v=au}function P(){return v}function n(au){z=au}function S(){return z}function w(){var aB=[];var ax=o.getMatrixWidth();var aA=aj[aj.length-1];var av=1;if(q==="right"){av=-1}var aC=[];aC.push(aA);for(var aw=1;aw<=ax;aw++){aC.push(av*aw+aA)}var aD=1;function au(aG,aH){var aE=aG;for(var aF=1;aF<aH;aF++){aE=aE+ah;while(aE>ax){aE=aE-(ax+1)}aG=aE;aB.push(aC[aE])}return aG}function ay(aH,aK,aJ){var aE=aH;function aI(){while(aE+aG>ax){aE=aE-(ax+1)}aD=aE+aG;aB.push(aC[aE+aG])}for(var aG=1;aG<aK;aG++){if(aJ>0){for(var aF=0;aF<aJ;aF++){aI()}}else{aI()}}return aD}aB.push(aC[aD]);var az=0;if(ah===1){az=ah*W;aD=au(aD,az);az=ah*W+2;aD=ay(aD,az,2)}if(ah===2){az=ah*W;aD=au(aD,az);az=ah*W+2;aD=ay(aD,az,2)}if(ah===3){az=ah*W;aD=au(aD,az);az=ah*W+2;aD=ay(aD,az,2)}if(ah===4){az=ah*W;aD=au(aD,az);az=Math.ceil((ah*W+1)/2);aD=ay(aD,az,0);aD=ay(aD,7,2)}if(ah===5){az=ah*W;aD=au(aD,az);az=Math.ceil((ah*W+1)/2);aD=ay(aD,az,0);aD=ay(aD,7,2);aD=ay(aD,2,3)}if(ah===6){az=ah*W;aD=au(aD,az);az=Math.ceil((ah*W+1)/2);aD=ay(aD,az,0);aD=ay(aD,11,2);aD=ay(aD,4,3)}if(ah===7){az=ah*W;aD=au(aD,az);az=Math.ceil((ah*W+1)/2);aD=ay(aD,az,0);aD=ay(aD,11,2);aD=ay(aD,4,3)}if(ah===8){az=ah*W;aD=au(aD,az);az=Math.ceil((ah*W+1)/2);aD=ay(aD,az,0);aD=ay(aD,11,2);aD=ay(aD,4,3)}if(ah===0){Invodo.PublishSubscribe.publish("doneSpinning",[])}return aB}o.initializeXIndexHistory=function(){aj=[]};o.initializeYIndexHistory=function(){Q=[]};o.setMomentum=function(au){ah=au};o.calculateMomentum=function(av){var au=0;if(av>0&&av<=0.2){au=1}if(av>0.2&&av<=0.4){au=2}if(av>0.4&&av<=0.8){au=3}if(av>0.8&&av<=1.2){au=4}if(av>1.2&&av<=1.6){au=5}if(av>1.6&&av<=2){au=6}if(av>2&&av<=2.4){au=7}if(av>2.4){au=8}return au};o.spin_interval=null;o.spin_speed=100;o.spin=function(av){var au=null;clearInterval(o.findhome_interval);clearInterval(o.spin_interval);o.stop();o.state="spinning";switch(av){case"n":au=o.n;break;case"s":au=o.s;break;case"e":au=o.e;break;case"w":au=o.w;break;case"nw":au=o.nw;break;case"ne":au=o.ne;break;case"se":au=o.se;break;case"sw":au=o.sw;break;default:}o.spin_interval=setInterval(au,o.spin_speed);A=true};o.stop=function(){o.initializeMomentum();clearInterval(o.spin_interval);o.spin_interval=null;A=false;o.state="ready";X()};o.sw=function(){o.s();o.w()};o.touch=function(){o.stop()};o.twirl=function(au){var av=o.getMatrixWidth();if(au){if(au==="counterClockWise"){newAddress=[av-1,T[1]]}else{if(au==="clockWise"){newAddress=[1,T[1]]}}r=newAddress;o.home(au)}else{newAddress=[Math.floor(cols/2),T[1]];r=newAddress;o.home()}};function s(ay,ax){var aw=o.getMatrixHeight();var az=o.getMatrixWidth();var au=ay[0];var aB=ay[1];var aA=Math.floor(au/az);au=au-(aA*az);au=Math.abs(au);if(au<0){au+=(az-1)}if(au>=az){au=au-(az-1)}if(au>=(az)){au=au-az}au=Math.abs(au);r=[au,aB];u=[au,aB];if(ax){n(u[0]);m(u[1])}else{k(u[0]);j(u[1]);n(u[0]);m(u[1])}if(au>=0){var av=b[au][aB];if(av&&("src" in av)){B(av.src);X()}}}o.startSpinTimer=function(){f=new Date().getTime()};o.stopSpinTimer=function(){V=new Date().getTime()};o.w=function(){o.move("w")};o.zoomIn=function(){ak++;o.state="zoomIn";X()};o.zoomOut=function(){ak--;o.state="zoomOut";X()}};Invodo.Src.Widget.InteractivePlayer.Photo3d.View=function(Z,G,ae,d,aG){var aA=G;var E;var g=false;var X="Invodo_Photo3d_View_Hotzone_"+Z.getId();var s="Invodo_Photo3d_View_"+Z.getId();var aw=new Array();var aB="Invodo_Photo3d_View_Loading_"+Z.getId();var C=Z;var n=null;var am=null;var ak=null;var J=C.getView();var ad="InvodoPhoto3dView_"+Z.getId();var aC=false;var y=false;var M=false;var az=this;var aV;var m=new Array();var aO="spin";var P;var aQ=false;var l=false;var k=false;var aW=false;var b=false;var aI=false;var ab=[];var aN=2;var A=0;var x=0;var e=0;var Y=0;var Q=false;var f=true;var q="none";var aK="none";var at=0;var ar=0;var aJ=0;var W=0;var aL=0;var c=0;var aS;C.registerObserver(az);Invodo.PublishSubscribe.subscribe("cannotMoveMoreNorthOnMultiAxis",function(a0){ap.apply(az,a0)});Invodo.PublishSubscribe.subscribe("canMoveMoreNorthOnMultiAxis",function(a0){w.apply(az,a0)});Invodo.PublishSubscribe.subscribe("cannotMoveMoreSouthOnMultiAxis",function(a0){H.apply(az,a0)});Invodo.PublishSubscribe.subscribe("canMoveMoreSouthOnMultiAxis",function(a0){aM.apply(az,a0)});var aY={starting:{enter:function(){var a5=ao();var a3=C.getParentHeight();var a4=C.getParentWidth();var a6=C.getView();var a7=document.createElement("div");a7.id=ad;a7.style.height="100%";a7.style.overflow="hidden";a7.style.width="100%";a7.style.position="relative";if(a7.attachEvent){a7.attachEvent("onclick",al)}else{if(a7.addEventListener){a7.addEventListener("click",al,true)}}a5.appendChild(a7);var a2=document.createElement("img");a2.id=s;a2.style.height="auto";a2.style.position="relative";a2.style.width="100%";a2.style.display="block";a2.style.top="0px";a2.style.left="0px";a2.style.maxWidth="none";a2.style.maxHeight="none";a2.alt=Invodo.Pod.getTitle(C.getPodId());a7.appendChild(a2);var a1=document.createElement("div");a1.id=X;a1.style.background="#FFFFFF";a1.style.cursor="url("+d.cursor_hand_open.src+"), auto";if(C.isZoomAvailable()){a1.style.cursor="url("+d.cursor_zoom_in.src+"), auto"}a1.style.filter="alpha(opacity=0)";a1.style.height="100%";a1.style.left="0px";a1.style.opacity=0;a1.style.position="absolute";a1.style.top="0px";a1.style.width="100%";a5.appendChild(a1);var a0=document.getElementById(X);S("click",al,a0);S("dblclick",ah,a0);if(window.attachEvent){window.attachEvent("onresize",I)}else{if(window.addEventListener){window.addEventListener("resize",I,false)}}E=document.getElementById(a2.id);av("loading")},exit:function(){}},loading:{enter:function(){if(C.getMatrixHeight()===1){Q=true}var a1=document.createElement("div");a1.id=aB;a1.style.background="url("+d.wait.src+") center center no-repeat";a1.style.cursor="wait";a1.style.height=C.getHeight()+"px";a1.style.left="0px";a1.style.position="absolute";a1.style.top="0px";a1.style.width=C.getWidth()+"px";var a0=ao();if(a0){a0.appendChild(a1)}},exit:function(){O()}},dataloaded:{enter:function(){var a4=document.getElementById(s);var a5=C.getParentHeight();var a9=C.getParentWidth();var ba=C.getHeight();var a6=C.getWidth();aJ=ba;W=a6;aL=W/aJ;var a0=0;var a3=0;var a2=1;var a1=aH(ba,a6,a5,a9);var a7=r(a1.height,a1.width,a5,a9);var a8=ao();S("touchStart",function(bb){af()},a8);if(a7.v){}else{if(a7.h){a8.style.margin="auto";a8.style.width=a9+"px"}else{}}V()},exit:function(){}},goinghome:{enter:function(){aP()},exit:function(){}},home:{enter:function(){af()},exit:function(){}},ready:{enter:function(){},exit:function(){}},zoomIn:{enter:function(){t()},exit:function(){}},zoomOut:{enter:function(){T()},exit:function(){}}};function I(){if(!aS){aS=setTimeout(function(){aS=null;v()},66)}}function ap(){Q=true}function w(){Q=false}function H(){f=true}function aM(){f=false}function af(){var a0=document.getElementById(X);if(a0){S("mousedown",F,a0);S("touchstart",au,a0);S("touchmove",aT,a0);S("touchend",j,a0)}}function S(a0,a2,a1){if("addEventListener" in a1){a1.addEventListener(a0,a2,false)}else{if("attachEvent" in a1){a1.attachEvent("on"+a0,a2)}else{}}}function K(a0){for(var a1=0;a1<aw.length;a1++){aw[0](a0)}}function r(a4,a1,a2,a3){var a0={h:false,v:false};if(a1<a3){a0.h=true}if(a4<a2){a0.v=true}return a0}function aj(a0){var a2=parseInt(a0.style.height);var a1=a0.clientHeight?a0.clientHeight:(a0.offsetHeight||0);return a2?a2:a1}function ao(){return document.getElementById(ae)}function ay(){return document.getElementById(aG)}function aZ(a1){var a0=parseInt(a1.style.width);var a2=a1.clientWidth?a1.clientWidth:(a1.offsetWidth||0);return a0?a0:a2}function aH(a6,a0,a4,a7){var a3={height:0,width:0};if((a6==a4)&&(a0==a7)){a3.height=a4;a3.width=a7;return a3}var a1=a4/a6;var a2=a7/a0;var a5=parseInt(a4);var a8=parseInt(a0*a1);if(a8<=a7){a3.height=a4;a3.width=a8;return a3}var a5=parseInt(a6*a2);var a8=parseInt(a7);if(a5<=a4){a3.height=a5;a3.width=a7}return a3}function O(){var a0=document.getElementById(aB);if(a0&&a0.style){a0.style.display="none"}a0=null}az.init=function(){av("starting")};function V(){try{var a0=C.getIndex();var a1={nx:a0[0]+","+a0[1],pod:C.getPodId()};Invodo.Module.get("logger").log("InteractivePlayer","photoView",a1)}catch(a2){}}function F(a3){var a1=document.getElementById(X);if(a1.setCapture){a1.setCapture()}g=false;b=false;if(document.addEventListener){document.addEventListener("mousemove",aD,false);document.addEventListener("mouseup",D,false)}else{if(document.attachEvent){document.attachEvent("onmousemove",aD);document.attachEvent("onmouseup",D)}}if(C.getMatrixHeight()>1){var a2=a3||window.event;if(a2&&a2.preventDefault&&!M||q!==aK){a2.preventDefault()}}var a0=aE(a3);am=a0.x;ak=a0.y;n=new Date().getTime();if(!aW){aA.mouseDown(a0.x,a0.y)}}function aX(a1,a9,a5,a0,a8,a4){var a2=a4-a5;var bc=a0-a1;var bb=C.getWidth();var a3=(bc/bb);var a7=a8-a9;var a6=C.getHeight();var ba=(a7/a6);return{duration:a2,t1:a5,t2:a4,x1:a1,x2:a0,x_delta:bc,x_percent:a3,y1:a9,y2:a8,y_delta:a7,y_percent:ba}}function aD(a3){g=true;var a1=a3||window.event;if(a1&&a1.preventDefault){a1.preventDefault()}else{a1.returnValue=false}var a0=aE(a1);var a2=aX(am,ak,n,a0.x,a0.y,a0.time);if(!aW){U("cursor_hand_closed",X);aA.mouseDrag(a2)}else{U("cursor_pan",X);o(a2,b)}b=a2}function B(a0){if(g){D(a0);g=false}}function aE(a3){var a0=0;var a5=0;var a2=new Date().getTime();var a1=a3||window.event;if(!a1){return{x:0,y:0}}if(a1.pageX){a0=a1.pageX;a5=a1.pageY}else{if(a1.clientX){a0=a1.clientX;a5=a1.clientY}else{if("touches" in a3){var a4=a3.touches[0];a0=a4.pageX;a5=a4.pageY}else{a0=a5=0}}}return{x:a0,y:a5,time:a2}}function D(a1){if(!g&&C.isZoomAvailable()){if(C.getZoom()===0){C.zoomIn()}else{C.zoomOut()}}else{if(!aW){aA.mouseUp();if(C.isZoomAvailable()){U("cursor_zoom_in",X)}else{U("cursor_hand_open",X)}}else{if(C.isZoomAvailable()){U("cursor_zoom_out",X);Invodo.PublishSubscribe.publish("donePanning",[])}}}g=false;if(document.removeEventListener){document.removeEventListener("mousemove",aD);document.removeEventListener("mouseup",D)}else{document.detachEvent("onmousemove",aD);document.detachEvent("onmouseup",D)}b=false;document.onmousemove=null;var a0=document.getElementById(X);if(a0.releaseCapture){a0.releaseCapture()}V()}az.notify=function(a1,a0){L(a1,a0)};function a(){for(var a0=0;a0<m.length;a0++){m[a0].templateUpdate(J)}}function al(a0){aA.click()}function ah(a0){if(a0.preventDefault){a0.preventDefault()}D()}az.registerListener=function(a0,a2){for(var a1=0;a1<aw.length;a1++){if(a2==aw[a1]){return}}aw.push(a2)};az.registerTemplate=function(a0){m.push(a0)};function aP(){var a0=document.getElementById(X);if(a0){h("mousedown",F,a0);h("touchstart",au,a0);h("touchmove",aT,a0);h("touchend",j,a0)}}function h(a0,a2,a1){if("removeEventListener" in a1){a1.removeEventListener(a0,a2)}else{if("attachEvent" in a1){a1.detachEvent("on"+a0,a2)}else{}}}function av(a0){if(aV){aV.exit()}aV=aY[a0];aV.enter()}function j(a0){an(a0)}function au(a0){if(l){an()}if(a0.touches.length===2){k=true;return}if(a0.touches.length<2){if(C.getMatrixHeight()===1){if(!aC){if(a0&&a0.preventDefault){a0.preventDefault()}}}else{if(!y){M=false}else{M=true}}F(a0)}l=true}function aT(a6){if(a6.touches.length>1||k){return}var a1=aE(a6);if(C.getMatrixHeight()===1){if(!aO){var a5=Math.abs(am-a1.x);var a4=Math.abs(ak-a1.y);if(a4>=a5&&!aW){aO="scroll"}else{aO="spin"}}switch(aO){case"scroll":if(g){aA.touchEnd();g=false}aC=true;break;case"spin":aC=false;g=true;var a3=aX(am,ak,n,a1.x,a1.y,a1.time);if(!aW){aA.touchMove(a3)}else{o(a3,b)}b=a3;default:}}else{g=true;var a2=ak-a1.y;var a0=Math.abs(am-a1.x);var a7=Math.abs(a2);if(a2<0){q="draggingDown"}else{q="draggingUp"}if(!M||q!==aK){a6.preventDefault()}if(!aW&&a7>=a0&&(((q==="draggingDown")&&Q)||((q==="draggingUp")&&f))){y=true}else{y=false}var a3=aX(am,ak,n,a1.x,a1.y,a1.time);if(!aW){aA.touchMove(a3)}else{o(a3,b)}b=a3}}function an(a0){if(!k){if(!g&&!aC&&C.isZoomAvailable()){if(C.getZoom()===0){C.zoomIn()}else{C.zoomOut()}}else{if(!aW){aA.mouseUp()}}g=false;if(document.removeEventListener){document.removeEventListener("mousemove",aD);document.removeEventListener("mouseup",D)}else{document.detachEvent("onmousemove",aD);document.detachEvent("onmouseup",D)}af();V();aK=q;aO=false;l=false;b=false}k=false}function aq(a1){var a0=0;var a3=0;if(!a1){return{x:0,y:0}}if(a1.touches&&a1.touches.length==1&&a1.touches[0].pageX){var a2=a1.touches[0];a0=a2.pageX;a3=a2.pageY}else{a0=a3=0}return{x:a0,y:a3}}az.callMouseDown=function(a0){F(a0)};az.callMouseMove=function(a0){aD(a0)};az.callSetCursorIcon=function(a0,a1){U(a0,a1)};az.callTouchMove=function(a0){aT(a0)};az.callTouchStart=function(a0){au(a0)};function L(a5,a4){switch(a5){case"model":switch(a4){case"dataready":av("dataloaded");case"ready":av("ready");break;case"goinghome":av("goinghome");break;case"home":av("home");break;case"zoomIn":av("zoomIn");break;case"zoomOut":av("zoomOut");break;case"zoomNormal":av("zoomNormal");break}break;default:break}P=10;if(aW){var a7=ay();ar=a7.clientHeight;at=a7.clientWidth;var a2=E.src;var a3=C.getSrcBigImage()||"";if(a3!=a2){E.src=a3;if(!aI){A=Math.abs(ar/(200/aN));x=Math.abs(at/(200/aN));R()}}}else{var a2=E.src;var a6=C.getSrc()||"";if(a6!=a2){E.src=a6;if(aI){var a1=parseInt(E.style.top);var a0=parseInt(E.style.left);A=Math.abs(a1/(100/aN));x=Math.abs(a0/(100/aN));ac()}}}}function ac(){var a0=null;var a6=aN;var a4=A;var a2=x;var a5=z(E,a6);var a3=N(E,a6);if(a5&&a3){for(var a1=0;a1<ab.length;a1++){clearInterval(ab[a1])}aI=false;E.parentElement.style.width="100%";E.parentElement.style.height="100%";E.parentElement.style.maxWidth=W+"px";u();Invodo.PublishSubscribe.publish("zoomOutDone",[])}else{aF(E,a4);ag(E,a2);a0=setInterval(ac,P);P=P+10000;ab.push(a0)}}function aU(){E.parentElement.style.maxHeight=E.parentElement.clientWidth+"px";if(aW){if(aQ!==false){var a0=aQ-E.parentElement.clientWidth;var a1=a0/2;E.style.top=parseInt(E.style.top)+a1+"px";E.style.left=parseInt(E.style.left)+a1+"px"}}}function aa(){E.parentElement.style.maxHeight=(E.parentElement.clientWidth/aL)+"px";if(aW){if(aQ!==false){var a0=aQ-E.parentElement.clientWidth;var a2=a0/2;E.style.left=parseInt(E.style.left)+a2+"px";var a1=0;if(c!==0){a1=a2/c}E.style.top=parseInt(E.style.top)+a1+"px"}}}function v(){if(aL!==0){if(aL===1){aU()}else{aa()}}aQ=E.parentElement.clientWidth}function u(){if(aL!==0){if(aL===1){E.parentElement.style.maxHeight=E.parentElement.clientWidth+"px"}else{E.parentElement.style.maxHeight=Math.floor(E.parentElement.clientWidth/aL)+"px"}}}function R(){var a2=null;var a4=aN;var a1=A;var a0=x;var a6=ax(E,a4);var a5=aR(E,a4);if(a6&&a5){for(var a3=0;a3<ab.length;a3++){clearInterval(ab[a3])}aI=true;E.parentElement.style.width="100%";E.parentElement.style.height="100%";E.parentElement.style.maxWidth=W+"px";u();if(E.style.top!==0){c=E.style.left/E.style.top}Invodo.PublishSubscribe.publish("zoomInDone",[])}else{i(E,a1);ai(E,a0);E.parentElement.style.width=at+"px";E.parentElement.style.height=ar+"px";a2=setInterval(R,P);P=P+10000;ab.push(a2)}}function ax(a1,a2){var a3=false;var a0=parseInt(a1.style.width);if(a0<200){a0=a0+a2;a1.style.width=a0+"%"}else{a3=true;a1.style.width=a0+"%"}return a3}function aR(a2,a0){var a3=false;if(a2.style.height==="auto"){a3=true;return a3}var a1=parseInt(a2.style.height);if(a1<200){a1=a1+a0;a2.style.height=a1+"%"}else{a3=true;a2.style.height=a1+"%"}return a3}function z(a2,a0){var a3=false;var a1=parseInt(a2.style.width);if(a1>100){a1=a1-a0;a2.style.width=a1+"%"}else{a3=true;a2.style.width=a1+"%"}return a3}function N(a2,a0){var a3=false;if(a2.style.height==="auto"){a3=true;return a3}var a1=parseInt(a2.style.height);if(a1>100){a1=a1-a0;a2.style.height=a1+"%"}else{a3=true;a2.style.height=a1+"%"}return a3}function i(a2,a0){var a3=false;var a1=parseInt(a2.style.top);if(a1-a0<=-(ar/aN)){a3=true;a1=a1-a0;a2.style.top=a1+"px"}else{a1=a1-a0;a2.style.top=a1+"px"}return a3}function ai(a2,a1){var a3=false;var a0=parseInt(a2.style.left);if(a0-a1<=-(at/aN)){a3=true;a0=a0-a1;a2.style.left=a0+"px"}else{a0=a0-a1;a2.style.left=a0+"px"}return a3}function ag(a3,a2){var a0=false;var a1=parseInt(a3.style.left);var a4=false;if(a1<0){a4=true}if(a4){if(a1+a2>=0){a0=true;a3.style.left="0px"}else{e++;a1=a1+a2;a3.style.left=a1+"px"}}else{if(a1-a2<=0){a0=true;a3.style.left="0px"}else{e++;a1=a1-a2;a3.style.left=a1+"px"}}return a0}function aF(a3,a2){var a4=false;var a1=parseInt(a3.style.top);var a0=false;if(a1<0){a0=true}if(a0){if(a1+a2>=0){a4=true;a3.style.top="0px"}else{Y++;a1=a1+a2;a3.style.top=a1+"px"}}else{if(a1-a2<=0){a4=true;a3.style.top="0px"}else{Y++;a1=a1-a2;a3.style.top=a1+"px"}}return a4}function o(a3,a2){Invodo.PublishSubscribe.publish("panning",[]);var a5=0;var a4=0;if(a2!==false){a5=a2.x2-a3.x2;a4=a2.y2-a3.y2}var a1=parseInt(E.style.left)-a5;var a0=parseInt(E.style.top)-a4;if(a0>0||a0<(-ar)){}else{E.style.top=a0+"px"}if(a1>0||a1<(-at)){}else{E.style.left=a1+"px"}}function U(a1,a3){var a0=document.getElementById(a3);var a2="";switch(a1){case"cursor_hand_closed":a2="url("+d.cursor_hand_closed.src+"), auto";break;case"cursor_hand_open":a2="url("+d.cursor_hand_open.src+"), auto";break;case"cursor_hand_point":a2="url("+d.cursor_hand_point.src+"), auto";break;case"cursor_pan":a2="url("+d.cursor_pan.src+"), auto";break;case"cursor_zoom_in":a2="url("+d.cursor_zoom_in.src+"), auto";break;case"cursor_zoom_out":a2="url("+d.cursor_zoom_out.src+"), auto";break;case"default":a2="default";break;default:a2="default"}a0.style.cursor=a2}function t(){aW=true;U("cursor_zoom_out",X)}function T(){aW=false;U("cursor_zoom_in",X)}};Invodo.Src.Widget.InteractivePlayer.Photo3d.Control=function(e){var o=[null];var w=null;var j=0;var g=0;var l=[];var v=false;var q=false;var k=0;var t=0;var r=0;var A=0;var y=0;var x=false;var s=this;if(!Date.now){Date.now=function b(){return new Date().getTime()}}s.click=function(){};s.dbclick=function(){e.home()};s.e=function(){if(e.getMatrixDirection()=="UR"){e.e()}else{e.w()}};function i(){a(false);c()}function z(B){l.push(B)}function f(){l=[]}function h(){clearInterval(k)}function m(){if(l[l.length-1]===0){return 0}var B=0;for(var C=0;C<l.length-1;C++){B=B+l[C]}return B/l.length}function c(){var B=50;k=setInterval(function(){if(A===t&&y===r){l.push(0)}t=A;r=y},B)}function u(){if(v===false){return 0}A=q.x2;y=q.y2;var E=v.x2-q.x2;var D=v.y2-q.y2;var B=Date.now()-v.t2;var C=Math.sqrt(E*E+D*D)/B;return C}function a(B){v=B}function d(B){q=B}s.mouseDown=function(B,C){e.stop();j=B;g=C;w=e.getCurrentView();e.initializeXIndexHistory();e.initializeYIndexHistory();e.startSpinTimer();i();f();x=false};s.mouseDrag=function(D){Invodo.PublishSubscribe.publish("spinning",[]);e.grab(true);var H=e.getMatrixWidth();if(!w){return}if(w&&e.getMatrixDirection()=="LU"&&w[0]!==0&&!x){var L=w[0];L*=-1;L=L-(e.getMatrixWidth()-1);w[0]=L}x=true;var N=w[0];var C=Math.floor(H*D.x_percent)+N;var M=(H*-1);if(C==M){C=0}if(e.getMatrixDirection()=="LU"){C*=(-1)}if(C<0){C+=H}if(C>=H){C-=(H-1)}var O=e.getMatrixHeight();var G=w[1];var J=0;if(G===1){J=0.168}if(G===2){J=0.5}var I=(J+D.y_percent);var F=(Math.round(O*I)*(-1));if(e.getMatrixDirection()=="LU"){F*=(-1)}if(F<0){F=0}if(F>=O){F=(O-1)}if(O!==1){if(F===0){Invodo.PublishSubscribe.publish("cannotMoveMoreSouthOnMultiAxis",[]);Invodo.PublishSubscribe.publish("canMoveMoreNorthOnMultiAxis",[])}if(F===O-1){Invodo.PublishSubscribe.publish("cannotMoveMoreNorthOnMultiAxis",[]);Invodo.PublishSubscribe.publish("canMoveMoreSouthOnMultiAxis",[])}}d(D);var K=e.calculateSpinDirection(q);e.setSpinDirection(K);var B=u();a(D);z(B);e.addToYIndexHistory(F);e.addToXIndexHistory(C);var E=false;e.setIndex(C,F,E)};s.mouseUp=function(){e.stopSpinTimer();e.grab(false);w=null;e.initializeMomentum();h();var C=m();var B=e.calculateMomentum(C);e.setMomentum(B);e.spinWithMomentum()};s.n=function(){if(e.getMatrixDirection()=="UR"){e.n()}else{if(e.isForward()){e.s()}else{e.n()}}};s.ne=function(){if(e.getMatrixDirection()=="UR"){e.ne()}else{e.sw()}};s.nw=function(){if(e.getMatrixDirection()=="UR"){e.nw()}else{e.se()}};s.s=function(){if(e.getMatrixDirection()=="UR"){e.s()}else{if(e.isForward()){e.n()}else{e.s()}}};s.se=function(){if(e.getMatrixDirection()=="UR"){e.se()}else{e.nw()}};s.spin=function(B){if(e.getMatrixDirection()=="LU"){switch(B){case"n":B="s";break;case"s":B="n";break;case"e":B="w";break;case"w":B="e";break;case"ne":B="sw";break;case"sw":B="ne";break;case"nw":B="se";break;case"se":B="nw";break}}e.spin(B)};s.sw=function(){if(e.getMatrixDirection()=="UR"){e.sw()}else{e.ne()}};s.touchEnd=function(){s.mouseUp()};s.touchMove=function(B){s.mouseDrag(B)};function n(B){if(B>337.5||B<22.5){o.push("s")}else{if(B>=22.5&&B<67.5){o.push("se")}else{if(B>=67.5&&B<135){o.push("e")}else{if(B>=135&&B<157.7){o.push("ne")}else{if(B>=157.5&&B<215){o.push("n")}else{if(B>=215&&B<247.5){o.push("nw")}else{if(B>=247.5&&B<315){o.push("w")}else{if(B>=315&&B<337.5){o.push("sw")}else{}}}}}}}}if(o[0]==o[1]){e[o[1]]()}o.shift()}s.touch=function(B,C){e.touch()};s.w=function(){if(e.getMatrixDirection()=="UR"){e.w()}else{e.e()}}};Invodo.Src.Widget.Arcade=function(t,r,n,e,f){var u=[];var i;var a=[];var k=this;var c;var j;var s="/js/arcade_vnc.js";var b="arcade";k.connect=function(v){c.connect(v)};k.data=function(){};k.disconnect=function(){c.disconnect()};k.getExpireTime=function(){return c.getExpireTime()};k.getMediaBase=function(){return c.getMediaBase()};k.getId=function(){return r};k.getCategories=function(){return c.getCategories()};k.getDemos=function(){return c.getDemos()};k.getRegistrationUrl=function(){return c.getRegistrationUrl()};k.getTimeRemaining=function(){return c.getTimeRemaining()};k.getType=function(){return b};function m(v){k.sendArcadeKeyCode(parseInt(v))}function h(){k.keyboard.grab()}function l(v){q(v)}k.hide=function(){j.hide()};k.hideHotspots=function(){var v=0;for(v=0;v<a.length;v++){a[v].hide()}};function q(v){if(!v){if("console" in window&&"log" in window.console){window.console.log("Pod passed to Arcade model.init is undefined")}return}if(!("config" in v)){if("console" in window&&"log" in window.console){window.console.log("Pod passed to Arcade model.init does not contain a config object")}return}if("WebSocket" in window){var w=Invodo.File.JS(Invodo.getPodDomain()+s,function(){d(v)})}else{d(v)}}k.keyboard={grab:function(){c.keyboard.grab()},release:function(){c.keyboard.release()}};k.listensTo=function(v){return r};k.mouse={grab:function(){c.mouse.grab()},release:function(){c.mouse.release()}};k.notify=function(v,w){switch(v){case"connecting":k.showHotspots();break;default:}g(v,w)};function o(v,x){for(var w=0;w<listeners.length;w++){var z=listeners[w];var y=z[0];var A=z[1];if(v==y){}}}k.receiveUpdate=function(v){};k.reconnect=function(){c.reconnect()};k.registerEventListener=function(v,w){u.push({eventName:v,callback:w});return k};k.registrationEnded=function(v){g("registrationEnded",v)};k.remove=function(){};k.requestMoreTime=function(){c.requestMoreTime()};function g(v,x){for(var w=0;w<u.length;w++){if(u[w].eventName===v){(function(y){setTimeout(function(){u[y].callback({widgetId:r,eventName:v,data:x})},5)})(w)}}}k.sendArcadeEvent=function(w,v,x){if("WebSocket" in window){k.keyboard.grab();k.mouse.grab();j.sendArcadeEvent(w);k.keyboard.release();k.mouse.release()}else{k.sendArcadeFlashMouseEvent(v,x)}};k.sendArcadeFlashMouseEvent=function(v,w){j.sendArcadeFlashMouseEvent(v,w)};k.sendArcadeKeyCode=function(v,w){w=w?w:"keydown";k.keyboard.grab();k.mouse.grab();j.sendArcadeKeyCode(v,w);k.keyboard.release();k.mouse.release()};k.sendUpdate=function(v){};k.setParent=function(v){j.setParent(v)};k.show=function(){j.show()};k.showHotspots=function(){var v=0;for(v=0;v<a.length;v++){a[v].show()}};function d(w){n=w.pod;c=new Invodo.Src.Widget.Arcade.Model(w,"noVNC_canvas",r,f);c.registerObserver(k);j=new Invodo.Src.Widget.Arcade.View(t,c);i=new Invodo.Src.Widget.Arcade.Control(c);if("hotspots" in w.config.arcade){var A=w.config.arcade.hotspots;var v=A.length;for(var x=0;x<v;x++){var z=A[x];var y=new Invodo.Src.Widget.InteractivePlayer.Hotspot();y.init(r,x,z,n,j.getDomId(),1);y.registerEventListener("click",m);y.onMouseOver(h);y.show();a.push(y)}}g("playerReady")}if(n||e){Invodo.Pod.load({pod:n,mpd:e},function(v){l(v)})}};Invodo.Src.Widget.Arcade.Observable=function(a){var b=[];a.notifyObservers=function(c,e){for(var d=0;d<b.length;d++){b[d].notify(c,e)}};a.registerObserver=function(c){b.push(c)}};Invodo.Src.Widget.Arcade.RemoteFrameBuffer=function(s,r){var h=100;var m=s.rfb.connectTimeout;var k=s.rfb.encrypt;var q=s.rfb.localCursor;var l;var i=this;var b=s.rfb.shared;var t=s.rfb.trueColor;var e,c,g,a,j,n;i.getConnectHtml=function(u,x){var w="";var y="";var v="";if("WebSocket" in window){w="<canvas id='noVNC_canvas'>";y="</canvas>"}v=w+"<object id='noVNC_canvas' width='"+x+"px' height='"+u+"px' type='application/x-shockwave-flash' data='"+swfPath+"'><param name='movie' value='"+swfPath+"'/><param name='allowScriptAccess' value='always'/><param name='allowFullscreen' value='true'/><param name='wmode' value='opaque'/><param name=FlashVars value='"+flashVars+"'/></object>"+y;return v};i.connect=function(v,w,u,z,y,x){e=v;c=w;g=u;a=z;j=y;n=x;if("WebSocket" in window){l=new RFB({target:document.getElementById(r),encrypt:k,true_color:t,local_cursor:q,shared:b,onConnectTimeout:m,onUpdateState:d,onPasswordRequired:f});setTimeout(function(){if(l){l.connect(c,g,a,j)}},h)}else{i.notifyListeners("connected")}i.notifyListeners("connecting")};function o(){i.notifyListeners("ready")}i.keyboard={grab:function(){if(l){l.get_keyboard().grab()}},release:function(){if(l){l.get_keyboard().ungrab()}}};i.mouse={grab:function(){if(l){l.get_mouse().grab()}},release:function(){if(l){l.get_mouse().ungrab()}}};function f(u){}i.reconnect=function(){setTimeout(function(){if(l){l.connect(c,g,a,j)}},h);i.notifyListeners("connecting")};function d(u,v,w,x){switch(v){case"disconnected":break;case"loaded":break;case"connect":break;case"ProtocolVersion":break;case"Security":break;case"Authentication":break;case"SecurityResult":break;case"ClientInitialisation":break;case"ServerInitialisation":break;case"normal":break;case"failed":break;default:}i.notifyListeners(v)}Invodo.Src.Widget.Arcade.Listenable.call(i,i);o()};Invodo.Src.Widget.Arcade.Listenable=function(a){var b=[];a.notifyListeners=function(d){for(var c=0;c<b.length;c++){b[c](d)}};a.addListener=function(c){b.push(c)}};var InvodoFlashlightVncStatusCallback;Invodo.Src.Widget.Arcade.Model=function(y,c,g,J){var C=y;var z=0;var L=C.config.arcade;var A="viewOnly=false&hideControls=true&hideSettings=true&scale=false&autoConnect=true";var r="//e.invodo.com/";var E="media/";var d="4.0/fl/Flashlight.swf";var w="statusCallback=InvodoFlashlightVncStatusCallback&mouseCallback=InvodoFlashlightVncMouseCallback";var a=0;var j=J?J+E:Invodo.getAffiliateConfig().imageBase;var t=J?J:r;var x=J?J:r;var F=0;var v=3;var o=[];var m;var K="registrationEnded";var H="connect";var n;var k=this;var P;var e="Not connected";var D="Connecting";var O="WebSockets handshake";var N="Initiating";var f="Authenticating";var i="Waiting for server";var b="Connected";var Q="Arcade";var G={starting:{connect:function(){},disconnect:function(){},enter:function(){P=G.starting;k.notifyObservers("starting");n=new Invodo.Src.Widget.Arcade.RemoteFrameBuffer(L,c);n.addListener(u);q(G.registering)},exit:function(){},rfbUpdate:function(R){},requestMoreTime:function(){}},registering:{connect:function(R){m=new B(R);if(m.valid){switch(m.status){case m.SUCCESS:q(G.connecting);break;case m.PENDING:setTimeout(l,k.getCheckIntervalInMilliseconds());break;case m.FAILURE:q(G.failed);break;case m.ERROR:q(G.failed);break;default:}}else{q(G.failed)}},disconnect:function(){},enter:function(){P=G.registering;k.notifyObservers("registering");s()},exit:function(){},flashUpdate:function(R){},rfbUpdate:function(R){},requestMoreTime:function(){s()}},connecting:{connect:function(){},disconnect:function(){},enter:function(){F++;P=G.connecting;flashVars=m.flashVars;var R=parseInt(m.expireTime);if(a!=R){a=R;k.notifyObservers("expireTimeChange",{expireTime:a})}k.notifyObservers("connecting");if(F==1){n.connect(k,k.getApiHost(),k.getPort(),k.getPassword(),k.getPath()+"/"+m.registrationId)}else{if(F<v){n.reconnect()}else{q(G.failed)}}},exit:function(){},flashUpdate:function(R){switch(R){case b:q(G.connected);break;case e:q(G.failed);break;default:}},rfbUpdate:function(R){switch(R){case"ready":break;case"normal":q(G.connected);break;case"failed":q(G.connecting);break;default:}},requestMoreTime:function(){s()}},connected:{connect:function(R){m=new B(R);if(m.valid){switch(m.status){case m.SUCCESS:if((a!=0)&&(m.expireTime!=a)){k.notifyObservers("expireTimeChange",{expireTime:m.expireTime})}a=m.expireTime;break;case m.PENDING:setTimeout(l,k.getCheckIntervalInMilliseconds());break;case m.FAILURE:q(G.failed);break;case m.ERROR:q(G.failed);break;default:}}else{q(G.failed)}},disconnect:function(){h();q(G.disconnected)},enter:function(){P=G.connected;F=0;k.mouse.release();k.keyboard.release();k.notifyObservers("connected")},exit:function(){},flashUpdate:function(R){switch(R){case e:q(G.failed);break;default:}},rfbUpdate:function(R){switch(R){case"ready":case"normal":break;case"failed":q(G.failed);break;default:}},requestMoreTime:function(){s()}},disconnected:{connect:function(){},disconnect:function(){},enter:function(){P=G.disconnected;k.notifyObservers("disconnected")},exit:function(){},flashUpdate:function(R){},rfbUpdate:function(R){},requestMoreTime:function(){}},failed:{connect:function(){},disconnect:function(){},enter:function(){P=G.failed;k.notifyObservers("failed")},exit:function(){},flashUpdate:function(R){switch(R){case b:q(G.connected);break;case e:q(G.failed);break;default:}},rfbUpdate:function(R){switch(R){case"ready":break;case"normal":q(G.connected);break;case"failed":q(G.connecting);break;default:}},requestMoreTime:function(){s()}}};function q(R){if(P){P.exit()}R.enter()}function l(){q(G.registering)}k.connect=function(R){P.connect(R)};k.disconnect=function(){P.disconnect()};k.getApiHost=function(){return L.rfb.host};k.getCategories=function(){return L.categories};k.getCheckIntervalInMilliseconds=function(){if("checkInterval" in m){var R=parseInt(m.checkInterval);if(Invodo.Math.isNumber(R)){z=Invodo.Math.convertSecondsToMilliseconds(R)}}return z};k.getConnectHtml=function(R,S){return n.getConnectHtml(R,S)};function M(){return A+"&host="+k.getApiHost()+"&port="+k.getPort()+"&"+w}k.getDemos=function(){return L.demos};k.getDeviceImageHeight=function(){return parseInt(L.device.image.height)};k.getDeviceImageSrc=function(){return j+L.device.image.src};k.getDeviceImageWidth=function(){return parseInt(L.device.image.width)};k.getDeviceScreenHeight=function(){return parseInt(L.device.screen.height)};k.getDeviceScreenWidth=function(){return parseInt(L.device.screen.width)};k.getDeviceScreenX=function(){return parseInt(L.device.screen.x)};k.getDeviceScreenY=function(){return parseInt(L.device.screen.y)};k.getExpireTime=function(){return a};k.getFlashVars=function(){return w+"&"+flashVars};k.getImageUUID=function(){return L.registration.imageUUID};k.getMediaBase=function(){return j};k.getPassword=function(){return L.rfb.password};k.getPath=function(){return L.rfb.path};k.getPodId=function(){return C.pod};k.getPort=function(){return parseInt(L.rfb.port)};k.getEndRegistrationUrl=function(){return"//"+k.getApiHost()+"/registration/end/"+m.registrationId+"/?widgetId="+k.getWidgetId()+"&callback="+K};k.getRegistrationUrl=function(){return"//"+k.getApiHost()+"/registration/"+Invodo.Visitor.getVisitorId()+"/"+k.getImageUUID()+"/?widgetId="+k.getWidgetId()+"&callback="+H};k.getSkinBase=function(){return t};k.getSwfPath=function(){return x+d};k.getTimeRemaining=function(){return a-(new Date().getTime())};k.getWidgetId=function(){return g};function I(){Invodo.Src.Widget.Arcade.Observable.call(k,k);q(G.starting)}k.keyboard={grab:function(){n.keyboard.grab()},release:function(){n.keyboard.release()}};k.mouse={grab:function(){n.mouse.grab()},release:function(){n.mouse.release()}};k.reconnect=function(){n.reconnect()};function B(R){var S=this;S.registrationId="";S.status=R.status;S.valid=false;S.SUCCESS="SUCCESS";S.PENDING="PENDING";S.FAILURE="FAILURE";S.ERROR="ERROR";S.NULL="NULL";switch(S.status){case S.SUCCESS:case S.PENDING:if("registration" in R){m=R.registration;if("flashParams" in m===false){m.flashParams=M()}if("registrationId" in m&&"expireTime" in m){S.expireTime=parseInt(m.expireTime);S.flashVars=m.flashParams;S.registrationId=m.registrationId;S.checkInterval=parseInt(m.checkInterval);S.valid=true}else{if("console" in window){if("log" in window.console){window.console.log("Invalid registration object")}if("dir" in window.console){window.console.dir(R)}}}}break;case S.FAILURE:case S.ERROR:default:}}k.requestMoreTime=function(){P.requestMoreTime()};function s(){setTimeout(function(){new Invodo.File.JS(k.getRegistrationUrl())},20)}function h(){setTimeout(function(){new Invodo.File.JS(k.getEndRegistrationUrl())},20)}function u(R){P.rfbUpdate(R)}InvodoFlashlightVncStatusCallback=function(R){P.flashUpdate(R)};I()};var InvodoFlashlightVncMouseCallback=function(b){var d="click";var c="arcadeClick";var a="Arcade";switch(b){case d:Invodo.Module.get("logger").log(a,c,Invodo.Pod.getAll()[0].pod);break;default:break}};Invodo.Src.Widget.Arcade.MouseEventFactory=function(){this.createEvent=function(b){var a=null;if("createEvent" in document){a=document.createEvent("MouseEvents");a.initMouseEvent(b.type,b.canBubble,b.cancelable,b.view,b.detail,b.screenX,b.screenY,b.clientX,b.clientY,b.ctrlKey,b.altKey,b.shiftKey,b.metaKey,b.button,b.relatedTarget)}else{if("createEventObject"){a=document.createEventObject("MouseEvent");for(p in b){a[p]=b[p]}}else{}}return a};this.fire=function(b,a,c){var d=this.createEvent(c);if("dispatchEvent" in b){b.dispatchEvent(d)}else{if("fireEvent" in b){b.fireEvent("on"+a,d)}else{}}}};Invodo.Src.Widget.Arcade.View=function(r,d){var b="noVNC_canvas";var c=new Date().getTime();var m="InvodoArcadeDeviceView_"+c;var k="InvodoArcadeScreenView_"+c;var s=Invodo.Module.get("logger");var j=this;var e;var i;var g;var n;var q="InvodoArcadeWidgetView_"+d.getWidgetId();function o(t){if(e){e.exit()}t.enter()}function a(t,w){var G=null;var z=true;var u=false;var A=null;var E=false;var I=false;var y=false;var H=false;var x=t;var D=0;if(navigator.userAgent.toLowerCase().indexOf("safari")>-1){G=document.createEvent("Event")}else{if("createEvent" in document){G=document.createEvent("KeyboardEvent")}else{if("createEventObject" in document){G=document.createEventObject("KeyboardEvent");G.keyCode=t}else{return null}}}if(!("initKeyEvent" in G)&&"defineProperty" in Object){G.keyCodeVal=t;Object.defineProperty(G,"keyCode",{get:function(){return this.keyCodeVal}});Object.defineProperty(G,"which",{get:function(){return this.keyCodeVal}})}if("initKeyEvent" in G){G.initKeyEvent(w,z,u,A,E,I,y,H,x,D)}else{if("initEvent" in G){G.initEvent(w,z,u,A,E,I,y,H,x,D)}else{if("initKeyboardEvent"){var C=0;var F="";var v=false;var B="en";G.initKeyboardEvent(w,z,u,A,x,C,F,v,B)}else{}}}return G}function h(){e.draw()}function f(w,u){try{if(w&&u){var t=document.getElementById(w);if(t){if("fireEvent" in t){t.fireEvent("on"+u.type,u)}else{if("dispatchEvent" in t){t.dispatchEvent(u)}else{}}}}}catch(v){Invodo.Console.dir(v);Invodo.Console.log(new Error().stack)}}j.getParent=function(){return document.getElementById(r)};j.getDomId=function(){return q};j.hide=function(){j.setStyle("display","none")};function l(){i=new Invodo.Src.Widget.Arcade.View.Connected(e);stateConnecting=new Invodo.Src.Widget.Arcade.View.Connecting(e,d,k);g=new Invodo.Src.Widget.Arcade.View.Registering(e,d,j,m,k,q);o(g);try{var t={pod:d.getPodId(),pn:Invodo.getPageName()};Invodo.Module.get("logger").log("Arcade","playerView",t)}catch(u){}d.registerObserver(j)}j.notify=function(t){switch(t){case"registering":o(g);break;case"connecting":o(stateConnecting);case"connected":o(i);break;default:}};j.sendArcadeEvent=function(u){var t=document.getElementById(b);if(t){f(b,u)}};j.sendArcadeFlashMouseEvent=function(u,t){var w=document.getElementById(b);try{w.sendMouse(u,t)}catch(v){Invodo.Console.dir(v);Invodo.Console.log(new Error().stack)}};j.sendArcadeKeyCode=function(t,u){var v=document.getElementById(b);if(v){if("WebSocket" in window){f(b,a(t,u))}else{try{var x=document.getElementById(b);x.sendKey(t)}catch(w){Invodo.Console.dir(w);Invodo.Console.log(new Error().stack)}}}};j.setParent=function(t){parentNode=t};j.setStyle=function(u,t){domNode.style[u]=t};j.show=function(){j.setStyle("display","block")};l()};Invodo.Src.Widget.Arcade.View.Connected=function(b){var a=this;a.enter=function(){b=this};a.exit=function(){}};Invodo.Src.Widget.Arcade.View.Connecting=function(b,e,d){var a="noVNC_canvas";var f=new Invodo.Src.Widget.Arcade.MouseEventFactory();var c=false;var j=this;function g(){var o=i();o.innerHTML="";var l="";var n="";if("WebSocket" in window){l="<canvas id='noVNC_canvas'>";n="</canvas>"}var m="ieCacheBreaker="+new Date().getTime();var k=l+"<object name='noVNC_canvas' id='noVNC_canvas' width='"+e.getDeviceScreenWidth()+"px' height='"+e.getDeviceScreenHeight()+"px' classid='clsid:d27cdb6e-ae6d-11cf-96b8-444553540000'><param name='movie' value='"+e.getSwfPath()+"?"+m+"'/><param name='allowScriptAccess' value='always'/><param name='allowFullscreen' value='true'/><param name='wmode' value='opaque'/><param name='flashvars' value='"+e.getFlashVars()+"'/></object>"+n;o.innerHTML=k;if("addEventListener" in o){o.addEventListener("mousedown",function(q){c=true},true)}else{if("attachEvent" in o){o.attachEvent("onmousedown",function(){c=true})}else{}}o.onmouseup=function(){c=false};o.onmouseover=function(){e.mouse.grab();e.keyboard.grab()};o.onmouseout=function(){if(c){h();c=false}e.keyboard.release();e.mouse.release()};o.onmousemove=function(){e.mouse.grab();e.keyboard.grab()}}function h(){var k="mouseup";var l="mouseUp";var m={};m.canBubble=true;m.cancelable=false;m.view=true;m.detail="Arcade Widget mouseup event";m.screenX=0;m.screenY=0;m.clientX=0;m.clientY=0;m.ctrlKey=false;m.altKey=false;m.shiftKey=false;m.metaKey=false;m.button=0;m.relatedTarget=null;if("WebSocket" in window){m.type=k;f.fire(document,"mouseup",m)}else{j.sendArcadeFlashMouseEvent(l,{x:0,y:0})}}j.enter=function(){g();b=this};j.exit=function(){};function i(){return document.getElementById(d)}j.sendArcadeFlashMouseEvent=function(l,k){var n=document.getElementById(a);try{n.sendMouse(l,k)}catch(m){Invodo.Console.dir(m);Invodo.Console.log(new Error().stack)}}};Invodo.Src.Widget.Arcade.View.Registering=function(g,d,b,f,h,e){var c=this;function a(){var j="";var k="";if("WebSocket" in window){j="<canvas id='noVNC_canvas'>";k="</canvas>"}var i=b.getParent();var l="<div id='"+e+"' style='position:relative;height:"+d.getDeviceImageHeight()+"px;width:"+d.getDeviceImageWidth()+"px'><div id='"+f+"' style='position:relative'><div style='position:absolute;background-image:url(\""+d.getDeviceImageSrc()+'");height:'+d.getDeviceImageHeight()+"px;width:"+d.getDeviceImageWidth()+"px;' id='"+f+"'></div><div id='"+h+"' style='background-color:#000;height:"+d.getDeviceScreenHeight()+"px;width:"+d.getDeviceScreenWidth()+"px;left:"+d.getDeviceScreenX()+"px;position:absolute;top:"+d.getDeviceScreenY()+"px;'></div></div></div>";i.innerHTML=l;if("WebSocket" in window){document.getElementById(h).onclick=function(){Invodo.Module.get("logger").log(d.getWidgetId(),"arcadeClick",{pod:d.getPodId()})}}}c.enter=function(){a();g=this};c.exit=function(){}};Invodo.Src.Widget.Arcade.Control=function(){};"use strict";window.Invodo=window.Invodo||{};Invodo.Hi5={};Invodo.Hi5.version="0.3.2";Invodo.Hi5.cdn="d2xza854ebzm5d.cloudfront.net/assets/hi5";(function(b){var c=Array.prototype.slice;var a=function(f){var e={};var d=function(i){var h=false;if(Object.prototype.toString.call(i)==="[object Array]"){h=true}return h};var g=function(l,k){var j=0,n,m,h;if(d(l)){h=l.length;for(;j<h;j++){m=l[j];if(k.call(m,j,m)===false){break}}}else{for(n in l){m=l[n];if(k.call(m,n,m)===false){break}}}return l};f.on=function(i,h){if(!e[i]){e[i]=[]}e[i].push(h);return f};f.addEventListener=f.on;f.off=function(k,j){var h=e[k],i;if(!h||!(h.length)){return}if(j===undefined){e[k]=[]}else{i=h.indexOf(j);if(i>-1){h.splice(i,1)}}return f};f.removeEventListener=f.off;f.once=function(j,i){var h=function(){this.off(j,h);return i.apply(this,arguments)};return f.on(j,h)};f.fire=function(j){var h=e[j],i=c.call(arguments,1);if(!h||!(h.length)){return}g(h,function(k,l){return l.apply(f,i)});return f};f.listeners=function(h){return(e[h]||[]).slice()}};b.EventDispatcher=a})(Invodo.Hi5||window);(function(a){var b=function(){var c={type:"component",extend:function(g,d,f){for(var e in d){if(f&&(e in g)){break}g[e]=d[e]}return g}};a.EventDispatcher(c);return c};a.Component=b}(Invodo.Hi5||window));(function(a){var b=function(c){function e(g){g.addEventListener("error",function(i){d.fire("video_error",i)});g.addEventListener("durationchange",function(){d.fire("video_durationchange",{duration:g.duration})},false);g.addEventListener("volumechange",function(){d.fire("video_volumechange",{volume:g.volume,muted:g.muted})},false);g.addEventListener("seeked",function(){d.fire("video_seeked",{type:"video_seeked",currentTime:g.currentTime})},false);var f=["loadeddata","canplay","canplaythrough","ended","waiting","playing","seeking","loadstart","pause","seeked","play"];f.forEach(function(i){g.addEventListener(i,function(){d.fire("video_"+i)})});function h(){var i=0;if(g.buffered.length>0){var j=g.buffered.end(0);i=parseInt(((j/g.duration)*100),10)}return i}g.addEventListener("progress",function(){if(g.duration){d.fire("video_buffered",{type:"video_buffered",buffer:h()})}},false);g.addEventListener("timeupdate",function(i){d.fire("video_timeupdate",{type:"video_timeupdate",time:i.timeStamp})},false);if(c.autoplay){g.addEventListener("canplaythrough",function(){d.fire("video_start",d.config[d.index]);g.play()},false)}}var d={type:"videomedia",config:c.config,index:0,autoplay:c.autoplay,init:function(){this.videoElement=document.getElementById(c.videodisplayId)||c.element;e(this.videoElement);for(var f=0;f<this.config.length;f++){this.config[f].encodings.sort(function(h,g){if(h.height<g.height){return -1}else{if(h.height>g.height){return 1}else{return 0}}})}this.fire("new_video",this.config[this.index]);return this},getCurrent:function(){return this.config[this.index]},getPlayList:function(){return this.config.slice()},next:function(){if((this.index+1)===this.config.length){return this.config[this.index]}++this.index;this.fire("new_video",this.config[this.index]);return this.config[this.index]},previous:function(){if(this.index<=0){return this.index}--this.index;this.fire("new_video",this.config[this.index]);return this.config[this.index]},play:function(){if(this.videoElement.paused){this.videoElement.play()}},pause:function(){if(!this.videoElement.paused){this.videoElement.pause()}},seek:function(f){if(this.videoElement.seekable){this.videoElement.currentTime=f}},time:function(){return this.videoElement.currentTime},duration:function(){return this.videoElement.duration},set:function(f){this.index=(f<=this.config.length)&&f>=0?f:this.index;this.fire("new_video",this.config[this.index]);return this.config[this.index]},paused:function(){return this.videoElement.paused},playing:function(){return !this.videoElement.paused},muted:function(){return this.videoElement.muted},mute:function(){this.videoElement.muted=true},unmute:function(){this.videoElement.muted=false},volume:function(){return this.videoElement.volume},setVolume:function(f){this.videoElement.volume=f},setByDimensions:function(f,g){console.log("setByDimensions",f,g)}};a.EventDispatcher(d);return d};a.VideoMedia=b}(Invodo.Hi5||window));(function(b){var a=function(c,e){var d={type:"assets",server:c.server||Invodo.Hi5.cdn||undefined,version:c.version||Invodo.Hi5.version||undefined,init:function(){this.preload()},preload:function(){var g=c.preload||[];for(var f=0;f<g.length;f++){if(g[f].type==="css"){this.loadCSS(g[f].path)}if(g[f].type==="js"){this.loadJS(g[f].path)}}},loadJS:function(h){var f=e.dom.createElement("script");f.setAttribute("type","text/javascript");var g="";if(this.server){if(this.server.slice(0,2)!=="//"){g="//"}g=g+this.server+"/"}if(this.version){g=g+this.version+"/"}g=g+h;f.setAttribute("src",g);e.dom.getElementsByTagName("head")[0].appendChild(f);return f},loadCSS:function(f){var h=document.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");var g="";if(this.server){if(this.server.slice(0,2)!=="//"){g="//"}g=g+this.server+"/"}if(this.version){g=g+this.version+"/"}g=g+f;h.setAttribute("href",g);e.dom.getElementsByTagName("head")[0].appendChild(h);return h}};b.EventDispatcher(d);return d};b.Assets=a}(Invodo.Hi5||window));(function(b){var a=function(){var c={type:"configuration"};c.set=function(d){this.config=d;try{for(var f in this.config){if(this.config.hasOwnProperty(f)){this.fire(f,this.config[f])}}}catch(g){console.log("Error in configuration",g)}this.fire("complete")};c.update=function(d,f){for(var e in d){if(f&&(e in this.config)){break}this.config[e]=d[e];this.fire(e,d[e])}return this.config};c.getValue=function(d,e){var f;if(this.config[d]){f=this.config[d]}return f||e};b.EventDispatcher(c);return c};b.Configuration=a}(Invodo.Hi5||window));(function(b){var c=[];var e=function(f){c[f]=++c[f]||0;return f+c[f]};var a=function(){return{create:function(h){var n={};var m=false;n={type:h.type,go:function(){if(!m){this.init()}}};n.id=e(n.type+"_");b.EventDispatcher(n);for(var g in h){if(typeof h[g]==="object"){for(var j=0;j<h[g].length;j++){h[g][j].id=e(h[g][j].type+"_");h[g][j].parentId=n.id}}}h.Media[0].videodisplayId=h.MediaDisplay[0].id;n.configuration=b.Configuration(h);n.ui=b.UI(n.configuration,b.Template(),document,n.id);n.ui.add(n.ui.template.render("default.playercontainer",{containerId:n.id}),h.parentId,n.id);window.addEventListener("resize",function(){n.ui.elementQueryResize()});function f(i){n.ui.elementQueryResize(i)}var k=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||false;if(k!==false){var l=new k(function(i){i.forEach(f)});l.observe(document.getElementById(h.parentId),{attributes:true,subtree:false})}n.assets=Invodo.Hi5.Assets(h.Assets[0],n.ui);n.mouse=b.Mouse;n.keyboard=b.Keyboard;n.media=b.MediaFactory(h.Media[0]);n.display=b.Display(h.MediaDisplay[0],n.ui,n.media,n.mouse);n.controlbar=b.VideoControlbar(h.VideoControlbar[0],n.ui,n.mouse,n.media,b.Slider(),b.Slider());n.titlebar=b.VideoTitlebar(h.Titlebar[0],n.ui,n.mouse,n.media);n.ratingscomments=b.RatingsComments(h.RatingsComments[0],n.ui,n.media,n.mouse,n.keyboard);n.sharing=b.Sharing(h.Sharing[0],n.ui,n.media,n.mouse);n.controlbar.on("videocontrolbar_fullscreen",function(){n.ui.fullscreen(n.id)});n.titlebar.on("titlebar_closeclick",function(){});n.configuration.on("complete",function(){n.fire("configuration_complete")});n.init=function(){n.assets.init();n.ui.init();n.display.init();n.controlbar.init();n.titlebar.init();n.ratingscomments.init();n.sharing.init();n.media.init();m=true};n.configuration.set(h);return n}}};var d=function(f){var g={};if(f.type==="videoplayer"){g=new a().create(f)}return g};b.HTML5Factory=d}(Invodo.Hi5||window));(function(c){var a={type:"keyboardcontroller",eventQueue:[],addEventListener:function(e,d,f){e.addEventListener(d,f);this.eventQueue.push({emitter:e,event:d,handler:f})},removeEventListener:function(f,g,h){f.removeEventListener(g,h);for(var e=0,d=this.eventQueue.length;e<d;e++){if(f===this.eventQueue[e].emitter&&this.eventQueue[e].keys===g&&this.eventQueue[e].callback===h){this.eventQueue.unshift(this.eventQueue[e])}}}};var b=c.Keyboard=a;return b}(Invodo.Hi5||window));(function(c){var b={type:"mousecontroller",eventQueue:[],addEventListener:function(e,d,f){e.addEventListener(d,function(g){f(g,this)});this.eventQueue.push({emitter:e,event:d,handler:f})},removeEventListener:function(g,e,h){g.removeEventListener(e,h);for(var f=0,d=this.eventQueue.length;f<d;f++){if(g===this.eventQueue[f].emitter&&this.eventQueue[f].event===e&&this.eventQueue[f].callback===h){this.eventQueue.unshift(this.eventQueue[f])}}}};var a=c.Mouse=b;return a}(Invodo.Hi5||window));(function(b){var a=function(){var f={type:"slidercontroller",eventQueue:[],active:false,scrub:{},range:{},amount:{},current:{x:null,y:null},last:{x:null,y:null},horizontal:{init:function(k,j){g();e.init(k);if(typeof j==="function"){j()}},update:function(k,j){e.update(k);if(typeof j==="function"){j(f.current.x)}},get:function(){g();return e.get()},set:function(j){g();return e.set(j)}},vertical:{init:function(k,j){g();d.init(k);if(typeof j==="function"){j()}},update:function(k,j){d.update(k);if(typeof j==="function"){j(f.current.y)}},get:function(){g();return d.get()},set:function(k,j){g();d.set(k);if(typeof j==="function"){j(k)}}}};var c={},i;function h(m,w,k,q){try{q=m.getBoundingClientRect()}catch(u){}var r=w.body,s=window.self,o=k.clientTop||r.clientTop||0,t=k.clientLeft||r.clientLeft||0,j=s.clientYOffset||k.scrollTop||r.scrollTop,n=s.clientXOffset||k.scrollLeft||r.scrollLeft,v=q.top+j-o,l=q.left+n-t;return{top:v,left:l}}function g(){c={scrub:getComputedStyle(f.scrub),range:getComputedStyle(f.range),amount:getComputedStyle(f.amount)};i=f.range&&f.range.ownerDocument}var e={init:function(j){f.origin=h(f.range,i,i.documentElement).left;f.last.x=h(f.range,i,i.documentElement).left===h(f.scrub,i,i.documentElement).left?f.origin:j.pageX;c.scrub.offsetX=parseInt(c.scrub.width,10)/2;c.range.offsetX=h(f.range,i,i.documentElement).left},update:function(k){var j=parseInt(c.range.width,10)-((parseInt(c.range.width,10)+c.range.offsetX)-k.pageX);f.scrub.style.right="0";if(k.pageX<c.range.offsetX){j=0;f.scrub.right="-"+parseInt(c.scrub.width,10)+"px"}else{if(k.pageX>parseInt(parseInt(c.range.width,10)+c.range.offsetX,10)){j=parseInt(c.range.width,10)}}f.last.x=k.pageX;f.current.x=j},get:function(){return(parseInt(c.amount.width,10)/parseInt(c.range.width,10))},set:function(j){if(j<=0){f.amount.style.width=0;f.scrub.style.left="-"+parseInt(c.scrub.width,10)+"px"}else{if(j>=1){f.amount.style.width=parseInt(c.range.width,10)+"px";f.scrub.style.left="0px"}else{f.amount.style.width=(parseInt(c.range.width,10)*j)+"px"}}}};var d={init:function(j){f.origin=h(f.range,i,i.documentElement).top;f.last.y=h(f.range,i,i.documentElement).top===h(f.range,i,i.documentElement).top?f.origin:j.pageY;c.scrub.offsetY=parseInt(c.scrub.height,10)/2;c.range.offsetY=h(f.range,i,i.documentElement).top},update:function(k){var j=(parseInt(c.range.height,10)+c.range.offsetY)-k.pageY;f.scrub.style.top="0";if(k.pageY<c.range.offsetY){j=parseInt(c.range.height,10)}else{if(k.pageY>parseInt(parseInt(c.range.height,10)+c.range.offsetY-parseInt(c.scrub.height,10),10)){j=0;f.scrub.style.top="-"+parseInt(c.scrub.height,10)+"px"}}f.last.y=k.pageY;f.current.y=j},get:function(){return(parseInt(c.amount.height,10)/parseInt(c.range.height,10))},set:function(j){if(j<=0){f.amount.style.height=0;f.scrub.style.top="-"+parseInt(c.scrub.height,10)+"px"}else{if(j>=1){f.amount.style.height=parseInt(c.range.height,10)+"px";f.scrub.style.top="0px"}else{f.amount.style.height=(parseInt(c.range.height,10)*j)+"px"}}}};b.EventDispatcher(f);return f};b.Slider=a}(Invodo.Hi5||window));(function(a){var b=function(){var c={type:"cta"};c.onClick=function(d){console.log(d)};return c};a.CTA=b}(Invodo.Hi5||window));(function(b){var a=function(g,m,e,k,h){var f={type:"ratingscomments",stars:0,comments:"",submitted:false,visible:false,commentslimit:g.commentslimit||140,element:{},init:function(){f.createElement();m.on("titlebar_ratingscomments_click",function(){f.visible?f.hide():f.show()})},createElement:function(){i=m.template.render(g.skin,{elementId:g.id})},destroyElement:function(){m.fire("overlay_dialog_close");return m.remove(this.element)},show:function(){if(f.visible){return}if(e.playing()){d=true;e.pause()}m.add(i,g.parentId,g.id);this.element=m.dom.getElementById(g.id);f.visible=true;m.fire("overlay_dialog_open");q=this.element.getElementsByClassName("js-invodo-action-comments")[0];r=this.element.getElementsByClassName("js-invodo-ratingscomments")[0];o=this.element.getElementsByClassName("js-invodo-validation-charmax")[0];s=m.dom.getElementsByClassName("js-invodo-toggle-initial")[0];c=m.dom.getElementsByClassName("js-invodo-toggle-complete")[0];n=this.element.getElementsByClassName("js-invodo-action-close");for(var y=0;y<n.length;y++){k.addEventListener(n[y],"click",function(){m.fire("ratingscomments_close_click");f.hide()})}l=this.element.getElementsByClassName("js-invodo-action-rating");var u=function u(C,B){for(var A=0;A<l.length;A++){l[A].classList.remove(B.active);l[A].classList.add(B.inactive);if(parseInt(l[A].dataset.rating,10)<=C){l[A].classList.remove(B.inactive);l[A].classList.add(B.active)}}};var v={click:{active:"invodo-star-is-active",inactive:"invodo-star-is-inactive"},mouseover:{active:"invodo-star--hover-is-active",inactive:"invodo-star--hover-is-inactive"}};for(var w=0;w<l.length;w++){var z=l.item(w);k.addEventListener(z,"click",function(A){if(f.submitted===true){return}j("sendable");m.fire("ratingscomments_star_click",{rating:A.target.dataset.rating});f.stars=parseInt(A.target.dataset.rating,10);u(parseInt(A.target.dataset.rating,10),v.click)});k.addEventListener(z,"mouseover",function(A){u(parseInt(A.target.dataset.rating,10),v.mouseover)});k.addEventListener(z,"mouseout",function(){for(var A=0;A<l.length;A++){l[A].classList.remove(v.mouseover.active)}})}var t=function t(){return(f.commentslimit-f.comments.length)<0};var x=function x(){r.value=f.comments;o.innerHTML=f.commentslimit-f.comments.length;if(t()){j("overcommentlimit")}if(f.stars===0){j("norating")}else{j("sendable")}if(f.submitted){j("notsendable")}for(var A=0;A<f.stars;A++){l[A].className=l[A].className.replace(/\binvodo-star-is-inactive\b/,"invodo-star-is-active")}};x();h.addEventListener(r,"keyup",function(){f.comments=r.value;o.innerHTML=f.commentslimit-f.comments.length;if(t()){o.classList.add("invodo-text-is-invalid");j("notsendable")}else{o.classList.remove("invodo-text-is-invalid");j("sendable")}});k.addEventListener(q,"click",function(){if(!f.submitted){f.comments=r.value;f.comments=f.comments.slice(0,f.commentslimit-1);f.stars=f.element.getElementsByClassName("invodo-star-is-active").length;m.fire("ratingscomments_sendbutton_click",{stars:f.stars,comments:f.comments});f.submitted=true;j("notsendable")}})},hide:function(){if(d){e.play();d=false}f.visible=false;return this.destroyElement()}};var d=false;var i={};var q={};var r={};var s={};var c={};var o={};var n=[];var l=[];var j=function j(t){c.classList.add("invodo-rating-is-inactive");if(t==="notsendable"){q.setAttribute("disabled",true);if(f.submitted){r.setAttribute("disabled",true);s.classList.add("invodo-rating-is-inactive");c.classList.remove("invodo-rating-is-inactive")}}if(t==="overcommentlimit"){q.setAttribute("disabled",true);o.classList.add("invodo-text-is-invalid")}if(t==="norating"){q.setAttribute("disabled",true);r.setAttribute("disabled",true);s.classList.remove("invodo-rating-is-inactive")}if(t==="sendable"){q.removeAttribute("disabled");r.removeAttribute("disabled");r.focus();f.element.getElementsByClassName("invodo-comment--container")[0].classList.remove("invodo-comment-is-inactive")}};b.EventDispatcher(f);return f};b.RatingsComments=a}(Invodo.Hi5||window));(function(b){var a=function(f,j,e,i){var d={type:"sharing",element:{},visible:false,init:function(){d.createElement();j.on("titlebar_sharing_click",function(){d.visible?d.hide():d.show()});g=j.nav.getLocationHref()||"";g=encodeURIComponent(g)},createElement:function(){h=j.template.render(f.skin,{elementId:f.id})},destroyElement:function(){j.fire("overlay_dialog_close");return j.remove(this.element)},show:function(){if(d.visible){return}if(e.playing()){c=true;e.pause()}j.add(h,f.parentId,f.id);this.element=j.dom.getElementById(f.id);d.visible=true;j.fire("overlay_dialog_open");var o=this.element.getElementsByClassName("invodo-sharing--container");k=this.element.getElementsByClassName("js-invodo-action-close");for(var m=0;m<k.length;m++){i.addEventListener(k[m],"click",function(){j.fire("share_close_click");d.hide()})}for(var n in f.socialnetworks){var q=document.createElement("I");q.className="invodo-icon invodo-icon--"+n.toLowerCase()+" js-invodo-action-"+n.toLowerCase();q.dataset.socialNetworkType=n;o[0].appendChild(q);if(o[0].childNodes.length===2){var l=document.createElement("br");o[0].appendChild(l)}i.addEventListener(q,"click",function(t){var s=t.target.dataset.socialNetworkType;var r=f.socialnetworks[s]+g;window.open(r,"_blank");j.fire("sharing_sendbutton_click",{socialnetwork:s})})}},hide:function(){if(c){e.play();c=false}d.visible=false;return this.destroyElement()}};var c=false;var h={};var k=[];var g;b.EventDispatcher(d);return d};b.Sharing=a}(Invodo.Hi5||window));(function(a){var b=function(d,j,h,c){var i={type:"titlebar",init:function(){this.createElement()},buttons:[],element:{},parent:{},createElement:function(){j.add(j.template.render(d.skin,{elementId:d.id}),d.parentId,d.id);this.element=j.dom.getElementById(d.id);this.parent=j.dom.getElementById(d.parentId);k=j.dom.getElementsByClassName("js-invodo-titletext")[0];e=j.dom.getElementsByClassName("js-invodo-ratingbutton")[0];e&&i.buttons.push(e);f=j.dom.getElementsByClassName("js-invodo-sharebutton")[0];f&&i.buttons.push(f);g=j.dom.getElementsByClassName("js-invodo-playlistbutton")[0];g&&i.buttons.push(g);h.addEventListener(e,"click",function(){j.fire("titlebar_ratingscomments_click");i.parent.classList.add("invodo-cta-is-inactive")});j.on("ratingscomments_close_click",function(){i.parent.classList.remove("invodo-cta-is-inactive")});h.addEventListener(f,"click",function(){j.fire("titlebar_sharing_click");i.parent.classList.add("invodo-cta-is-inactive")});j.on("share_close_click",function(){i.parent.classList.remove("invodo-cta-is-inactive")});h.addEventListener(g,"click",function(){j.fire("titlebar_playlist_click")});j.on("playlist_close_click",function(){});c.on("new_video",function(l){k.textContent=l.title});return this.element},destroyElement:function(){return j.remove(this.element)}};var k={};var e={};var f={};var g={};a.EventDispatcher(i);return i};a.VideoTitlebar=b}(Invodo.Hi5||window));(function(a){var b=function(B,t,q,i,n,C){var w={type:"videocontrolbar",init:function(){this.createElement();v();A()},createElement:function(){t.add(t.template.render(B.skin,{elementId:B.id}),B.parentId,B.id);this.element=t.dom.getElementById(B.id);return this.element},destroyElement:function(){return t.remove(this.element)}};var m=false;var s={};var F={};var g={};var k={};var l={};var x={};var u={};var y={};var o={};function r(H){var G={hours:parseInt(H/3600,10)%24,minutes:parseInt(H/60,10)%60,seconds:(H%60).toFixed(0)};return{minutes:G.minutes,seconds:G.seconds<10?"0"+G.seconds:G.seconds}}function h(){var G=i.time();var H=r(G);var I=r(i.duration());if(F.length>0){F[0].textContent=H.minutes+":"+H.seconds}if(g.length>0){g[0].textContent=I.minutes+":"+I.seconds}}function E(){l.classList.remove("invodo-icon--volume-low");l.classList.remove("invodo-icon--volume");l.classList.remove("invodo-icon--volume-high");l.classList.remove("invodo-icon--mute");l.classList.remove("invodo-icon--volume-off")}function d(G){E();if(G<0.7&&G>0.4){l.classList.add("invodo-icon--volume-low")}else{if(G>=0.7){l.classList.add("invodo-icon--volume-high")}else{if(G===0){l.classList.add("invodo-icon--mute")}else{l.classList.add("invodo-icon--volume")}}}}function f(G){n.active=false;o.classList.remove("invodo-menu-is-active");i.setVolume(G);d(G)}function z(G){G.stopPropagation();if(n.active){t.fire("slider_volumechange",{volume:n.vertical.get()})}}function D(G){n.active=true;q.addEventListener(t.dom,"mousemove",e);q.addEventListener(t.dom,"mouseup",c);q.addEventListener(n.range.parentNode,"mouseup",z);q.addEventListener(n.range,"mouseup",z);q.addEventListener(n.scrub,"mouseup",z);q.addEventListener(t.dom,"touchmove",e);q.addEventListener(t.dom,"touchend",c);q.addEventListener(n.range.parentNode,"touchend",z);q.addEventListener(n.range,"touchend",z);q.addEventListener(n.scrub,"touchend",z);n.vertical.init(G,function(){o.classList.add("invodo-menu-is-active")})}function j(G){i.pause();C.active=true;q.addEventListener(t.dom,"mousemove",e);q.addEventListener(t.dom,"mouseup",c);q.addEventListener(t.dom,"touchmove",e);q.addEventListener(t.dom,"touchend",c);C.horizontal.init(G,function(){t.dom.getElementById(B.parentId).classList.add("invodo-cta-is-active")})}function e(G){if(C.active===true){C.horizontal.update(G,function(H){C.amount.style.width=H+"px"})}if(n.active===true){n.vertical.update(G,function(H){n.amount.style.height=H+"px"})}}function c(){if(C.active||n.active){t.dom.getElementById(B.parentId).classList.remove("invodo-cta-is-active");if(C.active){t.fire("slider_timeupdate")}if(n.active){t.fire("slider_volumechange",{volume:n.vertical.get()});q.removeEventListener(n.range.parentNode,"mouseup");q.removeEventListener(n.range,"mouseup");q.removeEventListener(n.scrub,"mouseup");q.removeEventListener(n.range.parentNode,"touchend");q.removeEventListener(n.range,"touchend");q.removeEventListener(n.scrub,"touchend")}q.removeEventListener(t.dom,"mousemove");q.removeEventListener(t.dom,"mouseup");q.removeEventListener(t.dom,"touchmove");q.removeEventListener(t.dom,"touchend")}}function v(){s=t.dom.getElementsByClassName("js-invodo-progress-buffer");n.scrub=t.dom.getElementsByClassName("js-invodo-action-volume")[0];n.amount=t.dom.getElementsByClassName("js-invodo-volume-amount")[0];n.range=t.dom.getElementsByClassName("js-invodo-volume")[0];o=t.dom.getElementsByClassName("js-invodo-menu")[0];C.scrub=t.dom.getElementsByClassName("js-invodo-time-scrub")[0];C.amount=t.dom.getElementsByClassName("js-invodo-progress-play")[0];C.range=t.dom.getElementsByClassName("js-invodo-progress")[0];F=t.dom.getElementsByClassName("js-invodo-time-start");g=t.dom.getElementsByClassName("js-invodo-time-end");k=t.dom.getElementsByClassName("js-invodo-action-play")[0];l=t.dom.getElementsByClassName("js-invodo-btn-volume")[0];x=t.dom.getElementsByClassName("js-invodo-action-fullscreen")[0];u=t.dom.getElementsByClassName("js-invodo-encoding-selector")[0];y=t.dom.getElementsByClassName("js-invodo-encoding-menu")[0];t.on("video_fullscreen",function(){console.log("TODO videocontrolbar got video_fullscreen message  should toggle button")});q.addEventListener(C.scrub,"mousedown",j);q.addEventListener(n.scrub,"mousedown",D);q.addEventListener(C.scrub,"touchstart",j);q.addEventListener(n.scrub,"touchstart",D);q.addEventListener(l,"mouseup",function(){if(i.muted()){i.unmute()}else{i.mute()}});q.addEventListener(k,"click",function(){if(i.paused()){i.play();i.fire("video_playing")}else{i.pause();i.fire("video_pause")}});q.addEventListener(u,"click",function(){y.classList.add("invodo-menu-is-active");y.parentNode.classList.add("invodo-player--tooltip-content-is-disabled");t.fire("videocontrolbar_encodingbutton_clicked")});q.addEventListener(y,"click",function(G){G.stopPropagation();y.classList.remove("invodo-menu-is-active");if(!G.target.innerText){return}if(y.querySelector(".invodo-menu--item-is-active")!==null){y.querySelector(".invodo-menu--item-is-active").classList.remove("invodo-menu--item-is-active")}G.target.classList.add("invodo-menu--item-is-active");y.parentNode.classList.remove("invodo-player--tooltip-content-is-disabled");t.fire("videocontrolbar_encodingmenuitem_clicked",{encodingLabel:G.target.innerText})});q.addEventListener(x,"click",function(){w.fire("videocontrolbar_fullscreen")})}function A(){i.on("new_video",function(G){C.scrub.style.right="-14px";C.amount.style.width="0";k.classList.add("invodo-icon--play");k.classList.remove("invodo-icon--pause");t.dom.getElementsByClassName("js-invodo-progress-buffer")[0].style.width="0%";t.dom.getElementsByClassName("js-invodo-progress-play")[0].style.width="0%";n.value=i.volume();for(var H=0;H<y.querySelectorAll("li").length;H++){if(y.querySelector("li")){y.querySelector("li").parentNode.removeChild()}}var K;for(var I=G.encodings.length-1;I>=0;--I){var J=t.dom.createElement("li");J.textContent=G.encodings[I].label;J.setAttribute("data-encoding",G.encodings[I].label);y.childNodes[0].appendChild(J);K=J}K.classList.add("invodo-menu--item-is-active")});i.on("video_durationchange",function(){h()});i.on("video_playing",function(){m=true});i.on("video_timeupdate",function(){var K=i.time();var J=i.duration();if(C.scrub){var H=(K/J);var I=getComputedStyle(C.range);var G=(parseInt(I.width,10)*H);C.amount.style.width=G+"px"}h()});i.on("video_volumechange",function(G){E();if(i.muted()){G.volume=0}n.vertical.set(G.volume,d)});t.on("slider_volumechange",function(G){E();n.vertical.set(G.volume,f)});t.on("slider_timeupdate",function(){C.active=false;i.seek(i.duration()*C.horizontal.get());i.play()});i.on("video_playing",function(){k.classList.remove("invodo-icon--play");k.classList.add("invodo-icon--pause")});i.on("video_pause",function(){k.classList.remove("invodo-icon--pause");k.classList.add("invodo-icon--play")})}a.EventDispatcher(w);return w};a.VideoControlbar=b}(Invodo.Hi5||window));(function(a){var b=a.Component();a.Media={type:"media",config:{},init:function(){},getPlayList:function(){},getCurrent:function(){},next:function(){},previous:function(){},set:function(){}};a.Media=b.extend(b,a.Media);a.MediaFactory=function(c){var d={};if(c.type==="videomedia"){d=a.VideoMedia(c)}return a.Media.extend(a.Media,d)}}(Invodo.Hi5||window));(function(b){var a=function(d,g,i,c){function j(l){var m="";var k=g.dom.createElement("video");if(k.canPlayType){m=k.canPlayType(l)}return m}var f={};var h={type:"html5video",id:d.id,createElement:function(){g.add(g.template.render("default.html5video_start",{elementId:this.id}),d.parentId,this.id);this.element=g.dom.getElementById(this.id);g.add(g.template.render("default.html5video_play"),"js-invodo-state","js-invodo-state");if(d.controls){this.element.controls="true"}f=g.dom.getElementsByClassName("js-invodo-play")[0];function k(){g.empty(g.dom.getElementsByClassName("js-invodo-state")[0],function(){g.add(g.template.render("default.html5video_load"),"js-invodo-state","js-invodo-state");var l=g.dom.getElementsByClassName("js-invodo-load-video-blur");if(l.length>0){l[0].parentNode.parentNode.className=(l[0].parentNode.parentNode.className)?l[0].parentNode.parentNode.className+" js-invodo-load-video-blur":" js-invodo-load-video-blur"}i.play()})}c.addEventListener(f,"click",k);c.addEventListener(f,"touchend",k);return this.element},destroyElement:function(){return g.remove(this.element)},init:function(){this.createElement();return this}};function e(l){while(h.element.hasChildNodes()){h.element.removeChild(h.element.firstChild)}var o=false;for(var m=0;m<l.length;m++){if(j(l[m].type)){var k=g.dom.createElement("source");k.src=l[m].file;k.type=l[m].type;h.element.appendChild(k);o=true}}var n=g.dom.createElement("p");n.innerHTML="Your browser does not support the video tag!";h.element.appendChild(n);if(!o){h.fire("video_error_noencodings")}h.element.load()}i.on("video_canplaythrough",function(){});i.on("video_playing",function(){h.element.poster="";g.empty(g.dom.getElementsByClassName("js-invodo-state")[0],function(){var k=g.dom.getElementsByClassName("js-invodo-load-video-blur");if(k.length>0){k[0].className=k[0].className.replace(/\bjs-invodo-load-video-blur\b/,"")}})});i.on("new_video",function(m){var l=m;h.element.poster=m.poster;var k=l.encodings.filter(function(n){return(n.label===l.encodings[0].label)});e(k)});g.on("videocontrolbar_encodingmenuitem_clicked",function(r){var k=i.time();var q=i.getCurrent();var l=i.playing();var m=q.encodings.filter(function(s){return(s.label===r.encodingLabel)});if(m.length===0){return}g.add(g.template.render("default.html5video_load"),"js-invodo-state","js-invodo-state");e(m);function n(){i.off("video_loadeddata",n);i.on("video_seeked",o);i.seek(k);var s=i.getCurrent().encodings.filter(function(t){return(t.label===r.encodingLabel)});h.fire("video_encoding_change",s.shift()||i.getCurrent().encodings[0])}function o(){i.off("video_seeked",o);if(l){i.play()}else{g.empty(g.dom.getElementsByClassName("js-invodo-state")[0])}}i.on("video_loadeddata",n)});b.EventDispatcher(h);return h};b.Display=a}(Invodo.Hi5||window));(function(a){var b=function(k){var h=[];var c={};var j=function(t,s){var r=!/\W/.test(t)?c[t]=c[t]||n.tmpl(document.getElementById(t).innerHTML):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return s?r(s):r};var o=k||j;var n={type:"template",init:function(){},addTemplate:function(r,s){h[r]=o(s)},removeTemplate:function(r){delete h[r]},getTemplate:function(r){return h[r]||""},render:function(s,r){r=r||{};return h[s](r)}};var f='<div class="invodo-normalize invodo-primary-font invodo-link-font"><div class="invodo-player__container"><section id="<%=containerId%>" class="invodo-player invodo-row"></section></div></div>';n.addTemplate("default.playercontainer",f);var d='<header id="<%=elementId%>" class="invodo-player--titlebar bg-color-dark invodo-width100 invodo-row"><aside class="invodo-player--title__image"><img src="http://placehold.it/25x25" /></aside><section class="invodo-player--title invodo-text-effect-overflow-hidden"><article class="invodo-text-effect-nowrap-fade-light js-invodo-titletext">Title</article></section><aside class="invodo-player--title__right"><article class="invodo-icon--col"><i class="js-invodo-ratingbutton invodo-icon invodo-icon--star invodo-player--tooltip invodo-tooltip--bottom"><div class="invodo-tooltip__content bg-color-dark"><span>Rate this Video</span></div></i></article><article class="invodo-icon--col"><i class="js-invodo-sharebutton invodo-icon invodo-icon--share invodo-player--tooltip invodo-tooltip--bottom"><div class="invodo-tooltip__content bg-color-dark"><span>Share</span></div></i></article><article class="invodo-icon--col"><i class="js-invodo-playlistbutton invodo-icon invodo-icon--menu invodo-player--tooltip invodo-tooltip--bottom"><div class="invodo-tooltip__content bg-color-dark"><span>More Videos</span></div></i></article></aside></header>';n.addTemplate("default.titlebar",d);var e='<footer id="<%=elementId%>" class="invodo-player--controlbar bg-color-dark invodo-row invodo-width100"><div class="invodo-col-12">&nbsp;<aside class="invodo-player--control__left"><i class="invodo-icon invodo-icon--play js-invodo-action-play"></i></aside><section class="invodo-player--control"><article class="invodo-player--timeline"><div class="invodo-player--progress js-invodo-progress"><div class="invodo-progress js-invodo-progress-play"><div class="invodo-progress--scrub js-invodo-time-scrub">&nbsp;</div></div><div id="pbar-buffer" class="invodo-progress js-invodo-progress-buffer">&nbsp;</div></div></article></section><aside class="invodo-player--control__right"><article class="invodo-time"><span class="invodo-time--start js-invodo-time-start">0:00</span>&nbsp;/&nbsp;<span class="invodo-time-finish js-invodo-time-end">0:00</span></article><article class="invodo-icon--col"><i class="invodo-icon invodo-icon--volume-high invodo-player-menu invodo-menu--top invodo-menu--hover-is-active js-invodo-btn-volume"><div class="invodo-menu__content bg-color-dark invodo-volume__container js-invodo-menu"><div class="invodo-volume--range__container js-invodo-volume"><div class="invodo-volume--range js-invodo-volume-amount"><div class="invodo-volume--scrub js-invodo-action-volume">&nbsp;</div></div></div></div></i></article><article class="invodo-icon--col"><i class="invodo-icon invodo-icon--cog invodo-player-menu invodo-menu--top invodo-player--tooltip invodo-tooltip--top js-invodo-encoding-selector"><div class="invodo-tooltip__content bg-color-dark"><span>Quality</span></div><div class="invodo-menu__content bg-color-dark js-invodo-encoding-menu"><ul></ul></div></i></article><article class="invodo-icon--col"><i class="invodo-icon invodo-icon--cc invodo-player--tooltip invodo-tooltip--top invodo-icon-is-disabled" disabled><div class="invodo-tooltip__content bg-color-dark"><span>Closed Captioning</span></div></i></article><article class="invodo-icon--col"><i class="invodo-icon invodo-icon--fullscreen js-invodo-action-fullscreen invodo-player--tooltip invodo-tooltip--top"><div class="invodo-tooltip__content bg-color-dark"><span>Full Screen</span></div></i></article></aside></div></footer>';n.addTemplate("default.videocontrolbar",e);var m='<main class="js-invodo-state"></main><video id="<%=elementId%>" class="js-invodo-play"></video>';var q='<section class="invodo-player__overlay invodo-play-bgcolor js-invodo-play"><aside class="invodo-col-3"></aside><aside class="invodo-col-2"></aside><section class="invodo-col-2"><div class="invodo-play--wrapper"><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"viewBox="0 0 62.75 62.5"  class="invodo-svg-play js-invodo-play"><path style="fill-rule:evenodd;clip-rule:evenodd;fill:#FFFFFF;" d="M31.375,62.5C14.047,62.5,0,48.509,0,31.25S14.047,0,31.375,0S62.75,13.991,62.75,31.25S48.703,62.5,31.375,62.5z M23.753,20.256v22.488L43.256,31.5L23.753,20.256z"/></svg></div></section><aside class="invodo-col-2"></aside><aside class="invodo-col-3"></aside></section>';var g='<div class="invodo-loader--overlay js-invodo-load-video-blur"><div class="invodo-loader"><span class="invodo-loader--wbar"></span><span class="invodo-loader--wbar"></span><span class="invodo-loader--wbar"></span><span class="invodo-loader--wbar"></span><span class="invodo-loader--wbar"></span></div></div>';n.addTemplate("default.html5video_start",m);n.addTemplate("default.html5video_play",q);n.addTemplate("default.html5video_load",g);var i='<div id="<%=elementId%>" class="invodo-player__overlay invodo-rating--bgcolor"><div class="invodo-rating--wrapper"><article class="invodo-rating--container js-invodo-toggle-initial"><h2 class="invodo-rating--heading">How helpful was this video?</h2><div class="invodo-rating--score__container"><i data-rating="1" class="invodo-icon invodo-icon--star invodo-star-is-inactive js-invodo-action-rating"></i><i data-rating="2" class="invodo-icon invodo-icon--star invodo-star-is-inactive js-invodo-action-rating"></i><i data-rating="3" class="invodo-icon invodo-icon--star invodo-star-is-inactive js-invodo-action-rating"></i><i data-rating="4" class="invodo-icon invodo-icon--star invodo-star-is-inactive js-invodo-action-rating"></i><i data-rating="5" class="invodo-icon invodo-icon--star invodo-star-is-inactive js-invodo-action-rating"></i></div><div class="invodo-comment--container invodo-comment-is-inactive"><textarea class="invodo-width100 invodo-comment--text js-invodo-ratingscomments" placeholder="Tell us why..."></textarea><div class="invodo-comment--charmax js-invodo-validation-charmax">140</div><button class="invodo-btn invodo-btn--alpha invodo-btn--comment js-invodo-action-comments" disabled>Submit</button></div></article><article class="invodo-rating--completed js-invodo-toggle-complete"><h2 class="invodo-rating--heading">Your feedback has been submitted.</h2><button class="invodo-btn invodo-btn--alpha invodo-btn--comment js-invodo-action-close">OK</button></article></div><div class="invodo-btn--close__container"><i class="invodo-icon invodo-icon--close js-invodo-action-close"></i></div></div>';n.addTemplate("default.ratingscomments",i);var l='<div id="<%=elementId%>" class="invodo-player__overlay invodo-sharing--bgcolor"><div class="invodo-sharing--wrapper"><article class="invodo-sharing--container"></article></div><div class="invodo-btn--close__container"><i class="invodo-icon invodo-icon--close js-invodo-action-close"></i></div></div>';n.addTemplate("default.sharing",l);return n};a.Template=b}(Invodo.Hi5||window));(function(a){var b=function(f,d,e,g){var c={};c.elements=[];g=g;c.config=f;c.dom=e;c.template=d;c.nav={};c.type="DOMManager";c.elementQueryResize=function(){var m=c.dom.getElementById(g);if(!m){return}var k=getComputedStyle(m);var l=["xs","sm","md","lg"];var j=null;if(parseInt(k.width,10)<=768){j=l[0]}else{if(parseInt(k.width,10)>768&&parseInt(k.width,10)<992){j=l[1]}else{if(parseInt(k.width,10)>=992&&parseInt(k.width,10)<1200){j=l[2]}else{if(parseInt(k.width,10)>=1200){j=l[3]}}}}if(m.className.indexOf(j)===-1){for(var h=0;h<l.length;h++){m.className=m.className.replace(l[h],"").trim()}c.fire("resize",{element:g,size:j});m.className=m.className+" "+j}};c.nav.getLocationHref=function(){return c.dom.location.href};c.nav.goToLocation=function(h){c.dom.location.href=h};c.init=function(){["webkitfullscreenchange","mozfullscreenchange","fullscreenchange"].forEach(function(h){e.addEventListener(h,function(i){c.fire("video_fullscreen",i)})});c.elementQueryResize()};c.create=function(i,h){var j=this.dom.createElement(i);j.id=h;return j};c.add=function(h,j,i){this.elements.push(i);if(this.dom.getElementById(j)!==null){this.dom.getElementById(j).insertAdjacentHTML("beforeend",h)}else{if(this.dom.getElementsByClassName(j).length>0){this.dom.getElementsByClassName(j)[0].insertAdjacentHTML("beforeend",h)}else{return false}}};c.get=function(h){return this.elements[h]};c.remove=function(h){return h.parentNode.removeChild(h)};c.empty=function(i,h){while(i.firstChild){i.removeChild(i.firstChild)}if(typeof h==="function"){return h()}return true};c.getScreenCoordinates=function(h){var i={};i.x=h.offsetLeft;i.y=h.offsetTop;return i};c.fullscreen=function(i){var h=function(q,o){if(o[q]){o[q]()}else{var l=["webkit","moz","o","ms"];for(var m=0;m<l.length;m++){var n=l[m]+q[0].toUpperCase()+q.slice(1);if(o[n]){o[n]()}}}};var k=function(){var l=false;if(typeof e.fullScreen!=="undefined"){l=e.fullScreen}else{if(typeof e.webkitIsFullScreen!=="undefined"){l=e.webkitIsFullScreen}else{if(typeof e.mozFullScreen!=="undefined"){l=e.mozFullScreen}}}return l};if(k()){h("cancelFullScreen",e)}else{var j=this.dom.getElementById(i);h("requestFullScreen",j)}};a.EventDispatcher(c);return c};a.UI=b}(Invodo.Hi5||window));"use strict";Invodo.Src.Widget.Astro=function(a){Invodo.Src.Widget.Astro.version="0.3.2";var n=[];var B;var c;var j;var o=this;var i;var V=a.type;var k;var C={};var v=a.podId;var J=a.mpd;var H={};var D={};var w={};var Q={};var x;var I;if(!("autoplay" in a)){if(a.mode==="embedded"){I=false}if(a.mode==="overlay"){I=true}}else{I=a.autoplay}if(v||J){Invodo.Pod.load({pod:v,mpd:J},function(W){s(W)})}var G=v||Invodo.Pod.getByMpd(J).pod;var b=Invodo.Pod.getExperimentData(G).branch;var e="";function O(W){if(Invodo.Src.Widget.GenericConfig.validate(W)){n=[];B="Astro_"+W.widgetId;c=[];j=W.parentDomId;i="div";V="Astro";k=W.widgetId;m();P(B,j,i)}else{console.log("Validation Error: widgetConfig is invalid")}}O(a);Invodo.Src.Widget.Mixin.call(this,{widgetId:k,parentDomId:j,type:V});Invodo.Video.Interface.call(this);Invodo.EventDispatcher(this);var y=null;var U;var T;var K;function l(){U=false;T=false;K=true}function A(){U=true;T=false;K=false}function E(){U=false;T=true;K=false}function M(){U=false;T=false;K=true}l();function t(Z){function ag(am){var at=am.frames;for(var an=0;an<at.length;an++){var ap={};ap.title=at[an].title;ap.duration=at[an].duration;ap.poster=at[an].previewUrl.replace(/.*?:/g,"");var ar=at[an].encodings;var aq=[];for(var al=0;al<ar.length;al++){var ao={};ao.type="video/mp4";ao.height=ar[al].height;ao.width=ar[al].width;ao.label=ar[al].label;ao.bitrate=ar[al].bitrate;ao.file=ar[al].http.replace(/.*?:/g,"");aq.push(ao)}ap.encodings=aq;ab.push(ap)}}function ai(){return{type:"videoplayer",parentId:j,Assets:[{type:"assets",preload:[{type:"css",path:"styles/hi5.css"}]}],MediaDisplay:[{type:"videodisplay",controls:false,skin:"default.videodisplay"}],Media:[{type:"videomedia",autoplay:I,config:ab}],VideoControlbar:[{type:"videocontrolbar",skin:"default.videocontrolbar"}],Titlebar:[{type:"titlebar",skin:"default.titlebar",buttons:[{type:"ratingscomments",cssclass:"js-invodo-ratingbutton"},{type:"sharing",cssclass:"js-invodo-sharebutton"},{type:"playlist",cssclass:"js-invodo-playlistbutton"}]}],RatingsComments:[{type:"ratingscomments",skin:"default.ratingscomments",commentslimit:140}],Sharing:[{type:"sharing",skin:"default.sharing",socialnetworks:{Facebook:"//www.facebook.com/sharer.php?u=",Twitter:"//twitter.com/share?text=what ever text&url=",Pinterest:"//pinterest.com/pin/create/button/?description=what ever text&media=http:"+ab[0].poster+"&url=",Email:"mailto:?subject=what ever text&body=what ever text%0D%0A%0D%0A"}}]}}function ah(al){return Invodo.Hi5.HTML5Factory(al)}function Y(){x.go()}function ad(){return x.media}function X(){Invodo.Lang.forEach(["video_play","video_timeupdate","video_ended","video_pause","new_video"],function(am,al){H.on(al,function(ao){var an=h(ao,al);if(al==="video_play"){F(an)}if(al==="new_video"){d("newVideo",an)}if(al==="video_timeupdate"){var ap=o.getTime();o.sendUpdate({data:ap});if(!y&&o.isPlaying()){N()}d("timeUpdate",an)}if(al==="video_ended"){L();M();z("videoComplete",ao);d("videoComplete",ao);z("podComplete",ao);d("podComplete",ao)}if(al==="video_pause"){L();E();f();z("videoPause",ao);d("videoPause",ao)}})})}function W(){return x.ui}function aj(){return x.ratingscomments}function aa(){return x.display}function ac(){Invodo.Lang.forEach(["titlebar_ratingscomments_click","titlebar_sharing_click","sharing_sendbutton_click","ratingscomments_sendbutton_click","videocontrolbar_encodingbutton_clicked"],function(am,al){D.on(al,function(an){if(al==="titlebar_ratingscomments_click"){z("buttonRatingClicked")}if(al==="titlebar_sharing_click"){z("buttonSharingClicked")}if(al==="sharing_sendbutton_click"){z("userClick",{playertype:"inplayer",clktype:"share",clktgt:an.socialnetwork})}if(al==="ratingscomments_sendbutton_click"){z("rating",{score:an.stars,note:an.comment})}if(al==="videocontrolbar_encodingbutton_clicked"){z("buttonBitrateClicked")}})})}function af(){Invodo.Lang.forEach(["video_encoding_change"],function(am,al){w.on(al,function(an){if(al==="video_encoding_change"){z("bitrateSelected",{h:an.height,w:an.width,br:an.bitrate})}})})}function ae(){var ao=new Invodo.Dom("#"+j);var al=ao.elements[0].childNodes[1];if(al.clientHeight!==0&&al.clientHeight!==undefined){if(a.mode==="embedded"){var am=v||Invodo.Pod.getByMpd(J).pod;var ap={pn:Invodo.getPageName(),pod:am};var an=Invodo.Pod.getExperimentData(am);if(an.experiment){ap.ex=an.experiment+"/"+an.branch}ap.vis=ao.visibleInViewPort();z("ctaView",ap)}}}var ab=[];ag(Z);var ak=ai();x=ah(ak);Y();H=ad();X();D=W();ac();w=aa();af();Q=aj();o.fire("videoPlayerCreated");ae()}function h(X,W){X=X||{};X.pod=b;X.fr=e;if(!("tm" in X)){X.tm=H.time()}if(!("type" in X)){X.type=W}return X}o.getTime=function(){return H.time()||0};o.getDuration=function(){return H.duration()||0};o.isPaused=function(){return T};o.isPlaying=function(){return U};o.stop=function(){H.pause();H.seek(0);M()};o.isStopped=function(){return K};o.mute=function(){return o.muteToggle()};o.muteToggle=function(){var W=H.muted();if(W){H.unmute()}else{H.mute()}return !W};o.pause=function(){H.pause()};o.pauseVideo=function(){o.pause()};o.play=function(){H.play()};o.replay=function(){H.set(0);H.play()};o.setTime=function(W){H.seek(W)};o.reset=function(){H.set(0);M()};var u=false;o.loadVideo=function(){H.set(0);H.play()};o.getAutoplay=function(){return I};o.playButtonClick=function(){o.play()};o.ratingButtonClick=function(){Q.show();z("buttonRatingClicked")};o.getMode=function(){return a.mode};o.getStyle=function(Y,X){var W=document.getElementById(Y);return W.style[X]};o.setStyle=function(Y,X){var W=document.getElementById(j);W.style[Y]=X};o.setParentDomId=function(W){j=W};o.getId=function(){return k};o.getInfo=function(){return false};o.getListensTo=function(){return c};o.getMpd=function(){return J};o.getParentDomId=function(){return j};o.getPodId=function(){return v};o.getVideoId=function(){return e};o.getType=function(){return V};o.sendUpdate=function(W){W.widgetId=k;Invodo.Widget.update(W)};o.receiveUpdate=function(Y){for(var X in c){var W=c[X];if(Y.widgetId===W&&Y.data==="show"){o.show()}o.fire("receivedUpdate",Y)}};o.registerEventListener=function(W,X){n.push({eventName:W,callback:X});o.fire("eventRegistered",n);return o};o.unregisterEventListener=function(W,Y){for(var X=0;X<n.length;X++){if(n[X].eventName===W&&n[X].callback===Y){n.splice(X,1)}}o.fire("eventUnregistered",n);return o};function F(W){if(!o.isPlaying()){z("ctaClick",W);d("ctaClick",W)}if(o.isPaused()){z("videoUnpause",W);d("videoUnpause",W)}A();z("videoStart",W);d("videoStart",W);g();if(!y){N()}}function N(){y=window.setInterval(f,5000)}function L(){clearInterval(y);y=undefined;o.fire("stoppedLogging",y)}function g(){if(u===false){u=true;S()}else{r()}}function S(){var Y=Invodo.Pod.getExperimentData(v||Invodo.Pod.getByMpd(J).pod),X=Y.branch;d("podStart");var W=Invodo.Module.get("logger");W.log(k,"podStart",{pod:X})}function r(){var Y=Invodo.Pod.getExperimentData(v||Invodo.Pod.getByMpd(J).pod),X=Y.branch;d("podStarted");var W=Invodo.Module.get("logger");W.log(k,"podStarted",{pod:X})}function f(){var Y=o.getTime();var X={};X.tm=Y;var W=h(X);z("timePlayed",W);d("timePlayed",W);o.sendUpdate({eventData:Y})}function s(W){var X=Invodo.getAffiliateConfig();v=W.pod;Invodo.SEO.setSeoStructMetaTags(v);W=Invodo.Lang.mix({},W);C.frames=W.config.frames;C.config=X;C.config.mode=a.mode="embedded";e=C.frames[0].durableId;if(o.onpodload){o.onpodload(W.pod)}t(C)}function z(aa,ac){var Z=Invodo.Pod.getExperimentData(v||Invodo.Pod.getByMpd(J).pod);if(!ac){ac={}}if(ac.mark){ac.tm=ac.mark;delete ac.mark}if(ac.method){ac.vc=ac.method;delete ac.method}if(aa==="ctaClick"&&Z){ac.ex=Z.experiment+"/"+Z.branch}if(Z){if("branch" in Z){ac.pod=Z.branch}}var Y=Invodo.Module.get("logger");var X=Invodo.Src.Widget.Astro.EventTranslator(o);var ab=X.translate(aa,ac,o,{videoId:e});var W=Y.log(k,aa,ab);return W}function P(Y,aa,X){var W=document.getElementById(aa);var Z=document.createElement(X);Z.id=Y;W.appendChild(Z)}function m(){var W;if("listensTo" in a){W=a.listensTo;if(typeof W==="string"){c=W.split(",")}else{c=W}}}function d(W,Y){q(W);for(var X=0;X<n.length;X++){R(W,Y,n,X)}}function R(W,Z,Y,X){if(Y[X].eventName===W){(function(aa,ac){var ab=ac||{};setTimeout(function(){ab.widgetId=k;ab.eventName=W;Y[aa].callback(ab)},5)})(X,Z)}}function q(W){switch(W){case"videoComplete":M();break;default:break}}};Invodo.Src.Widget.GenericConfig={validate:function(b){var a=b;if(!("widgetId" in b)){a=false}if(!("parentDomId" in b)){a=false}return a}};Invodo.Src.Widget.Astro.EventTranslator=function(){var a={};a.translate=function(d,g,e,f){var c;switch(d){case"ctaClick":c=b.clone(g);c.et="ctaClick";delete c.type;delete c.ex;c.position=e.getTime().toFixed(3);c.duration=e.getDuration().toFixed(3);break;case"videoStart":c=b.clone(g);c.et="videoStart";delete c.type;delete c.ex;c.vc="http";c.position=e.getTime().toFixed(3);c.duration=e.getDuration().toFixed(3);break;case"videoComplete":c=b.clone(g);c.vc="http";c.position=c.tm=e.getTime().toFixed(3);c.duration=e.getDuration().toFixed(3);c.fm=f.videoId;c.et="videoComplete";break;case"videoPause":c=b.clone(g);c.position=c.tm=e.getTime().toFixed(3);c.duration=e.getDuration().toFixed(3);c.fr=(f&&("videoId" in f))?f.videoId:"";break;case"podComplete":c=b.clone(g);c.position=c.tm=e.getTime().toFixed(3);c.duration=e.getDuration().toFixed(3);c.fm=f.videoId;c.et="podComplete";break;case"videoUnpause":c=b.clone(g);c.et="videoUnpause";delete c.type;delete c.ex;c.position=e.getTime().toFixed(3);c.duration=e.getDuration().toFixed(3);c.tm=c.tm.toFixed(3).toString();break;case"timePlayed":c=b.clone(g);delete c.type;break;default:c=g;break}return c};var b={add:function(f,d){var c;var e=typeof f;switch(e){case"object":c=b.clone(f);var g;for(g in d){c[g]=d[g]}break;case"string":case"number":case"boolean":c=f+d;break;default:c=f}return c},clone:function(c){return JSON.parse(JSON.stringify(c))}};return a};