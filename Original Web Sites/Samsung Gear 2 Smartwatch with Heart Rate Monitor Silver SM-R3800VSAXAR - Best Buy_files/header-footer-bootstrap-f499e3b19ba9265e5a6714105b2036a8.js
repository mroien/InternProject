/* Src File:"header-footer/javascript/desktop/header-footer-bootstrap-f499e3b19ba9265e5a6714105b2036a8.js" @ Wed Mar 25 2015 16:19:17 GMT-0500 (CDT) Group_ID: com.bestbuy.frontend.browse GIT_BRANCH: origin/develop BUILD_CAUSE: MANUALTRIGGER Build Version: version-not-found */

!function(){function e(e,r){return e.exists(r._get(!1,["quantity"]),r,{block:t},null)}function t(e,t){return e.helper("if",t,{block:r},{cond:n})}function r(e,t){return e.write('<span class="header-icon-solid-circle"></span><span class="count">').reference(t._get(!1,["quantity"]),t,"h").write("</span>")}function n(e,t){return e.reference(t._get(!1,["quantity"]),t,"h").write(" > 0")}return dust.register("header-footer/dust/desktop/cart-count",e),e}(),define("header-footer/dust/desktop/cart-count",["bluebird","dust"],function(e,t){return{render:function(r,n){r=r||{};var o=t.render,a="header-footer/dust/desktop/cart-count";return"function"==typeof r&&(n=r),n?o.call(t,a,r,n):e.promisify(o,t)(a,r)}}}),function(){function e(e){return e.write('<div class="alert-container"><div class="alert-wrapper"><div class="alert-header"><h3 class="bbyalert-text">It looks like you\'re using an older version of Internet Explorer.</h3><a class="iemsg-close-warning" title="Close"></a></div><div class="alert-body"><p>To best view our site — and for a better experience overall on the Web — please update your browser using the links below. It\'s free and it takes just a minute.</p><p>Download the latest version of <a href="https://www.google.com/intl/en/chrome/browser/" target="_blank">Chrome</a>, <a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank">FireFox</a> or <a href="http://windows.microsoft.com/en-US/internet-explorer/download-ie" target="_blank">Internet Explorer</a>.</p></div></div><div class="clearer"></div></div>')}return dust.register("header-footer/dust/desktop/browser-msg",e),e}(),define("header-footer/dust/desktop/browser-msg",["bluebird","dust"],function(e,t){return{render:function(r,n){r=r||{};var o=t.render,a="header-footer/dust/desktop/browser-msg";return"function"==typeof r&&(n=r),n?o.call(t,a,r,n):e.promisify(o,t)(a,r)}}}),define("sc-announcer/javascript/announcer",["require","lodash"],function(e){var t=e("lodash"),r=function(){var e=Array.prototype.slice.call(arguments),r={};t.isObject(t.last(e))&&(r=t.extend(r,e.pop()))};return r.polite=function(){r.ready&&$("#aria-announcer-polite").html(Array.prototype.join.call(arguments," "))},r.assertive=function(){r.ready&&$("#aria-announcer-assertive").html(Array.prototype.join.call(arguments," "))},$(function(){if(!r.ready){var e='<div id="aria-announcer" style="position: absolute; top: 1000%; width: 0; height: 0; overflow: hidden;"><div id="aria-announcer-polite" aria-live="polite"></div><div id="aria-announcer-assertive" aria-live="assertive"></div></div>';$("body").append(e),r.ready=!0}}),r}),define("_libraries/javascript/cookieManager",["require"],function(){function e(e){e+="=";for(var t=document.cookie.split(";"),r=0;r<t.length;r++){for(var n=t[r];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return decodeURIComponent(n.substring(e.length,n.length))}return null}function t(e,t,r,n){var o,a="";if("string"==typeof n&&(a="; domain="+n),"session"===r)o="";else{var i=new Date;i.setDate("number"!=typeof r?i.getDate()+365:i.getDate()+r),o=i.toGMTString()}document.cookie=e+"="+encodeURIComponent(t)+"; expires="+o+a+"; path=/;"}function r(e){t(e,"",-1)}var n={get:e,set:t,"delete":r};return n}),define("header-footer/javascript/desktop/views/header-view",["require","backbone","eventmanager","../../../dust/desktop/cart-count","../../../dust/desktop/browser-msg","jquery","sc-announcer/javascript/announcer","_libraries/javascript/cookieManager"],function(e){var t,r=e("backbone"),n=e("eventmanager"),o=e("../../../dust/desktop/cart-count"),a=e("../../../dust/desktop/browser-msg"),i=e("jquery"),s=e("sc-announcer/javascript/announcer"),c=e("_libraries/javascript/cookieManager"),u=r.View.extend({timeoutDuration:350,timeout:null,forced:!1,initialize:function(){this.listenTo(n,"addToCart:done:success",this.onAddToCartSuccess)},events:{"click .skip":"onClickSkip","click .sign-out":"onClickSignOut","submit form[name=frmSearch]":"onSubmitSearch","click .js-navitem":"onClickNavItem","mouseenter .js-navitem":"onMouseenterNavItem","mouseleave .js-navitem":"onMouseleaveNavItem","click a.iemsg-close-warning":"onCloseWarning"},postRender:function(){var e=this;i("body").click(function(t){i(t.target).parents().is("#header")||(e.hideMenus(),e.reopenForcedMenu())});var t=c.get("DYN_USER_ID");null!==t&&this.$("#logout-session-id").attr("value",t),i("#header").hasClass("ie8-below")&&!c.get("hideEnvWarning")&&this.renderBrowserMsg()},onAddToCartSuccess:function(e){this.renderCartCount(e)},renderCartCount:function(e){return o.render(e).then(function(e){this.$(".count-container").html(e)})},renderBrowserMsg:function(){return a.render().then(function(e){this.$(".browser-check").html(e)})},onCloseWarning:function(){c.set("hideEnvWarning",!0),this.$(".browser-check").hide()},onClickSignOut:function(e){e.preventDefault(),this.$("form[name=logoutForm]").submit()},onClickSkip:function(e){var t=e.currentTarget,r="#"+t.href.split("#")[1];i(r).attr("tabindex",-1).on("blur focusout",function(){i(t).removeAttr("tabindex")}).focus()},onSubmitSearch:function(e){var t=this.$("input[name=st]"),r=i.trim(t.val());("Search BestBuy.com"===r||""===r||"%"===r)&&e.preventDefault(),n.trigger("Header:Search:Submit",this)},onClickNavItem:function(e){"#"===i(e.target).attr("href")&&e.preventDefault(),this.showMenu({style:"sticky",currentTarget:e.currentTarget,actualTarget:e.target})},onMouseenterNavItem:function(e){var t=i(e.target).closest(".js-navitem")[0];this.showMenu({currentTarget:t})},onMouseleaveNavItem:function(e){var t=i(e.currentTarget),r=t.data("sticky"),n=t.data("force"),o=this;r||n||(this.timeout=setTimeout(function(){t.removeClass("active"),t.find(".js-subnav").hide(),o.reopenForcedMenu()},o.timeoutDuration))},forceMenu:function(e){this.forced=e,this.showMenu({style:"force",currentTarget:this.$("."+e+"Menu")[0]})},unforceMenu:function(e){this.$("."+e+"Menu").data("force",!1),this.forced=!1,this.hideMenus()},showMenu:function(e){var t=i(e.currentTarget);switch(this.hideMenus({currentTarget:e.currentTarget}),e.style){case"sticky":t.data("sticky")===!0?(t.removeClass("active"),t.children(".js-subnav").hide(),t.data("sticky",!1),s.polite("Menu closed"),this.reopenForcedMenu()):(t.addClass("active"),t.children(".js-subnav").show(),t.data("sticky",!0),s.polite("Menu open"));break;case"force":t.addClass("active"),t.children(".js-subnav").show(),t.data("force",!0);break;default:clearTimeout(this.timeout),t.data("sticky")!==!0&&(clearTimeout(this.timeout),t.addClass("active"),t.children(".js-subnav").show())}},hideMenus:function(e){var t=this;this.$(".js-navitem").each(function(r,n){var o=i(n),a=!1,s=!1,c=!1,u=!1,d=!0;if(e&&e.currentTarget){var l=i(e.currentTarget),p=l.parents(".js-navitem");p[0]===n&&(s=!0),e.currentTarget===n&&(a=!0),c=l.hasClass("js-forceexempt"),o.data("force")&&(u=!0),u&&c&&(d=!1)}d||t.reopenForcedMenu(),a||s||!d||(o.removeClass("active"),o.find(".js-subnav").hide(),o.data("sticky",!1))})},reopenForcedMenu:function(){this.forced&&this.showMenu({style:"force",currentTarget:this.$("."+this.forced+"Menu")[0]})}});return u.instance=function(){return t||(t=new u({el:i("#header")})),t},u}),function(e){var t={init:function(t){return this.each(function(){var r=e(this);t=e.extend({},e.fn.bbypopup.defaults,t);var n=r.data();for(var o in n)if(-1!=o.indexOf("bbypopup")){var a=o.replace("bbypopup","").toLowerCase();if(void 0!=e.fn.bbypopup.defaults[a]){var i=n[o];t[a]=i}}r.data("bbypopup",{target:r,options:t,internal:{}});var s,c,u,d=r.attr("href"),l="toolbar="+t.toolbar+",location="+t.location+",status="+t.status+",menubar="+t.menubar+",scrollbars="+t.scrollbars+",resizable="+t.resizable+",width="+t.width+",height="+t.height,a=t.name;r.attr("href","#"),r.click(function(){return t.center&&(c=(screen.width-parseInt(t.width))/2,u=(screen.height-parseInt(t.height))/2,l=l+",left="+c+",top="+u),s=window.open(d,a,l),s.focus(),!1})})},destroy:function(){return this.each(function(){var t=e(this);t.unbind("click"),t.removeData("bbypopup")})}};e.fn.bbypopup=function(r){return t[r]?t[r].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof r&&r?void e.error("Method "+r+" does not exist on jQuery.bbypopup"):t.init.apply(this,arguments)},e.fn.bbypopup.defaults={name:"popup",status:"no",toolbar:"no",location:"no",menubar:"no",resizable:"yes",scrollbars:"yes",width:600,height:500,center:!0}}(jQuery),define("popup",function(){}),define("header-footer/javascript/desktop/views/footer-view",["require","backbone","_libraries/javascript/cookieManager","lodash","popup"],function(e){var t=e("backbone"),r=e("_libraries/javascript/cookieManager"),n=e("lodash");return e("popup"),t.View.extend({initialize:function(){this.$(".bbypopup").bbypopup()},events:{"click .mobile-redirect":"onClickMobileRedirect","click .translate":"onClickTranslate"},onClickMobileRedirect:function(e){e.preventDefault(),r.set("bby_rdp","s","",".bestbuy.com"),document.cookie="mob_optout=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.bestbuy.com; path=/;",location.reload()},onClickTranslate:function(e){e.preventDefault(),this.switchLanguage()},switchLanguage:function(){var e=["www.bestbuy.com","www-ssl.bestbuy.com"],t=["espanol.bestbuy.com","espanol-ssl.bestbuy.com"],r=document.location,o="http://"+t[0]+"/";n.each(e,function(e,n){r.host===e&&(o=r.protocol+"//"+t[n]+r.pathname+r.search)}),n.each(t,function(t,n){r.host===t&&(o=r.protocol+"//"+e[n]+r.pathname+r.search)}),window.top.location.href=o}})}),require(["header-footer/javascript/desktop/views/header-view","header-footer/javascript/desktop/views/footer-view"],function(e,t){var r=e.instance();r.postRender();new t({el:$("#footer")})}),define("header-footer/javascript/desktop/header-footer-bootstrap",function(){});