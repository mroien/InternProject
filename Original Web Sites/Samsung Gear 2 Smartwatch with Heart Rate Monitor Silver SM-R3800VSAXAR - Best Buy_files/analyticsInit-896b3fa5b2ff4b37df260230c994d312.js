/* Src File:"analytics-dotcom/analyticsInit-896b3fa5b2ff4b37df260230c994d312.js" @ Wed Mar 18 2015 11:59:34 GMT-0500 (CDT) Group_ID: com.bestbuy.frontend.dio GIT_BRANCH: origin/release/15.13.1 BUILD_CAUSE: MANUALTRIGGER Build Version: 15.13.1 */

define("analytics-core/util/scheduler",function(){var e=function(){var e=function(e,t,a){this._maxRate=a?e:e/t,this._interval=t,this._allowBursts=a,this._numOps=0,this._start=(new Date).getTime(),this._queue=[]};return e.prototype.schedule=function(e){var t=this,a=0,n=(new Date).getTime(),i=n-this._start;i>this._interval&&(this._numOps=0,this._start=n),a=this._numOps/(this._allowBursts?1:i),a<this._maxRate?0===this._queue.length?(this._numOps++,e()):(e&&this._queue.push(e),this._numOps++,this._queue.shift()()):(e&&this._queue.push(e),setTimeout(function(){t.schedule()},1/this._maxRate))},e}();return{initialize:function(t){return t.resolve(new e(1,300,!1))}}}),define("analytics-core/analyticsTracker",function(){function e(){this.setData("scEventsArray",[])}var t=$("div#analytics-data"),a=$("div#analytics-user-data");return window.track||(window.track={}),$.extend(window.track,t.data(),a.data()),e.prototype={on:function(){this.options.events.on.apply(null,arguments)},when:function(){this.options.events.when.apply(null,arguments)},once:function(){this.options.events.once.apply(null,arguments)},info:function(){this.options.events.info.apply(null,arguments)},trigger:function(){this.options.events.trigger.apply(null,arguments)},triggerSignal:function(){this.options.events.triggerSignal.apply(null,arguments)},options:{DEVMODE:!1,signalTagSupported:!1,data:_.clone(window.track)||{},supportedHosts:["www.bestbuy.com","www-ssl.bestbuy.com"],pageNameProperties:["uberCatName","parentCatName","catName"],siteName:"",trackingFiles:[],eventDataKeys:["pageName"],events:{on:_.bind(EventManager.on,EventManager),when:_.bind(EventManager.when,EventManager),once:_.bind(EventManager.once,EventManager),info:_.bind(EventManager.info,EventManager),trigger:_.bind(EventManager.trigger,EventManager),triggerSignal:_.bind($(window).trigger,$(window))}},buildTrackingValue:function(e,t,a){var n=_.reduce(_.pick(a||this.options.data,e),function(e,a){return a?e?e+t+a:a:e});return n||null},getPageName:function(){return this.buildTrackingValue(this.options.pageNameProperties,": ")},clearSiteCatVars:function(){try{window.s.clearVars()}catch(e){this.logAnalyticsError("clearSiteCatVars")}},logAnalyticsError:function(e){this.trigger("analytics:error",e)},sendTrackingData:function(){this.onBeforeSendData&&this.onBeforeSendData(),this.options.signalTagSupported&&this.trigger("analytics:ready")},sendEventData:function(e){var t={},a=this;this.onBeforeSendEvent&&this.onBeforeSendEvent(),this.options.signalTagSupported&&(_.each(this.options.eventDataKeys,function(e){t[e]=null}),this.loadModules(["analytics-core/util/scheduler"],!0).then(_.bind(function(module){module.schedule(function(){a.triggerSignal("analytics:signal:SiteCatalyst",_.extend(t,e))})}),this))},sendStateData:function(){var e=this;this.onBeforeSendState&&this.onBeforeSendState(),this.options.signalTagSupported&&this.loadModules(["analytics-core/util/scheduler"],!0).then(_.bind(function(module){module.schedule(function(){e.triggerSignal("analytics:signal:stateChange")})}),this)},setOptions:function(e){return $.extend(!0,this.options,e),this.options},getData:function(e){return(e?this.options.data[e]:this.options.data)||!1},setData:function(e,t){_.isObject(e)?_.extend(this.options.data,e):this.options.data[e]=t},addEvents:function(){_.each(arguments,function(e){if(!_.isString(e))throw new Error("Method expects `string`");this.options.data.scEventsArray.push(e.toString().replace(/[\,\:]/g,""))},this)},startTracking:function(e){if(e){var t=this;this.when("page:ready",function(){t.setData(window.track),$.when.apply(t,t._initializeModules(e)).done(_.bind(function(){t.sendTrackingData()},this))})}else this.sendTrackingData()},loadModules:function(e,t){var a,n=$.Deferred();if(t&&(a=$.Deferred(),n.done(_.bind(function(e){$.when.apply(this,this._initializeModules(e)).done(a.resolve)},this))),_.isFunction(e))e(n);else{if(!_.isArray(e))throw new Error("Method expects `Array` or `Function`");require(e,function(){n.resolve(arguments)})}return t?a:n},setAction:function(e,t){this[e]=_.bind(t,this)},_initializeModules:function(e){var t=[];return _.each(e,function(module){if("undefined"!=typeof module){var e=$.Deferred(),a=module.initialize?module.initialize:function(){};module.initialize=_.once(a),t.push(module.initialize.call(module,e))}}),t}},_.bindAll(new e)}),define("analytics-dotcom/modules/global",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=require("analytics-core/util/queryParameters"),n=a.getQueryParams(),i=e.getData(),r=t.getLegacyCookieObject();return{_setRzTierCode:function(){var t=window.location;if(t.hostname.indexOf("www.bestbuy")>=0||t.hostname.indexOf("www-ssl.bestbuy")>=0){var a="https:"===t.protocol?"https://www-ssl.bestbuy.com/api/1.0/fragment/data/tierCode":"http://www.bestbuy.com/api/1.0/fragment/data/tierCode";$.ajax(a).done(function(t){var a;if("string"==typeof t)a=JSON.parse(t);else{if("object"!=typeof t)return!1;a=t}return a.rzTierStatus?(e.setData("rzTier",a.rzTierStatus),!0):void 0})}return!1},_buildPageName:function(){var t=["uberCatName","parentCatName","catName"];return e.buildTrackingValue(t,": ")},_buildPageHierarchy:function(){var t=["uberCatName","parentCatName"];return t.push(i.catId&&"pdp"===i.catId?"catId":"catName"),e.buildTrackingValue(t,",")},_buildCategoryId:function(){return e.buildTrackingValue(["uberCatId","parentCatId","catId"],": ")},_buildCategoryName:function(){var e=this._buildPageName();return e?_.first(e.split(":"),2).join(":"):null},_buildCampaignId:function(){if(n.ref&&n.loc){var t=[];return t.push("ref","loc"),n.acampID&&t.push("acampID"),e.buildTrackingValue(t,",",n)}return n.cmp?n.cmp:n.dcmp?n.dcmp:!1},_buildMonetateValue:function(){var e=window.MT_flag||t.getCookie("mt.s_monetateFlag");return e?"Monetate;"+e:null},_getCartItemCount:function(){var e,a=t.getCookie("CartItemCount");return e=a&&a.length>0?parseInt(a,10):0},_bazaarVoiceCheck:function(){"undefined"!=typeof $BV&&$BV.ui("rr","show_reviews",{})},setData:function(){n=a.getQueryParams(),r=t.getLegacyCookieObject(),e.setData({scEvents:"",scEventsArray:[]}),t.getCookie("bby_rdp")&&e.setData("viewSize",t.getCookie("bby_rdp")),n.et_cid&&e.setData("exTgtCampaign",n.et_cid),n.et_rid&&e.setData("exTgtRecipient",n.et_rid),n.icmp&&e.addEvents("event16");var s=this._buildCampaignId();if(s){var c=new Date;t.setLegacyCookie("campaign_date",c.getTime()),t.setLegacyCookie("campaign",s),e.setData("campaignId",s)}this._setRzTierCode(),r.clickAction&&(e.setData("clickAction",r.clickAction),t.setLegacyCookie("clickAction","","delete")),n.searchRedirect&&e.setData("searchTermSuccess","redirect: "+n.searchRedirect.replace(/\+/g," ").toLowerCase()),t.getCookie("eut")?("false"===r.wasLoggedIn&&(e.addEvents("event9"),t.setLegacyCookie("wasLoggedIn",null,"delete")),e.setData("partyID",t.getCookie("eut"))):t.setLegacyCookie("wasLoggedIn","false"),n.ep&&e.setData("epClick",n.ep+(n.ref?",ref="+n.ref:"")),r.searchLocation&&(e.setData("searchLocation",r.searchLocation),t.setLegacyCookie("searchLocation","","delete")),r.autocomplete&&(e.setData("searchAutocomplete",r.autocomplete),t.setLegacyCookie("autocomplete","","delete")),r.headerBanner&&(e.addEvents("event26"),e.setData("headerBannerClick",r.headerBanner),t.setLegacyCookie("headerBanner","","delete")),e.setData({tealeafId:t.getCookie("SID")||"no_id",monetateValue:this._buildMonetateValue(),cartItemCount:this._getCartItemCount(),itemsInCart:this._getCartItemCount()+" item"+(this._getCartItemCount()>1?"s":"")+" in cart",categoryId:this._buildCategoryId(),categoryName:this._buildCategoryName(),hierarchy:this._buildPageHierarchy(),language:"es"===document.getElementsByTagName("html")[0].lang?"es":"en",pageName:this._buildPageName(),section:i.uberCatName||i.parentCatName||i.catName||null})},setEvents:function(){e.on("analytics:trackEvent:event",function(t){e.sendEventData(t)}),e.on("survey:invite",function(){var a={confirmIt:t.getCookie("s_vi")};e.sendEventData(a)}),this._bazaarVoiceCheck(),e.on("Header:Search:Submit",function(e){if(t.setLegacyCookie("searchLocation",i.pageName),e&&e.autocomplete){var a=[e.autocomplete.selectedTerm];a.push(e.autocomplete.selectedCategory?e.autocomplete.selectedCategory:"null"),a.push(e.autocomplete.partialTerm),t.setLegacyCookie("autocomplete",a.join(": "))}}),e.on("addToPackage",function(){e.sendEventData({templateName:i.templateName,clickAction:"mobilepkg:Add to Package",linkName:"mobilepkg:Add to Package"})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/trackEvent",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{trackEvent:{_announce:function(t){e.trigger("analytics:trackEvent:event",t)},event:function(t,a){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({clickAction:a.clickAction||null,scEvents:a.conversion||null,scProducts:a.d_product||null,pageName:a.page||null,section:a.d_uberCat||null,templateName:a.templateName||null,linkName:a.lid||null,errorCodes:a.errorCodeList||null,ccApplication:a.ccApplication||null,lastLink:a.lastLink||null,seePriceIn:a.seePriceIn||null,pageCampaign:a.pageCampaign||null,abTest66:a.abTest66||null,abTest67:a.abTest67||null,abTest68:a.abTest68||null,legacyCodebase:"te.event"})},map:{},_SaveCookie:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},api:{trackClick:function(t,a){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(t,a),legacyCodebase:"te.trackClick"})},trackCustomLink:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(t,i),lastLink:this._createLink(a,n,i),legacyCodebase:"te.trackCustomLink"})},trackTabClick:function(t,a,n){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({lastLink:this._createLink(t,a,n),legacyCodebase:"te.trackTabClick"})},trackErrorCodes:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({page:this._createPageName(i),lastLink:this._createLink(a,n),errorCodes:t,legacyCodebase:"te.trackErrorCodes"})},trackNewWindow:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:n,clickAction:this._createAction(t,a,i),legacyCodebase:"te.trackNewWindow"})},trackLightboxLaunch:function(a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:this._createLightboxName(n,i),section:t.uberCatName||t.parentCatName||t.catName,clickAction:this._createAction("","launch",i),templateName:i+": "+n,legacyCodebase:"te.trackLightboxLaunch"})},trackLightboxClick:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({pageName:this._createLightboxName(a,i),lastLink:this._createLink(a+": "+t,n,i),clickAction:this._createAction(a+": "+t,n,i),legacyCodebase:"te.trackLightboxClick"})},trackAddToCartClick:function(t,a){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({linkName:this._createLid(t,a),lastLink:this._createLink(t,"click",a),legacyCodebase:"te.trackAddToCartClick"})},trackPageCampaign:function(t,a,n,i){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events."),this._announce({lastLink:this._createLink(t,n,i),campaignId:a,legacyCodebase:"te.trackPageCampaign"})},EPsplit:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackEPView:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackEPClick:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackABTestView:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},trackABTestClick:function(){e.info("TrackEvent methods are deprecated; please contact Analytics for help transitioning to using EventManager events.")},_createLid:function(e,t){return("string"==typeof t&&t.length>0?t+": ":"")+e},_createLink:function(e,t,a){return e+("string"==typeof a&&a.length>0?": "+a:"")+("string"==typeof t&&t.length>0?": "+t:"")},_createPageName:function(e){var a="";return a=t.pageName.length>0?t.pageName:(t.uberCatName?t.uberCatName+": ":"")+(t.parentCatName?t.parentCatName+": ":"")+("pdp"===t.catId?t.catId:t.catName?t.catName:""),a+("string"==typeof e&&e.length>0?": "+e:"")},_createAction:function(e,t,a){return("string"==typeof a&&a.length>0?a+": ":"")+e+("string"==typeof t&&t.length>0?": "+t:"")},_createLightboxName:function(e,a){var n="";return n="string"==typeof e&&e.length>0?e:t.pageName?t.pageName:(t.uberCatName?t.uberCatName+": ":"")+(t.parentCatName?t.parentCatName+": ":"")+("pdp"===t.catId)?t.catId:t.catName?t.catName:"",n+("string"==typeof a&&a.length>0?": "+a:"")}}},initialize:function(e){return this.trackEvent.api._announce=this.trackEvent._announce,window.trackEvent=this.trackEvent,e.resolve()}}}),define("analytics-core/util/browserStorage",function(){return{saveValue:function(e,t,a){var n,i;if("undefined"==typeof a||"local"!==a?(a="session",n=sessionStorage,i=localStorage):(n=localStorage,i=sessionStorage),"undefined"!=typeof i["DIO"+e]){if("undefined"==typeof n["DIO"+e])return!1;i.removeItem("DIO"+e)}return"object"==typeof t?n["DIO"+e]="%%DIOJSON%%"+JSON.stringify(t):("string"==typeof t||"number"==typeof t)&&(n["DIO"+e]=t),a},getValue:function(e,t){var a=null;return"undefined"!=typeof sessionStorage["DIO"+e]?a=sessionStorage["DIO"+e]:"undefined"!=typeof localStorage["DIO"+e]&&(a=localStorage["DIO"+e]),null!==a?(t===!0&&(sessionStorage.removeItem("DIO"+e),localStorage.removeItem("DIO"+e)),"%%DIOJSON%%"===a.substring(0,11)?JSON.parse(a.substring(11)):a):void 0},removeItem:function(e){localStorage.removeItem("DIO"+e),sessionStorage.removeItem("DIO"+e)},initialize:function(e){return e.resolve()}}}),define("analytics-core/util/cookies",function(){return{getCookie:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){var i=$.trim(a[n]);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return void 0},setCookie:function(e,t,a){var n,i=new Date;a?(i.setTime(i.getTime()+24*a*60*60*1e3),n="expires="+i.toGMTString()):n="expires=Thu, 31 Dec 2099 00:00:00 GMT;",document.cookie=e+"="+t+"; "+n+"; path=/;"},removeCookie:function(e){document.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/;"},getLegacyCookieObject:function(){var e=this.getCookie("track"),t={};return e&&(t=JSON.parse(e.replace(/'/gi,'"'))),_.each(t,function(e,a){t[a]=unescape(e)}),t},setLegacyCookie:function(e,t,a){var n=this.getLegacyCookieObject();"delete"===a?delete n[e]:n[e]=t.toString().replace(/\xA0/g," "),_.each(n,function(e,t){n[t]=escape(e)});var i=JSON.stringify(n);document.cookie="track="+i+";path=/;domain=.bestbuy.com;expires=Thu, 31 Dec 2099 00:00:00 GMT;"},initialize:function(e){return e.resolve()}}}),define("analytics-core/util/queryParameters",function(){return{getQueryParams:function(e){var t=(e||window.location.search).substring(1);return t?_.chain(t.split("&")).map(function(e){var t=e.split("=");return[t[0],decodeURIComponent(t[1])]}).object().value():!1},initialize:function(e){return e.resolve()}}}),define("analytics-dotcom/pageTypes",function(){return{pageTypeModules:{browse:{compare:{modules:["compare"]},deptCat:{modules:["deptCatLanding"]},list:{modules:["productListing"],category:{modules:["categoryListing"]},search:{modules:["search"],failed:{modules:["searchResultsFailed"]},promo:{modules:["searchResultsPromo"]},results:{modules:["searchResults"]}}},home:{modules:["homepage"]},pdp:{modules:["pdp"]},promo:{modules:["promo"]},shippingOptions:{modules:["shippingOptions"]},solutionBuilder:{modules:["solutionBuilder"]}},cart:{modules:["cart","cartGiftCards"]},checkout:{modules:["checkout"]},connectedDevices:{addLine:{modules:["addLine"]},noContract:{planList:{modules:["activatedDevices"]}},upgrade:{modules:["upgradeChecker"]}},profile:{lifeEvents:{modules:["lifeEvents"]}}},initialize:function(e){return e.resolve()}}}),define("analytics-dotcom/modules/accessoryFinder",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=e.getData(),n=null;return{_buildProductsOnOpen:function(t){return e.getProductString(_.map(t,function(e){return{sku:e.skuId}}))},setEvents:function(){var i=this;e.on("accessoryFinder:productClick",function(){t.saveValue("accessoryFinderClick","lbox:PDPclick","session")}),e.on("accessoryFinder:open",function(){n=arguments[1].drivers[0];var t=n.accessories,a={scEvents:"event7",scProducts:i._buildProductsOnOpen(t)};e.sendEventData(a),e.setData("isAccessoryFinderOpen",!0)}),e.on("accessoryFinder:addedToCart",function(t){var i={scEvents:"scAdd,event5,"+(t.warranty?"event10":"event8"),scProducts:e.getProductString({sku:t.skuId,events:{event5:t.price.eachPrice?t.price.eachPrice:t.price.currentPrice?t.price.currentPrice:""},eVars:{eVar7:"lbox:"+a.templateName,eVar2:n.skuId,eVar40:e.getDate()}}),clickAction:"lbox:"+(t.warranty?"PlanAddToCart":"ProductAddToCart")};e.sendEventData(i)}),e.on("accessoryFinder:close",function(){e.setData("isAccessoryFinderOpen",!1),e.sendEventData({linkName:"lbox:accessory:close",clickAction:"lbox:accessory:close"})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/activatedDevices",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("noContractPlanList:planDetails",function(){e.sendEventData({linkName:t.pageName+": View Plan Details"})})},initialize:function(e){return this.setEvents(),e.resolve()}}}),define("analytics-dotcom/modules/addLine",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("addLine:contractDuration",function(a){e.sendEventData({clickAction:"Add a Line: "+a.selected,pageName:t.pageName})}),e.on("addLine:contractLearnHow",function(){e.sendEventData({clickAction:"Add a Line: Learn how you can save",pageName:t.pageName})}),e.on("addLine:contractSelected",function(a){e.sendEventData({clickAction:"Add a Line: "+a.selected,pageName:t.pageName})}),e.on("addLine:monthlyCharges",function(){e.sendEventData({clickAction:"Click: Additional Monthly Charges",pageName:t.pageName})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/cart",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData(),a=require("analytics-core/util/cookies");return{_buildProducts:function(t){return e.getProductString(_.map(t,function(e){var t=_.where(e.item.availableFulfillmentTypes,{label:"Shipping"}),a="";return _.each(t,function(e){a=_.pluck(e.levelOfServiceList,"value").join(":")}),{sku:e.item.skuId,quantity:e.quantity?e.quantity:"1",price:e.item.price&&e.item.price.eachPrice?e.item.price.eachPrice:"",eVars:a?{eVar45:a}:null}}))},setData:function(){e.setData("cartInfo",window.cartOrderInit),e.addEvents("scView"),e.setData("templateName","CRT"),e.setData("scProducts",this._buildProducts(t.cartInfo.lineItems))},setEvents:function(){e.on("dio.popup.launch",function(t,a,n){var i=a+":"+n+": open",r={pageName:n,clickAction:i,linkName:i};e.sendEventData(r)}),e.on("cart:continueShopping:open",function(){var t={clickAction:"Cart:Continue_Shopping"};e.sendEventData(t)}),e.on("cart:continueShopping:click",function(e){a.setLegacyCookie("page",t.pageName),a.setLegacyCookie("lid","Cart:Continue_Shopping:"+$(e).text())}),e.on("cart.fulfillment.changeFulfillment",function(a){var n={pageName:t.pageName,scEvents:"event22",scProducts:e.getProductString({sku:a.attributes.item.skuId,events:{event22:"1"}})};e.sendEventData(n)}),e.on("dio.cart.quantity.update",function(){e.sendEventData({linkName:"CPT:Cart:Update Quantity"})}),e.on("backbone:model:lineItem:remove",function(t){var a=t.attributes.item.skuId,n={scEvents:"scRemove",scProducts:e.getProductString({sku:a})};e.sendEventData(n)}),e.on("warranty:add",function(t,a){e.sendEventData({scEvents:"scAdd,event5,event58",scProducts:e.getProductString({sku:t.skuId,events:{event5:t.price},eVars:{eVar2:a.parent.attributes.item.skuId,eVar7:"CRT",eVar40:e.getDate()}})})}),e.on("warranty:remove",function(t){var a=t.attributes.warrantyItem.skuId,n=t.attributes.warrantyItem.price.eachPrice.substring(1),i=t.attributes.quantity,r={scEvents:"scRemove",scProducts:e.getProductString({sku:a,quantity:i,price:n})};e.sendEventData(r)}),e.on("cart:onCarouselLoad",function(){}),e.on("cart:addToCart",function(a){var n=_.first(a),i=n.algorithmVersion,r=i+": "+t.pageName,s=n.price.substring(1),c=n.sku,o={scEvents:"scAdd,event5,event55",scProducts:e.getProductString({sku:c,events:{event5:s},eVars:{evar7:i.replace(/,/g,"_")+": "+t.pageName.replace(/,/g,""),eVar40:e.getDate()}}),epClick:r,clickAction:r};e.sendEventData(o)}),e.on("cart:addToCart:requiredParts",function(a){var n={scEvents:"scAdd",scProducts:e.getProductString({sku:a.sku,events:{event5:a.price},eVars:{eVar2:a.parentSku,eVar7:t.templateName+":ReqParts",eVar40:e.getDate()}})};e.sendEventData(n)}),e.on("cart:recommendations:productClick",function(e){var n=_.first(e),i={scEvents:"event55",epString:n.algorithmVersion+": "+t.pageName};a.setCookie("dioEpClick",JSON.stringify(i),30)}),e.on("cart:addToSaveForLaterSuccess",function(t){var a={scEvents:"event81",scProducts:";"+t};e.sendEventData(a)}),e.on("cart:removeToSaveForLaterSuccess",function(t){var a={scEvents:"event82",scProducts:e.getProductString({sku:t})};e.sendEventData(a)}),e.on("cart:moveToCartSuccess",function(t){var a=t.price?t.price:"",n={scEvents:"scAdd",scProducts:e.getProductString({sku:t.sku,events:{event5:a},eVars:{eVar7:"CRT:SaveForLater"}})};e.sendEventData(n)}),e.on("pageEvent:error",function(a){e.sendEventData({errorCodes:a.message,errorLocation:t.pageName})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve()}}}),define("analytics-dotcom/modules/cartGiftCards",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=e.getData();return{setEvents:function(){e.on("cart.giftCards.open",function(){var t={pageName:a.pageName,clickAction:"GiftCard"};e.sendEventData(t)}),e.on("cart.giftCards.noThanks",function(){t.setLegacyCookie("lid","Cart:GiftCard:NoThanks"),t.setLegacyCookie("page",a.pageName)}),e.on("cart.giftCards.added",function(t){e.sendEventData({pageName:a.pageName,scEvents:"scAdd",scProducts:e.getProductString({sku:t.sku,quantity:t.qty,events:{event5:t.amount?t.amount:""},eVars:{eVar7:"lbox:GiftCard",eVar40:e.getDate()}})})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/categoryListing",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=require("analytics-core/util/cookies"),n=e.getData();return{_convertDate:function(e){return parseInt(e.substr(0,2),10).toString()+"-"+parseInt(e.substr(3,2),10).toString()+"-"+e.substr(6)},setData:function(){e.setData("templateName","BRCL"+(n.listFaceted?"F":"")),n.listFaceted&&e.setData("pageName",n.pageName+": Faceted"),e.setData("searchResultsNum",e.parseInteger(n.searchResultsNum))},setEvents:function(){$("body").on("click","[data-rank='pdp']",function(){t.saveValue("searchRank","Non-Search"),t.saveValue("searchTerm","Non-Search")}),$("body").on("click","[data-rank='reviews']",function(){t.saveValue("searchRank","Non-Search"),t.saveValue("searchTerm","Non-Search"),t.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^BrowseResults","session"),a.setLegacyCookie("lid",n.pageName+": list: reviews")}),e.on("addToCart:done:success",function(t){var a=e.getPricingType(t.requestOptions.pricingType),i=t.requestOptions.price?t.requestOptions.price:"",r=["scAdd"];0===n.cartItemCount&&r.push("scOpen"),"map"===a&&r.push("event99"),"icr"===a&&r.push("event100"),t.isHaccs&&r.push("event21"),e.sendEventData({scEvents:r.join(","),scProducts:e.getProductString({sku:t.product.skuId,events:{event5:i},eVars:{eVar7:n.templateName,eVar40:e.getDate()}}),seePriceIn:"icr"===a?"See Price in Checkout":"map"===a?"See Price in Cart":null,searchRelevancyRank:"Non-Search",searchRelevancyTerm:"Non-Search"}),e.setData("cartItemCount",++n.cartItemCount)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/checkout",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{_buildPageName:function(){var t=["uberCatName","parentCatName","catName"];return e.buildTrackingValue(t,": ")},_pushSiteCatEvents:function(){switch(t.catName){case"Checkout - Shipping and Pickup Options":return e.addEvents("event18"),!0;case"Checkout - Payment Info":return e.addEvents("event17"),!0;case"Checkout - Submit Order":return e.addEvents("event20"),!0;default:return!1}},_buildFulfillmentClickAction:function(e){switch(e){case"inStorePickup":return"DO_Pick_Up_Instead";case"shipping":return"DO_Ship_Instead";case"delivery":case"specialDelivery":return"DO_Deliver_Instead";default:return null}},setData:function(){e.setData("pageName",this._buildPageName()),this._pushSiteCatEvents()},setEvents:function(){var a=this;e.on("checkout:order:lineItems:change:fulfillmentType",function(t,n){e.sendEventData({clickAction:a._buildFulfillmentClickAction(n)})}),e.on("checkout:addressBook:open",function(){var t="Cart: Shipping Address lbox: Enter Address Button: click",a={clickAction:t,linkName:t,scEvents:"event19"};e.sendEventData(a)}),e.on("checkout:order:lineItems:remove",function(t){var a=t.attributes.sku,n=t.attributes.meta.price.current||t.attributes.meta.price.regular||"",i=t.attributes.quantity,r={scEvents:"scRemove",scProducts:e.getProductString({sku:a,quantity:i,price:n})};e.sendEventData(r)}),e.on("pageEvent:error",function(t){_.each(t,function(t){var a={errorCodes:t.errorCode};e.sendEventData(a)})}),e.on("pageEvent:error:client",function(t){_.each(t,function(t){_.each(t,function(t){var a={errorCodes:t};e.sendEventData(a)})})}),e.on("checkout:scheduleDelivery:scheduleLater",function(){e.sendEventData({clickAction:"checkout:schedulelater"})}),e.on("checkout:scheduleDelivery:haulAway",function(){e.sendEventData({clickAction:"checkout:haulaway"})}),e.on("analytics:checkout:guest:memberId:sidebar",function(){e.sendEventData({pageName:t.pageName,scEvents:"event24"})}),e.on("analytics:checkout:guest:memberId:lightbox",function(){e.sendEventData({pageName:t.pageName,scEvents:"event25"})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/compare",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{_buildSkus:function(e){var t=[];return _.each(e,function(e){t.push({sku:e})}),t},setData:function(){e.addEvents("event12");var a=this._buildSkus(t.compareSkus);e.setData({pageName:"Compare Page",scProducts:e.getProductString(a),templateName:"PCMP"})},setEvents:function(){e.on("AddToCart:Success",function(a){var n="";n+="scAdd",n+=0===t.cartItemCount?",scOpen":"",n+=a.isICR===!0?",event100":"",e.sendEventData({scProducts:e.getProductString({sku:a.skuId,eVars:{eVar7:"PCMP"}}),scEvents:n}),e.setData("cartItemCount",++t.cartItemCount)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/creditCards",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("citi:link:success",function(){e.sendEventData({linkName:t.pageName+": Citi: Click",lastLink:t.pageName+": Connect Account - Success"})}),e.on("citi:link:failure",function(){e.sendEventData({linkName:t.pageName+": Citi: Click",lastLink:t.pageName+": Connect Account - Failed"})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/deptCatLanding",function(require){var e=require("analytics-core/analyticsTracker");return{_buildPageName:function(e){return _.reject(_.pluck(e,"displayName"),function(e){return"Best Buy"===e}).join(": ")},setData:function(){window.siteControlBreadcrumb&&e.setData("pageName",this._buildPageName(window.siteControlBreadcrumb))},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/global",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=require("analytics-core/util/queryParameters"),n=a.getQueryParams(),i=e.getData(),r=t.getLegacyCookieObject();return{_setRzTierCode:function(){var t=window.location;if(t.hostname.indexOf("www.bestbuy")>=0||t.hostname.indexOf("www-ssl.bestbuy")>=0){var a="https:"===t.protocol?"https://www-ssl.bestbuy.com/api/1.0/fragment/data/tierCode":"http://www.bestbuy.com/api/1.0/fragment/data/tierCode";$.ajax(a).done(function(t){var a;if("string"==typeof t)a=JSON.parse(t);else{if("object"!=typeof t)return!1;a=t}return a.rzTierStatus?(e.setData("rzTier",a.rzTierStatus),!0):void 0})}return!1},_buildPageName:function(){var t=["uberCatName","parentCatName","catName"];return e.buildTrackingValue(t,": ")},_buildPageHierarchy:function(){var t=["uberCatName","parentCatName"];return t.push(i.catId&&"pdp"===i.catId?"catId":"catName"),e.buildTrackingValue(t,",")},_buildCategoryId:function(){return e.buildTrackingValue(["uberCatId","parentCatId","catId"],": ")},_buildCategoryName:function(){var e=this._buildPageName();return e?_.first(e.split(":"),2).join(":"):null},_buildCampaignId:function(){if(n.ref&&n.loc){var t=[];return t.push("ref","loc"),n.acampID&&t.push("acampID"),e.buildTrackingValue(t,",",n)}return n.cmp?n.cmp:n.dcmp?n.dcmp:!1},_buildMonetateValue:function(){var e=window.MT_flag||t.getCookie("mt.s_monetateFlag");return e?"Monetate;"+e:null},_getCartItemCount:function(){var e,a=t.getCookie("CartItemCount");return e=a&&a.length>0?parseInt(a,10):0},_bazaarVoiceCheck:function(){"undefined"!=typeof $BV&&$BV.ui("rr","show_reviews",{})},setData:function(){n=a.getQueryParams(),r=t.getLegacyCookieObject(),e.setData({scEvents:"",scEventsArray:[]}),t.getCookie("bby_rdp")&&e.setData("viewSize",t.getCookie("bby_rdp")),n.et_cid&&e.setData("exTgtCampaign",n.et_cid),n.et_rid&&e.setData("exTgtRecipient",n.et_rid),n.icmp&&e.addEvents("event16");var s=this._buildCampaignId();if(s){var c=new Date;t.setLegacyCookie("campaign_date",c.getTime()),t.setLegacyCookie("campaign",s),e.setData("campaignId",s)}this._setRzTierCode(),r.clickAction&&(e.setData("clickAction",r.clickAction),t.setLegacyCookie("clickAction","","delete")),n.searchRedirect&&e.setData("searchTermSuccess","redirect: "+n.searchRedirect.replace(/\+/g," ").toLowerCase()),t.getCookie("eut")?("false"===r.wasLoggedIn&&(e.addEvents("event9"),t.setLegacyCookie("wasLoggedIn",null,"delete")),e.setData("partyID",t.getCookie("eut"))):t.setLegacyCookie("wasLoggedIn","false"),n.ep&&e.setData("epClick",n.ep+(n.ref?",ref="+n.ref:"")),r.searchLocation&&(e.setData("searchLocation",r.searchLocation),t.setLegacyCookie("searchLocation","","delete")),
r.autocomplete&&(e.setData("searchAutocomplete",r.autocomplete),t.setLegacyCookie("autocomplete","","delete")),r.headerBanner&&(e.addEvents("event26"),e.setData("headerBannerClick",r.headerBanner),t.setLegacyCookie("headerBanner","","delete")),e.setData({tealeafId:t.getCookie("SID")||"no_id",monetateValue:this._buildMonetateValue(),cartItemCount:this._getCartItemCount(),itemsInCart:this._getCartItemCount()+" item"+(this._getCartItemCount()>1?"s":"")+" in cart",categoryId:this._buildCategoryId(),categoryName:this._buildCategoryName(),hierarchy:this._buildPageHierarchy(),language:"es"===document.getElementsByTagName("html")[0].lang?"es":"en",pageName:this._buildPageName(),section:i.uberCatName||i.parentCatName||i.catName||null})},setEvents:function(){e.on("analytics:trackEvent:event",function(t){e.sendEventData(t)}),e.on("survey:invite",function(){var a={confirmIt:t.getCookie("s_vi")};e.sendEventData(a)}),this._bazaarVoiceCheck(),e.on("Header:Search:Submit",function(e){if(t.setLegacyCookie("searchLocation",i.pageName),e&&e.autocomplete){var a=[e.autocomplete.selectedTerm];a.push(e.autocomplete.selectedCategory?e.autocomplete.selectedCategory:"null"),a.push(e.autocomplete.partialTerm),t.setLegacyCookie("autocomplete",a.join(": "))}}),e.on("addToPackage",function(){e.sendEventData({templateName:i.templateName,clickAction:"mobilepkg:Add to Package",linkName:"mobilepkg:Add to Package"})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/homepage",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies");return{setData:function(){var a="Best Buy";e.setData({merchCategory:"Homepage",pageName:a,section:a,hierarchy:a,profileId:t.getCookie("DYN_USER_ID")})},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/icrLightbox",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){var a="ICR:lbox:enterinfo",n="ICR:lbox:ourprice";e.on("icr:info:open",function(){var n={pageName:a,templateName:t.templateName};e.sendEventData(n)}),e.on("icr:info:close",function(){}),e.on("icr:info:continue",function(){var t={pageName:a,clickAction:"ICR:lbox:continue"};e.sendEventData(t)}),e.on("icr:price:open",function(){var a={pageName:n,templateName:t.templateName};e.sendEventData(a)}),e.on("icr:price:continue",function(){var t={pageName:n,clickAction:"ICR:lbox:continuecheckout"};e.sendEventData(t)}),e.on("icr:remove",function(t){e.sendEventData({pageName:"info"===t.state?a:"price"===t.state?n:"",scEvents:"scRemove",scProducts:e.getProductString({sku:t.skuId})})})},initialize:function(e){return this.setEvents(),e.resolve()}}}),define("analytics-dotcom/modules/lidTracking",function(require){function e(e){var t=e.data("track")===!0?e.text():e.data("track"),a=e.parents("[data-context]");t=t.toString().replace(/\xA0/g," ");var n=[t];return _.each(a,function(e){n.push($(e).data("context"))}),{target:e,trackValue:t,contextString:n.reverse().join(": "),contexts:n.reverse()}}function t(e){var t=e.attr("name"),a="";_.isString(t)&&(a=t.toString().substring(5).replace(/\xA0/g," ")),c.setLegacyCookie("lid",$("<textarea />").html(a.replace(/<[^\>]*\>/g,"")).text()),c.setLegacyCookie("page",o.pageName)}function a(e){var t=e.data("lid");c.setLegacyCookie("lid",$("<textarea />").html(t.replace(/<[^\>]*\>/g,"")).text()),c.setLegacyCookie("page",o.pageName)}function n(){var e=c.getLegacyCookieObject();if(e.lid&&e.page){var t=e.lid,a=e.page;i(a,$("<textarea />").html(t.replace(/<[^\>]*\>/g,"")).text()),c.setLegacyCookie("lid",null,"delete"),c.setLegacyCookie("page",null,"delete")}}function i(e,t){"hdr"===t.substring(0,3)||"ft"===t.substring(0,2)||"ubr"===t.substring(0,3)?s.setData("headerFooter",t):s.setData("previousLid",e+": "+t)}var r,s=require("analytics-core/analyticsTracker"),c=require("analytics-core/util/cookies"),o=s.getData();return $("body").on("click","a[name^='&lid=']",function(e){var a=$(e.currentTarget);t(a)}),$("body").on("click","a[data-lid]",function(e){var t=$(e.currentTarget);a(t)}),$("body").on("click","[data-track]",function(t){var a=$(t.currentTarget),n=e(a);c.setLegacyCookie("lid",$("<textarea />").html(n.contextString.replace(/<[^\>]*\>/g,"")).text()),c.setLegacyCookie("page",o.pageName),r=setTimeout(function(){c.setLegacyCookie("lid",null,"delete"),c.setLegacyCookie("page",null,"delete");var e={lastLink:o.pageName+": "+n.contextString};s.sendEventData(e)},2e3)}),$(".banners iframe").load(function(){$(this).contents().find("body a[name^='&lid=']").on("click",function(e){var a=$(e.currentTarget);t(a)}),$(this).contents().find("body a[data-lid]").on("click",function(e){var t=$(e.currentTarget);a(t)}),$(this).contents().find("body [data-track]").on("click",function(t){var a=$(t.currentTarget),n=e(a);c.setLegacyCookie("lid",$("<textarea />").html(n.contextString.replace(/<[^\>]*\>/g,"")).text()),c.setLegacyCookie("page",o.pageName),r=setTimeout(function(){c.setLegacyCookie("lid",null,"delete"),c.setLegacyCookie("page",null,"delete");var e={lastLink:o.pageName+":"+n.contextString};s.sendEventData(e)},2e3)})}),$(window).on("beforeunload",function(){clearTimeout(r)}),{buildContext:"",initialize:function(t){return this.buildContext=e,n(),t.resolve()}}}),define("analytics-dotcom/modules/lifeEvents",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("lifeEvents:searchLists",function(){e.sendEventData({lastLink:t.pageName+": Find a List"})}),e.on("addToList",function(a){var n={scProducts:";"+a.skuId+";;;event11=1;eVar48="+t.templateName+"-WL",scEvents:"event11"};e.sendEventData(n)}),e.on("addToRegistry",function(a){var n={scProducts:";"+a.skuId+";;;event11=1;eVar48="+t.templateName+"-WR",scEvents:"event11"};e.sendEventData(n)}),e.on("addToCart:done:successInfo",function(a){var n={scEvents:"scAdd,event5"+(0===t.cartItemCount?",scOpen":""),scProducts:e.getProductString({sku:a.skuId,events:{event5:a.price?a.price:a.productDetails&&a.productDetails.currentPrice?a.productDetails.currentPrice:""},eVars:{eVar7:t.templateName,eVar40:e.getDate()}})};e.setData("cartItemCount",++t.cartItemCount),e.sendEventData(n)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/pdp",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/queryParameters"),a=require("analytics-core/util/cookies"),n=require("analytics-core/util/browserStorage"),i=e.getData();return e.setData("isAccessoryFinderOpen",!1),{_buildPageName:function(){var t=["uberCatName","parentCatName","catId"];return e.buildTrackingValue(t,": ")},_buildSearchRank:function(){var e=a.getLegacyCookieObject();return e.searchRank?e.searchRank:""},_buildPageHierarchy:function(){var t=["uberCatName","parentCatName","catId"];return e.buildTrackingValue(t,",")},_buildMerchCategory:function(){var e="";return document.referrer?document.referrer.toLowerCase().indexOf("bestbuy.com")>-1&&(e=t.ref&&t.loc?"External Campaign":"Referrer"):e="Direct",e},_buildProductAvailability:function(){var t=!1,a="";if(i.isCloud){var n=$("#price .cart-button").data("button-state-id");switch(n){case"SOLD_OUT_ONLINE":t=!0,a="soldOutOnline";break;case"IN_STORE_ONLY":t=!0,a="inStoreOnly";break;case"COMING_SOON":t=!0,a="comingSoon"}}else $("#soldout").length>0?(t=!0,a="soldOutOnline"):$("#instoreonly").length>0?(t=!0,a="inStoreOnly"):$("#comingsoon").length>0&&(t=!0,a="comingSoon");return t&&e.addEvents("event13"),a},_checkIcrMap:function(){var t=$("#price .priceblock").data("pricing-type"),a=$("#price .priceblock").data("orig-pricing-type"),n=e.getPricingType(a||t||"");if(n)switch(e.setData("pricingType",n),n){case"icr":e.addEvents("event95"),e.setData("pricingTypeAddEvent","event100"),e.setData("isIcrSku",!0);break;case"map":e.addEvents("event94"),e.setData("pricingTypeAddEvent","event99"),e.setData("isMapSku",!0)}},_buildVideoString:function(e){return e=e?e:"","SP^"+i.skuId+"^"+e+"^"+i.pageName},setData:function(){e.addEvents("event3","prodView");var t=n.getValue("accessoryFinderClick",!0);t&&"lbox:PDPclick"===t&&(e.addEvents("event33"),e.setData({clickAction:t}));var r=a.getCookie("dioEpClick");r&&(r=JSON.parse(r),e.setData({clickAction:r.epString,epClick:"D=c38"}),_.each(r.scEvents.split(","),function(t){e.addEvents(t)}),a.removeCookie("dioEpClick")),$("#build-bundle-link").length&&e.addEvents("event93"),this._checkIcrMap(),n.getValue("searchTerm")&&n.getValue("searchRank")&&e.setData({searchRelevancyTerm:n.getValue("searchTerm"),searchRelevancyRank:n.getValue("searchRank")}),n.getValue("ratingsClick")&&(e.addEvents("event78"),e.setData({BVload:n.getValue("ratingsClick")})),n.removeItem("searchTerm"),n.removeItem("searchRank"),n.removeItem("ratingsClick"),e.setData({pageName:this._buildPageName(),merchCategory:this._buildMerchCategory(),productAvailability:this._buildProductAvailability(),scProducts:i.skuId?e.getProductString({sku:i.skuId}):null,pageHierarchy:this._buildPageHierarchy(),searchRank:this._buildSearchRank()})},setEvents:function(){var t=this;e.on("pdp:tab:activated",function(t){var a=t.tabId,n=t.clickLocation,r={};"reviews"===a?(_.extend(r,{scEvents:"event78",scProducts:e.getProductString({sku:i.skuId}),BVinteraction:"Bazaarvoice^RatingsAndReviews^Action^Read^Review^CustomClick"}),_.extend(r,{lastLink:i.pageName+": "+n})):_.extend(r,{lastLink:i.pageName+": "+a}),e.sendEventData(r)}),e.on("pdp:qna:clicked",function(){var t={BVinteraction:"Bazaarvoice^AskAndAnswer^Action^ProductQA^Popup^RRTab"};e.sendEventData(t)}),e.on("pdp:carfit:expand",function(){var t={linkName:"Car Fit: Expand"};e.sendEventData(t)}),e.on("pdp:carfit:select-vehicle",function(){var t={linkName:"Car Fit: Select Vehicle"};e.sendEventData(t)}),e.on("pdp:carfit:change-vehicle",function(){var t={linkName:"Car Fit: Change Vehicle"};e.sendEventData(t)}),e.on("cart.geeksquad.scenario",function(t){var a={productTab:i.uberCatName+":"+i.parentCatName+":lbox",clickAction:"GS:cart add plan",seePriceIn:i.isIcrSku?"See Price in Checkout":i.isMapSku?"See Price in Cart":null,scEvents:"scAdd,event5"+(0===i.cartItemCount?",scOpen":""),scProducts:e.getProductString({sku:t,events:{event5:$("#priceblock-wrapper .item-price").text()},eVars:{eVar7:"GS:"+i.templateName,eVar40:e.getDate()}})};e.sendEventData(a)}),e.on("addToList",function(t){var a={scProducts:e.getProductString({sku:t.sku,events:{event11:"1"},eVars:{eVar48:i.templateName+"-WL"}}),scEvents:"event11"};e.sendEventData(a)}),e.on("addToRegistry",function(t){var a={scProducts:";"+t.sku+";;;event11=1;evar48="+i.templateName+"-WR",scEvents:"event11"};e.sendEventData(a)}),e.on("addToCart:done:success",function(t){if(!i.isAccessoryFinderOpen){var a=t.product,n="scAdd,event5"+(0===i.cartItemCount?",scOpen":""),r="",s="",c="";a.skuId.toString()!==i.skuId.toString()?(r=$("[data-sku-id="+a.skuId+"] .item-price").text(),s="ACC:"+i.templateName,c=i.skuId):(r=$("#priceblock-wrapper .item-price").text(),s=i.templateName,i.pricingTypeAddEvent&&(n+=","+i.pricingTypeAddEvent));var o={sku:a.skuId,events:{event5:r},eVars:{eVar7:s,eVar40:e.getDate()}};c&&(o.eVars.eVar2=c);var u={seePriceIn:i.isIcrSku?"See Price in Checkout":i.isMapSku?"See Price in Cart":null,scEvents:n,scProducts:e.getProductString(o)};e.setData("cartItemCount",++i.cartItemCount),e.sendEventData(u)}}),$("body").on("click","#all-financing-offers-tooltip > div > ul > li > a",function(){var t={linkName:"fsdi: PDP_CC_Popup",lastLink:i.pageName+": CC_Offer: fsdi: click"};e.sendEventData(t)}),$("#financing-offers").on("click","a",function(){var t={linkName:"fsdi: PDP_CC_Popup",lastLink:i.pageName+": CC_Offer: fsdi: click"};e.sendEventData(t)}),$("body").on("click","#all-bundles-tooltip a",function(){a.setLegacyCookie("lid","pdp: tooltip bundle: pdp: click")}),$("#bundle-products > div > div > a").on("click",function(){a.setLegacyCookie("lid","Pkg Deals that Include this Item: pdp: click")}),$("[data-bbypopup-name='askAnswer']").on("click",function(){var t={};_.extend(t,{BVinteraction:"Bazaarvoice^AskAndAnswer^Action^ProductQA^Popup"}),e.sendEventData(t)}),e.on("pdp:attribute-change",function(t){var a=t[0].attributes;e.setData("skuId",a.skuId),e.setData({catName:a.names["short"],previousLid:i.pageName+": "+t[1],scProducts:i.skuId?e.getProductString({sku:i.skuId}):null}),e.sendStateData()}),e.on("MediaElement:videoStart",function(a){e.sendEventData({scEvents:"event57",videoTrackingString:t._buildVideoString(a.videoTitle)})}),e.on("MediaElement:videoHalf",function(a){e.sendEventData({scEvents:"event98",videoTrackingString:t._buildVideoString(a.videoTitle)})}),e.on("MediaElement:videoEnd",function(a){e.sendEventData({scEvents:"event97",videoTrackingString:t._buildVideoString(a.videoTitle)})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/productListing",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=require("analytics-core/util/browserStorage"),n=e.getData();return{setData:function(){n.listFacets&&n.listFacets.length&&e.setData("listFacetsString",n.listFacets.replace(/\|\|/g," | ")),n.pageName&&e.setData("listFacetsString","Category:"+n.pageName+(n.listFacetsString?" | "+n.listFacetsString:""))},setEvents:function(){e.on("finder:inkToner:menu",function(e){t.setLegacyCookie("lid","inktonerfinder"),t.setLegacyCookie("page",n.pageName),a.saveValue("inkTonerFinderBrand",e.brand)}),e.on("finder:inkToner:search",function(e){a.saveValue("inkTonerSearchTerm",e["search-term"],"session")})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/promo",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{setEvents:function(){e.on("addToCart:done:success",function(a){var n=e.getPricingType(a.requestOptions.pricingType),i=a.requestOptions.price?a.requestOptions.price:"",r=["scAdd"];0===t.cartItemCount&&r.push("scOpen"),"map"===n&&r.push("event99"),"icr"===n&&r.push("event100"),a.isHaccs&&r.push("event21"),e.sendEventData({scEvents:r.join(","),scProducts:e.getProductString({sku:a.product.skuId,events:{event5:i},eVars:{eVar7:t.templateName,eVar40:e.getDate()}}),seePriceIn:"icr"===n?"See Price in Checkout":"map"===n?"See Price in Cart":null}),e.setData("cartItemCount",++t.cartItemCount)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/recommendations",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=e.getData();return{epSplit:function(e){var t={},a=e.split(",");for(var n in a){var i=a[n].split("-");t[i[0]]=i[1]}return t},setEvents:function(){var n=this;e.on("recommendations:productClick",function(e){var i=n.epSplit(e.epValue),r="rc-"+i.rc+",av-"+i.av+",rk-"+i.rk,s={scEvents:"event55",epString:r+": "+a.pageName};t.setCookie("dioEpClick",JSON.stringify(s),30)})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/search",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=e.getData();return{setData:function(){e.setData("templateName","SRCL"+(a.listFaceted?"F":"")),_.isObject(a.headerBanner)&&a.headerBanner.platform&&_.isArray(a.headerBanner.skus)&&e.setData("headerBannerString",a.headerBanner.platform+"_"+a.searchTerm+"_"+a.headerBanner.skus.join("_"))},setEvents:function(){$("body").on("click","[data-bannerLink]",function(e){t.setLegacyCookie("headerBanner",$(e.currentTarget).attr("data-bannerLink"))})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/searchResults",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/cookies"),a=require("analytics-core/util/browserStorage"),n=e.getData();return{_searchRankString:function(e){return e?n.listPageNum.toString()+": "+e.toString()+": "+n.listFaceted.toString()+": "+n.listSort+": "+n.listView:null},setData:function(){n.categoryId?e.setData("categoryId","pcat17071: "+n.categoryId):e.setData("categoryId","pcat17071"),e.setData({pageName:"Search Results"+(n.listFaceted?": Faceted":""),merchCategory:"Search Results",searchTermSuccess:n.searchTerm,searchRelevancyTerm:n.searchTerm}),e.setData("searchResultsNum",e.parseInteger(n.searchResultsNum));var t=a.getValue("lastSearchTerm",!0);if(!n.listFaceted){var i=Number(a.getValue("searchCount")||"0")+1;e.setData("scProducts",e.getProductString({sku:"internalsearch"+i})),a.saveValue("searchCount",i,"session")}("undefined"==typeof t||t!==n.searchTerm)&&e.addEvents("event1"),a.saveValue("lastSearchTerm",n.searchTerm,"session");var r=a.getValue("inkTonerSearchTerm",!0);r&&e.setData("userSearchTermSuccess",r)},setEvents:function(){var i=this;$("body").on("click","[data-rank='pdp']",function(e){var t=parseInt($(e.target).parents(".list-item").index(),10)+1;a.saveValue("searchRank",i._searchRankString(t),"session"),a.saveValue("searchTerm",n.searchTerm,"session")}),$("body").on("click","[data-rank='availability']",function(t){var a=parseInt($(t.target).parents(".list-item").index(),10)+1;e.sendEventData({searchRelevancyRank:i._searchRankString(a),searchRelevancyTerm:n.searchTerm})}),$("body").on("click","[data-rank='reviews']",function(e){var r=parseInt($(e.target).parents(".list-item").index(),10)+1;a.saveValue("searchRank",i._searchRankString(r),"session"),a.saveValue("searchTerm",n.searchTerm,"session"),a.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^SearchResults","session"),t.setLegacyCookie("lid",n.pageName+": list: reviews")}),e.on("addToCart:done:success",function(t){var a=e.getPricingType(t.requestOptions.pricingType),r=t.requestOptions.price?t.requestOptions.price:"",s=["scAdd"];0===n.cartItemCount&&s.push("scOpen"),"map"===a&&s.push("event99"),"icr"===a&&s.push("event100"),t.isHaccs&&s.push("event21"),e.sendEventData({scEvents:s.join(","),scProducts:e.getProductString({sku:t.product.skuId,events:{event5:r},eVars:{eVar7:n.templateName,eVar40:e.getDate()}}),seePriceIn:"icr"===a?"See Price in Checkout":"map"===a?"See Price in Cart":null,searchRelevancyRank:t.requestOptions.cartButtonRank?i._searchRankString(t.requestOptions.cartButtonRank):"",searchRelevancyTerm:n.searchTerm}),e.setData("cartItemCount",++n.cartItemCount)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/selfService",function(require){var e=require("analytics-core/analyticsTracker");return{setData:function(){e.trigger("page:ready")},initialize:function(e){return this.setData(),e.resolve(this)}}}),define("analytics-dotcom/modules/shippingOptions",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData(),a=require("analytics-core/util/queryParameters"),n=a.getQueryParams();return{_buildLosArray:function(){return _.pluck(t.losParams,"losId").join(":")},setData:function(){e.setData({pageName:"Fulfillment Options Lbox",scProducts:e.getProductString({sku:n.skuId,eVars:{eVar45:this._buildLosArray()}})})},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/solutionBuilder",function(require){return require("analytics-core/analyticsTracker"),{setData:function(){},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/stateChange",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-dotcom/siteConfig"),a=e.getData();return{setEvents:function(){e.on("page:stateChange",function(){$.extend(a,window.track),_.each(t.loadModules,function(e){var t=require(e);t&&t.setData&&t.setData()}),e.setData("scEventsArray",_.unique(e.getData("scEventsArray"))),e.setData("scEvents",e.getData("scEventsArray").join(",")),e.sendStateData()})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/storeAvailability",function(require){var e=require("analytics-core/analyticsTracker");return{setEvents:function(){e.on("storeAvailability:open",function(){e.sendEventData({clickAction:"StoreFinder:Launch"})}),e.on("storeAvailability:changeLocation",function(){e.sendEventData({clickAction:"StoreFinder:ChangeLocation"})}),e.on("storeAvailability:inStock",function(){e.sendEventData({clickAction:"StoreFinder:ShowStores"})}),e.on("storeAvailability:selectStore",function(){e.sendEventData({clickAction:"StoreFinder:SelectThisStore"})})},initialize:function(e){return this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/upgradeChecker",function(require){var e=require("analytics-core/analyticsTracker"),t=e.getData();return{_buildPageName:function(t){var a=e.buildTrackingValue(["uberCatName","parentCatName"],": ");return"undefined"!=typeof t.contentName&&t.contentName&&(a+=": "+t.contentName.charAt(0).toUpperCase()+t.contentName.substring(1).replace(/\-/g," ")),a},_buildEligibilityString:function(e){var t=[];switch(e.upgradeStatus){case"ELIGIBLE":t.push("2YE");break;case"INELIGIBLE":t.push("2YI");break;case"EARLY_ELIGIBLE":t.push("2YEE");break;case"ALTERNATE_ELIGIBLE":t.push("2YAE")}switch(e.ibEligibleStatus){case"ELIGIBLE":t.push("IBE");break;case"INELIGIBLE":t.push("IBI");break;case"IN_STORE_ELIGIBLE":t.push("IBISO")}return e.isPhoneIBCompatible&&t.push("IBIP"),t.length?t.join(" "):null},setData:function(){e.setData({pageName:this._buildPageName(t.activatedPackage),upgradeEligibility:this._buildEligibilityString(t.activatedPackage)})},setEvents:function(){e.on("upgradeChecker:billing",function(t){e.sendEventData({clickAction:"mobilepkg: installmentbilling: "+t.buyingOptKey,linkName:"mobilepkg: installmentbilling: "+t.buyingOptKey})}),e.on("upgradeChecker:geekSquadAttach",function(){e.sendEventData({clickAction:"mobilepkg: AccessoryPage: GeekSquadRadio",linkName:"mobilepkg: AccessoryPage: GeekSquadRadio"})}),e.on("upgradeChecker:quickLook:open",function(t){e.sendEventData({scEvents:"event27",scProducts:e.getProductString({sku:t.skuId}),clickAction:"mobilepkg: AccessoryPage: QuickLook",linkName:"mobilepkg: AccessoryPage: QuickLook"})}),e.on("upgradeChecker:addToPackage",function(t){var a="row"===t.location?"AddToPackageRow":"quickLook"===t.location?"AddToPackageQuickLook":null;a&&e.sendEventData({clickAction:"mobilepkg: AccessoryPage: "+a,linkName:"mobilepkg: AccessoryPage: "+a})}),e.on("upgradeChecker:accessoryShowMore",function(t){e.sendEventData({clickAction:"mobilepkg: AccessoryPage: ShowMore:"+t.category,linkName:"mobilepkg: AccessoryPage: ShowMore: "+t.category})}),e.on("upgradeChecker:addToCart",function(t){e.sendEventData({scEvents:"scAdd",scProducts:e.getProductString(_.map(t.products,function(a){var n={sku:a.skuId,events:{event5:a.price},eVars:{eVar7:window.track.templateName+":AccessoryPage:"+t.location,eVar40:e.getDate()}};return t.parent.skuId.toString()!==a.skuId.toString()&&(n.eVars.eVar2=t.parent.skuId),n}))})}),e.on("upgradeChecker:differentNumber",function(){e.sendEventData({lastLink:"Check a different number"})})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/searchResultsPromo",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=require("analytics-core/util/cookies"),n=e.getData();return{setData:function(){e.setData({pageName:"Search: Promo"+(n.listFaceted?": Faceted":""),searchTermPromo:n.searchTerm}),e.setData("searchResultsNum",e.parseInteger(n.searchResultsNum))},setEvents:function(){$("body").on("click","[data-rank='pdp']",function(){t.saveValue("searchRank","Non-Search"),t.saveValue("searchTerm","Non-Search")}),$("body").on("click","[data-rank='reviews']",function(){t.saveValue("searchRank","Non-Search"),t.saveValue("searchTerm","Non-Search"),t.saveValue("ratingsClick","Bazaarvoice^RatingsAndReviews^Action^Read^Review^BrowseResults","session"),a.setLegacyCookie("lid",n.pageName+": list: reviews")}),e.on("addToCart:done:success",function(t){var a=e.getPricingType(t.requestOptions.pricingType),i=t.requestOptions.price?t.requestOptions.price:"",r=["scAdd"];0===n.cartItemCount&&r.push("scOpen"),"map"===a&&r.push("event99"),"icr"===a&&r.push("event100"),t.isHaccs&&r.push("event21"),e.sendEventData({scEvents:r.join(","),scProducts:e.getProductString({sku:t.product.skuId,events:{event5:i},eVars:{eVar7:n.templateName,eVar40:e.getDate()}}),seePriceIn:"icr"===a?"See Price in Checkout":"map"===a?"See Price in Cart":null,searchRelevancyRank:"Non-Search",searchRelevancyTerm:"Non-Search"}),e.setData("cartItemCount",++n.cartItemCount)})},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/modules/searchResultsFailed",function(require){var e=require("analytics-core/analyticsTracker"),t=require("analytics-core/util/browserStorage"),a=e.getData();return{setData:function(){var n=t.getValue("inkTonerSearchTerm",!0);if(n&&e.setData("userSearchTermFailure",n),e.setData({pageName:"Search Results: No Results",searchResultsNum:"zero",searchTermFailure:a.searchTerm,searchRelevancyTerm:"Non-Search"}),!a.listFaceted){var i=Number(t.getValue("searchCount")||"0")+1;e.setData("scProducts",e.getProductString({sku:"internalsearch"+i})),t.saveValue("searchCount",i,"session")}var r=t.getValue("lastSearchTerm",!0);("undefined"==typeof r||r!==a.searchTerm)&&e.addEvents("event2"),t.saveValue("lastSearchTerm",a.searchTerm,"session")},setEvents:function(){},initialize:function(e){return this.setData(),this.setEvents(),e.resolve(this)}}}),define("analytics-dotcom/siteConfig",function(require){var e=require("analytics-core/analyticsTracker"),t="analytics-dotcom/modules/",a={loadModules:[],pageTypeModules:require("analytics-dotcom/pageTypes").pageTypeModules,initialize:function(e){var t=this._getPageModules();return require(t,function(){e.resolve(arguments)}),e},_getPageModules:function(){var a=[],n=this._getModuleNames();return a.push("analytics-core/util/browserStorage"),a.push("analytics-core/util/cookies"),a.push("analytics-core/util/queryParameters"),a.push("analytics-dotcom/modules/global"),this.loadModules.push("analytics-dotcom/modules/global"),a.push("analytics-dotcom/modules/lidTracking"),a.push("analytics-dotcom/modules/icrLightbox"),a.push("analytics-dotcom/modules/accessoryFinder"),a.push("analytics-dotcom/modules/storeAvailability"),a.push("analytics-dotcom/modules/stateChange"),a.push("analytics-dotcom/modules/trackEvent"),a.push("analytics-dotcom/modules/recommendations"),n.length&&_.each(n,_.bind(function(module){a.push(t+module),this.loadModules.push(t+module)},this)),e.options.DEVMODE&&"undefined"!=typeof console&&(console.log("modules loaded:",_.unique(a)),console.log("pageType:",e.getData("pageType"))),this.loadModules=_.unique(this.loadModules),_.unique(a)},_getPageTypeModules:function(e,t,a){if(_.isArray(e.modules)&&(t=t.concat(e.modules)),a.length){var n=a.shift();return _.isObject(e[n])?this._getPageTypeModules(e[n],t,a):t}return t},_getModuleNames:function(){var t=[],a=e.getData("catId")?e.getData("catId").toLowerCase():"",n=e.getData();if(n.pageType&&$.extend(t,this._getPageTypeModules(this.pageTypeModules,[],n.pageType.split(","))),"Checkout"===n.uberCatName&&"pcat17005"!==a)t.push("checkout");else switch(a){case"cat12090":break;case"pcat17000":break;case"pcat17026":break;case"pcat17082":break;case"cat12047":break;case"pcat17029":t.push("creditCards");break;case"pcat17030":break;case"pcat17032":break;case"pcat17601":break;case"cat12057":break;case"cat12056":break;case"pcat17027":break;case"ss/order/ff":t.push("selfService");break;case"ss/order/cc":t.push("selfService");break;case"orderchanges.guestauthentication":t.push("selfService")}return t}};return _.bindAll(a)}),define("analytics-dotcom/eventDataKeys",function(){return{keys:["abTest20","abTest66","abTest67","abTest68","browseMulti","BVinteraction","campaignId","cartItemCount","categoryId","ccApplication","clickAction","epClick","errorCodes","facetName","hierarchy","language","lastLink","legacyCodebase","linkName","pageCampaign","pageName","searchRelevancyRank","searchRelevancyTerm","scEvents","scProducts","section","seePriceIn","templateName","userSearchTerm","videoTrackingString"],initialize:function(e){return e.resolve()}}}),define("analytics-dotcom/modules/utilities",function(require){var e=require("analytics-core/analyticsTracker");return{cleanProductValue:function(e){return $("<textarea />").html(e.toString().replace(/<[^\>]*\>/g,"")).text().replace(/[\;\$\,\=\|]/g,"")},parsePrice:function(e){if(e){var t=Number(e.toString().replace(/[^0-9\.]/g,"")).toFixed(2).toString();return"NaN"===t?"":t}return""},parseInteger:function(e){if(e){var t=Number(e.toString().replace(/[^0-9\.]/g,"")).toFixed(0).toString();return"NaN"===t?"":t}return""},getProductString:function(t){var a=["category","sku","quantity","price","eventString","eVarString"];return _.isArray(t)||(t=[t]),_.compact(_.map(t,function(t){return _.isObject(t)&&t.sku?(t.sku=e.cleanProductValue(t.sku),t.quantity=e.parseInteger(t.quantity),t.price=e.parsePrice(t.price),_.isObject(t.events)&&(t.eventString=_.map(t.events,function(t,a){return t?a+"="+e.cleanProductValue(t):void 0}).join("|")),_.isObject(t.eVars)&&(t.eVarString=_.map(t.eVars,function(t,a){return t?a+"="+e.cleanProductValue(t):void 0}).join("|")),_.map(a,function(e){return t[e]?t[e]:""}).join(";")):void 0})).join(",")},getPricingType:function(e){switch(e.toLowerCase()){case"icr-noprice":case"icr-strikethrough":case"icr-hideprice":return"icr";case"map":case"map-nosale":return"map"}},getDate:function(){var e=new Date,t=(e.getMonth()+1).toString(),a=e.getDate().toString();return(1===t.length?"0":"")+t+"-"+(1===a.length?"0":"")+a+"-"+e.getFullYear().toString()},initialize:function(e){return e.resolve()}}}),require(["require","analytics-core/analyticsTracker","analytics-dotcom/siteConfig","analytics-dotcom/eventDataKeys","analytics-dotcom/modules/utilities","analytics-core/util/queryParameters"],function(require,e,t,a,n,i){window.dioPageData=e.getData();var r=i.getQueryParams();"true"===r.analyticsdev&&e.setOptions({DEVMODE:!0}),e.options.DEVMODE&&(EventManager.debugMode(!0,!0),$(window).on("analytics:signal:SiteCatalyst",function(t,a){e.info("signal event announced:",a)}),$(window).on("analytics:signal:stateChange",function(){e.info("signal state change announced")})),window.dioPageData.delayTrack!==!0&&e.trigger("page:ready"),e.setOptions({signalTagSupported:!0,eventDataKeys:a.keys}),n&&$.extend(e,n),e.setAction("onBeforeSendData",function(){e.setData("scEventsArray",_.unique(e.getData("scEventsArray"))),e.setData("scEvents",e.getData("scEventsArray").join(","))}),e.setAction("onBeforeSendEvent",function(){e.clearSiteCatVars()}),e.setAction("onBeforeSendState",function(){e.clearSiteCatVars()}),e.loadModules(t.initialize).then(e.startTracking),e.when("analytics:ready",function(){window.dioFramework&&e.trigger("dio.trackEvent.ready")})});